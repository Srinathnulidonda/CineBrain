<nav class="mobile-nav" id="mobile-nav">
  <a href="/" class="nav-item" data-page="home">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
      <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
      <polyline points="9 22 9 12 15 12 15 22"></polyline>
    </svg>
    <span>Home</span>
  </a>
  
  <a href="/content/search.html" class="nav-item" data-page="search">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
      <circle cx="11" cy="11" r="8"></circle>
      <path d="m21 21-4.35-4.35"></path>
    </svg>
    <span>Search</span>
  </a>
  
  <a href="/user/watchlist.html" class="nav-item" data-page="watchlist">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
      <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
    </svg>
    <span>Watchlist</span>
  </a>
  
  <a href="/user/favorites.html" class="nav-item" data-page="favorites">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
      <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
    </svg>
    <span>Favorites</span>
  </a>
  
  <a href="#" class="nav-item" data-page="profile" id="mobile-profile-link">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
      <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
      <circle cx="12" cy="7" r="4"></circle>
    </svg>
    <span>Profile</span>
  </a>
</nav>

<script>
(function() {
  const mobileProfileLink = document.getElementById('mobile-profile-link');
  const navItems = document.querySelectorAll('.nav-item');
  
  // Update profile link based on auth
  function updateProfileLink() {
    const user = JSON.parse(localStorage.getItem('user') || '{}');
    if (user.username) {
      mobileProfileLink.href = `/${user.username}/profile`;
    } else {
      mobileProfileLink.href = '/auth/login.html';
    }
  }
  
  // Highlight active page
  function highlightActivePage() {
    const currentPath = window.location.pathname;
    navItems.forEach(item => {
      item.classList.remove('active');
      if (item.getAttribute('href') === currentPath) {
        item.classList.add('active');
      }
    });
  }
  
  // Haptic feedback (if supported)
  navItems.forEach(item => {
    item.addEventListener('click', () => {
      if ('vibrate' in navigator) {
        navigator.vibrate(10);
      }
    });
  });
  
  // Initialize
  updateProfileLink();
  highlightActivePage();
  window.addEventListener('auth-changed', updateProfileLink);
})();
</script>