<nav class="fixed-bottom bg-[#0a0a0f] border-top border-[#60a5fa]/20" style="z-index: 1030; height: 56px;">
    <ul class="nav nav-fill h-100 align-items-center">
        <li class="nav-item">
            <button
                class="nav-tab btn btn-ghost w-100 h-100 d-flex flex-column align-items-center justify-content-center gap-1"
                data-route="/" onclick="navigateTo('/')">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6">
                    </path>
                </svg>
                <span class="text-xs">Home</span>
            </button>
        </li>
        <li class="nav-item">
            <button
                class="nav-tab btn btn-ghost w-100 h-100 d-flex flex-column align-items-center justify-content-center gap-1"
                data-route="/content/search.html" onclick="navigateTo('/content/search.html')">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                </svg>
                <span class="text-xs">Search</span>
            </button>
        </li>
        <li class="nav-item">
            <button
                class="nav-tab btn btn-ghost w-100 h-100 d-flex flex-column align-items-center justify-content-center gap-1"
                data-route="/user/watchlist.html" onclick="navigateTo('/user/watchlist.html')">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <span class="text-xs">Watchlist</span>
            </button>
        </li>
        <li class="nav-item">
            <button
                class="nav-tab btn btn-ghost w-100 h-100 d-flex flex-column align-items-center justify-content-center gap-1"
                data-route="/user/favorites.html" onclick="navigateTo('/user/favorites.html')">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z">
                    </path>
                </svg>
                <span class="text-xs">Favorites</span>
            </button>
        </li>
        <li class="nav-item">
            <button
                class="nav-tab btn btn-ghost w-100 h-100 d-flex flex-column align-items-center justify-content-center gap-1"
                data-route="/user/profile.html" onclick="navigateTo('/user/profile.html')">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                </svg>
                <span class="text-xs">Profile</span>
            </button>
        </li>
    </ul>
</nav>

<script>
    // Set active tab based on current route
    (function () {
        const currentPath = window.location.pathname;
        const tabs = document.querySelectorAll('.nav-tab');

        tabs.forEach(tab => {
            const route = tab.dataset.route;
            if (currentPath === route || (currentPath === '' && route === '/')) {
                tab.classList.add('text-[#60a5fa]');
                tab.classList.add('border-top');
                tab.classList.add('border-2');
                tab.classList.add('border-[#60a5fa]');
            }
        });
    })();

    // Navigation with haptic feedback
    function navigateTo(route) {
        // Haptic feedback
        if (navigator.vibrate) {
            navigator.vibrate(8);
        }

        // Check auth for protected routes
        const protectedRoutes = ['/user/watchlist.html', '/user/favorites.html', '/user/profile.html'];
        const token = localStorage.getItem('cinebrain_token');

        if (protectedRoutes.includes(route) && !token) {
            window.location.href = '/auth/login.html';
            return;
        }

        window.location.href = route;
    }
</script>

<style>
    .nav-tab {
        color: #a78bfa;
        transition: all 0.2s ease;
    }

    .nav-tab:hover,
    .nav-tab:focus {
        color: #60a5fa;
        background: rgba(96, 165, 250, 0.1);
    }

    .nav-tab.active {
        color: #60a5fa;
        border-top: 2px solid #60a5fa;
    }

    @supports (padding: env(safe-area-inset-bottom)) {
        nav {
            padding-bottom: env(safe-area-inset-bottom);
        }
    }
</style>