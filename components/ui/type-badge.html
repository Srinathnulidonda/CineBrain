<!-- Content Type Badge Component -->
<span class="type-badge" data-content-type="" data-subtype="">
    <!-- Type will be populated dynamically -->
</span>

<script>
    class TypeBadge {
        constructor(element, contentType, subtype = null) {
            this.element = element;
            this.contentType = contentType?.toLowerCase() || 'unknown';
            this.subtype = subtype?.toLowerCase() || null;

            this.init();
        }

        init() {
            this.element.dataset.contentType = this.contentType;
            this.element.dataset.subtype = this.subtype || '';
            this.render();
        }

        render() {
            const config = this.getTypeConfig();

            this.element.className = `type-badge badge ${config.bgClass} ${config.textClass} d-inline-flex align-items-center px-2 py-1 rounded-pill small fw-semibold`;
            this.element.innerHTML = `
      <i class="${config.icon} me-1" style="font-size: 0.8rem;"></i>
      <span>${config.text}</span>
    `;

            this.element.title = config.tooltip;

            // Add Netflix-style glow effect for special types
            if (config.special) {
                this.element.style.boxShadow = `0 0 8px ${config.glowColor}`;
            }
        }

        getTypeConfig() {
            const typeConfigs = {
                'movie': {
                    text: 'MOVIE',
                    icon: 'fas fa-film',
                    bgClass: 'bg-netflix-red',
                    textClass: 'text-white',
                    tooltip: 'Feature Film',
                    glowColor: '#E50914'
                },
                'tv': {
                    text: 'SERIES',
                    icon: 'fas fa-tv',
                    bgClass: 'bg-netflix-blue',
                    textClass: 'text-white',
                    tooltip: 'TV Series',
                    glowColor: '#0071EB'
                },
                'anime': {
                    text: 'ANIME',
                    icon: 'fas fa-magic',
                    bgClass: 'bg-netflix-purple',
                    textClass: 'text-white',
                    tooltip: 'Anime Series/Movie',
                    special: true,
                    glowColor: '#8B5CF6'
                },
                'documentary': {
                    text: 'DOCUMENTARY',
                    icon: 'fas fa-camera',
                    bgClass: 'bg-netflix-green',
                    textClass: 'text-white',
                    tooltip: 'Documentary Film'
                },
                'short': {
                    text: 'SHORT',
                    icon: 'fas fa-clock',
                    bgClass: 'bg-netflix-orange',
                    textClass: 'text-white',
                    tooltip: 'Short Film'
                },
                'special': {
                    text: 'SPECIAL',
                    icon: 'fas fa-star',
                    bgClass: 'bg-netflix-gold',
                    textClass: 'text-dark',
                    tooltip: 'Special Episode/Event',
                    special: true,
                    glowColor: '#FFD700'
                }
            };

            // Handle subtypes for more specific categorization
            if (this.contentType === 'tv' && this.subtype) {
                const tvSubtypes = {
                    'miniseries': {
                        text: 'MINISERIES',
                        icon: 'fas fa-list-ol',
                        bgClass: 'bg-netflix-teal',
                        textClass: 'text-white',
                        tooltip: 'Limited Series'
                    },
                    'reality': {
                        text: 'REALITY TV',
                        icon: 'fas fa-users',
                        bgClass: 'bg-netflix-pink',
                        textClass: 'text-white',
                        tooltip: 'Reality Television'
                    },
                    'talk': {
                        text: 'TALK SHOW',
                        icon: 'fas fa-microphone',
                        bgClass: 'bg-netflix-cyan',
                        textClass: 'text-white',
                        tooltip: 'Talk Show'
                    }
                };

                if (tvSubtypes[this.subtype]) {
                    return tvSubtypes[this.subtype];
                }
            }

            if (this.contentType === 'anime' && this.subtype) {
                const animeSubtypes = {
                    'movie': {
                        text: 'ANIME MOVIE',
                        icon: 'fas fa-film',
                        bgClass: 'bg-netflix-purple',
                        textClass: 'text-white',
                        tooltip: 'Anime Feature Film',
                        special: true,
                        glowColor: '#8B5CF6'
                    },
                    'ova': {
                        text: 'OVA',
                        icon: 'fas fa-compact-disc',
                        bgClass: 'bg-netflix-indigo',
                        textClass: 'text-white',
                        tooltip: 'Original Video Animation'
                    },
                    'special': {
                        text: 'ANIME SPECIAL',
                        icon: 'fas fa-magic',
                        bgClass: 'bg-netflix-violet',
                        textClass: 'text-white',
                        tooltip: 'Anime Special Episode'
                    }
                };

                if (animeSubtypes[this.subtype]) {
                    return animeSubtypes[this.subtype];
                }
            }

            return typeConfigs[this.contentType] || {
                text: 'UNKNOWN',
                icon: 'fas fa-question',
                bgClass: 'bg-secondary',
                textClass: 'text-white',
                tooltip: 'Unknown Content Type'
            };
        }

        // Update type dynamically
        updateType(newType, newSubtype = null) {
            this.contentType = newType?.toLowerCase() || 'unknown';
            this.subtype = newSubtype?.toLowerCase() || null;
            this.render();
        }
    }

    // Auto-initialize type badges
    document.addEventListener('DOMContentLoaded', () => {
        const typeBadges = document.querySelectorAll('.type-badge[data-auto-init="true"]');
        typeBadges.forEach(badge => {
            const contentType = badge.dataset.contentType;
            const subtype = badge.dataset.subtype;
            new TypeBadge(badge, contentType, subtype);
        });
    });

    // Global function for creating type badges
    window.createTypeBadge = function (element, contentType, subtype) {
        return new TypeBadge(element, contentType, subtype);
    };
</script>

<style>
    /* Netflix Color Palette */
    .bg-netflix-red {
        background-color: #E50914 !important;
    }

    .bg-netflix-blue {
        background-color: #0071EB !important;
    }

    .bg-netflix-purple {
        background-color: #8B5CF6 !important;
    }

    .bg-netflix-green {
        background-color: #46D369 !important;
    }

    .bg-netflix-orange {
        background-color: #F59E0B !important;
    }

    .bg-netflix-gold {
        background-color: #FFD700 !important;
    }

    .bg-netflix-teal {
        background-color: #14B8A6 !important;
    }

    .bg-netflix-pink {
        background-color: #EC4899 !important;
    }

    .bg-netflix-cyan {
        background-color: #06B6D4 !important;
    }

    .bg-netflix-indigo {
        background-color: #6366F1 !important;
    }

    .bg-netflix-violet {
        background-color: #7C3AED !important;
    }

    .type-badge {
        font-size: 0.7rem;
        line-height: 1.2;
        letter-spacing: 0.5px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(4px);
        transition: all 0.3s ease;
        text-transform: uppercase;
        font-weight: 600;
    }

    .type-badge:hover {
        transform: translateY(-1px) scale(1.05);
        filter: brightness(1.1);
    }

    .type-badge.special {
        animation: pulse-glow 2s infinite;
    }

    @keyframes pulse-glow {

        0%,
        100% {
            box-shadow: 0 0 5px currentColor;
        }

        50% {
            box-shadow: 0 0 15px currentColor, 0 0 25px currentColor;
        }
    }
</style>