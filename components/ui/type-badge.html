<!-- CineBrain Content Type Badge Component -->
<span class="type-badge badge px-2 py-1 fw-semibold" 
      style="font-size: 0.75rem; border-radius: 10px; text-transform: uppercase; letter-spacing: 0.5px;">
  <i class="type-icon me-1" style="font-size: 0.7rem;"></i>
  <span class="type-text">Loading...</span>
</span>

<script>
// Type Badge Component JavaScript
(function() {
  // Content type configurations
  const TYPE_CONFIG = {
    movie: {
      icon: 'fas fa-film',
      color: 'bg-primary text-white',
      gradient: 'linear-gradient(135deg, #3b82f6, #1d4ed8)',
      label: 'Movie'
    },
    tv: {
      icon: 'fas fa-tv',
      color: 'bg-success text-white', 
      gradient: 'linear-gradient(135deg, #10b981, #059669)',
      label: 'TV Series'
    },
    anime: {
      icon: 'fas fa-dragon',
      color: 'bg-warning text-dark',
      gradient: 'linear-gradient(135deg, #f59e0b, #d97706)',
      label: 'Anime'
    },
    documentary: {
      icon: 'fas fa-file-video',
      color: 'bg-info text-white',
      gradient: 'linear-gradient(135deg, #06b6d4, #0891b2)',
      label: 'Documentary'
    },
    short: {
      icon: 'fas fa-clock',
      color: 'bg-secondary text-white',
      gradient: 'linear-gradient(135deg, #6b7280, #4b5563)',
      label: 'Short Film'
    }
  };

  // Initialize type badge with content data
  window.initTypeBadge = function(badgeElement, contentData) {
    const typeIcon = badgeElement.querySelector('.type-icon');
    const typeText = badgeElement.querySelector('.type-text');
    
    const contentType = contentData.content_type?.toLowerCase() || 'movie';
    const config = TYPE_CONFIG[contentType] || TYPE_CONFIG.movie;
    
    // Set icon
    typeIcon.className = `type-icon me-1 ${config.icon}`;
    
    // Set text
    typeText.textContent = config.label;
    
    // Set styling
    badgeElement.className = `type-badge badge px-2 py-1 fw-semibold ${config.color}`;
    badgeElement.style.background = config.gradient;
    badgeElement.style.fontSize = '0.75rem';
    badgeElement.style.borderRadius = '10px';
    badgeElement.style.textTransform = 'uppercase';
    badgeElement.style.letterSpacing = '0.5px';
    badgeElement.style.boxShadow = '0 2px 4px rgba(0, 0, 0, 0.1)';
    
    // Add tooltip
    badgeElement.title = `${config.label} Content`;
    
    // Special handling for anime
    if (contentType === 'anime') {
      typeIcon.style.color = '#ff6b6b';
      typeIcon.style.filter = 'drop-shadow(0 0 2px rgba(255, 107, 107, 0.5))';
    }
  };

  // Animate type badge on load
  window.animateTypeBadge = function(badgeElement) {
    badgeElement.style.transform = 'scale(0) rotate(-180deg)';
    badgeElement.style.opacity = '0';
    
    setTimeout(() => {
      badgeElement.style.transition = 'all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55)';
      badgeElement.style.transform = 'scale(1) rotate(0deg)';
      badgeElement.style.opacity = '1';
    }, 200);
  };

  // Fetch and display real-time type from content ID
  window.loadTypeFromAPI = async function(badgeElement, contentId) {
    try {
      const response = await fetch(`${API_ENDPOINTS.BASE_URL}${API_ENDPOINTS.CONTENT_DETAILS}/${contentId}`);
      const contentData = await response.json();
      
      if (contentData) {
        initTypeBadge(badgeElement, contentData);
        animateTypeBadge(badgeElement);
      }
    } catch (error) {
      console.error('Failed to load content type:', error);
      badgeElement.querySelector('.type-text').textContent = 'Unknown';
      badgeElement.className = 'type-badge badge px-2 py-1 fw-semibold bg-danger text-white';
    }
  };

  // Create type badge dynamically
  window.createTypeBadge = function(contentData, options = {}) {
    const badge = document.createElement('span');
    badge.className = 'type-badge badge px-2 py-1 fw-semibold';
    badge.style.fontSize = options.fontSize || '0.75rem';
    badge.style.borderRadius = '10px';
    badge.style.textTransform = 'uppercase';
    badge.style.letterSpacing = '0.5px';
    
    badge.innerHTML = `
      <i class="type-icon me-1" style="font-size: 0.7rem;"></i>
      <span class="type-text">Loading...</span>
    `;
    
    initTypeBadge(badge, contentData);
    
    if (options.animate !== false) {
      animateTypeBadge(badge);
    }
    
    return badge;
  };

  // Get type color for external use
  window.getTypeColor = function(contentType) {
    const config = TYPE_CONFIG[contentType?.toLowerCase()] || TYPE_CONFIG.movie;
    return config.color;
  };

  // Get type icon for external use
  window.getTypeIcon = function(contentType) {
    const config = TYPE_CONFIG[contentType?.toLowerCase()] || TYPE_CONFIG.movie;
    return config.icon;
  };
})();

const typeBadgeStyles = `
<style>
.type-badge {
  transition: all 0.3s ease;
  cursor: default;
  position: relative;
  overflow: hidden;
}

.type-badge:hover {
  transform: scale(1.05);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

.type-badge::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  transition: left 0.5s;
}

.type-badge:hover::before {
  left: 100%;
}

.type-icon {
  transition: all 0.3s ease;
}

.type-badge:hover .type-icon {
  transform: scale(1.1);
}

/* Specific animations for different types */
.type-badge:hover .fa-film {
  animation: filmRoll 0.6s ease-in-out;
}

.type-badge:hover .fa-tv {
  animation: tvFlicker 0.8s ease-in-out;
}

.type-badge:hover .fa-dragon {
  animation: dragonFlame 0.7s ease-in-out;
}

@keyframes filmRoll {
  0%, 100% { transform: scale(1.1) rotate(0deg); }
  50% { transform: scale(1.2) rotate(180deg); }
}

@keyframes tvFlicker {
  0%, 100% { transform: scale(1.1); opacity: 1; }
  25%, 75% { opacity: 0.7; }
  50% { transform: scale(1.2); opacity: 1; }
}

@keyframes dragonFlame {
  0%, 100% { transform: scale(1.1); filter: hue-rotate(0deg); }
  33% { transform: scale(1.15); filter: hue-rotate(60deg); }
  66% { transform: scale(1.2); filter: hue-rotate(120deg); }
}
</style>
`;

// Inject type badge styles
document.head.insertAdjacentHTML('beforeend', typeBadgeStyles);
</script>