<!-- Main TopBar Navigation -->
<nav class="navbar navbar-expand-lg navbar-cinebrain fixed-top">
    <div class="container-fluid">
        <!-- Brand Section -->
        <div class="navbar-brand-wrapper">
            <a href="/" style="text-decoration: none;">
                <div class="navbar-brand-cinebrain">CineBrain</div>
                <div class="tagline">
                    <span class="tagline-full">The Mind Behind Your Next Favorite</span>
                    <span class="tagline-medium" style="display: none;">Your Next Favorite</span>
                    <span class="tagline-short" style="display: none;">Next Favorite</span>
                </div>
            </a>
        </div>

        <!-- Desktop Search -->
        <div class="search-container desktop-search">
            <div class="input-group">
                <input type="text" class="form-control search-input border-0" id="desktopSearchInput"
                    placeholder="Search movies, shows, anime..." autocomplete="off">
                <span class="input-group-text bg-transparent border-0">
                    <i data-feather="search"></i>
                </span>
            </div>
            <div class="search-results" id="desktopSearchResults"></div>
        </div>

        <!-- Right Section: Icons -->
        <div class="nav-icons-section">
            <!-- Mobile Search Trigger -->
            <button class="icon-button mobile-search-trigger" id="mobileSearchTrigger" aria-label="Search">
                <i data-feather="search"></i>
            </button>

            <!-- Theme Toggle -->
            <button class="icon-button theme-toggle" id="themeToggle" aria-label="Toggle theme">
                <i data-feather="sun" class="theme-icon"></i>
            </button>

            <!-- Avatar/User Menu -->
            <div class="dropdown" id="avatarDropdownContainer">
                <div class="avatar-menu" id="avatarMenu" role="button">
                    <i data-feather="user"></i>
                </div>
                <ul class="dropdown-menu dropdown-menu-end dropdown-menu-cinebrain" id="userDropdown">
                    <!-- Dynamic content inserted by JavaScript -->
                </ul>
            </div>
        </div>
    </div>
</nav>

<!-- Mobile Search Overlay -->
<div class="mobile-search-overlay" id="mobileSearchOverlay">
    <div class="container">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h4 class="mb-0">Search</h4>
            <button class="btn btn-link p-0" id="closeMobileSearch" aria-label="Close search">
                <i data-feather="x" style="width: 28px; height: 28px;"></i>
            </button>
        </div>
        <div class="search-container" style="display: block; margin: 0; max-width: 100%;">
            <input type="text" class="form-control form-control-lg search-input" id="mobileSearchInput"
                placeholder="Search movies, shows, anime..." autocomplete="off">
            <div class="search-results mt-3" id="mobileSearchResults"></div>
        </div>
    </div>
</div>