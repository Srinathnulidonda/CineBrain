<!-- CineBrain Mini Content Card - Compact Variant -->
<div class="card-mini d-flex bg-dark border-secondary rounded overflow-hidden position-relative" 
     style="height: 120px; cursor: pointer; transition: all 0.3s ease; border-radius: 8px !important;"
     onmouseover="hoverMiniCard(this, true)" 
     onmouseout="hoverMiniCard(this, false)"
     onclick="openContentDetails(this.dataset.contentId)">
  
  <!-- Mini Poster -->
  <div class="mini-poster-container position-relative" style="width: 80px; min-width: 80px;">
    <img class="mini-poster w-100 h-100" 
         style="object-fit: cover; transition: transform 0.3s ease;" 
         alt="Content Poster"
         loading="lazy">
    
    <!-- Play Overlay -->
    <div class="mini-overlay position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center" 
         style="background: rgba(59,130,246,0.8); opacity: 0; transition: opacity 0.3s ease;">
      <i class="fas fa-play text-white"></i>
    </div>
  </div>

  <!-- Content Info -->
  <div class="flex-grow-1 p-2 d-flex flex-column justify-content-between">
    <!-- Title & Type -->
    <div>
      <h6 class="mini-title text-white fw-semibold mb-1" 
          style="font-size: 0.9rem; line-height: 1.2; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;">
      </h6>
      
      <div class="d-flex align-items-center gap-2 mb-1">
        <span class="mini-type-badge badge bg-primary text-white" style="font-size: 0.65rem; padding: 2px 6px;">
        </span>
        <span class="mini-rating-badge badge bg-warning text-dark d-flex align-items-center gap-1" 
              style="font-size: 0.65rem; padding: 2px 6px;">
          <i class="fas fa-star" style="font-size: 0.6rem;"></i>
          <span class="mini-rating-value">N/A</span>
        </span>
      </div>
    </div>

    <!-- Genres & Actions -->
    <div>
      <div class="mini-genres mb-1" style="font-size: 0.7rem;">
        <!-- Mini genre chips -->
      </div>
      
      <div class="d-flex gap-1">
        <button class="btn btn-primary btn-sm mini-watchlist-btn" 
                style="font-size: 0.7rem; padding: 2px 8px;"
                onclick="event.stopPropagation(); toggleWatchlist(this.closest('.card-mini').dataset.contentId, this)">
          <i class="fas fa-bookmark" style="font-size: 0.7rem;"></i>
        </button>
        <button class="btn btn-outline-danger btn-sm mini-favorite-btn" 
                style="font-size: 0.7rem; padding: 2px 8px; width: 28px;"
                onclick="event.stopPropagation(); toggleFavorite(this.closest('.card-mini').dataset.contentId, this)">
          <i class="fas fa-heart" style="font-size: 0.7rem;"></i>
        </button>
      </div>
    </div>
  </div>
</div>

<script>
// Mini Card Component JavaScript
(function() {
  // Mini card hover effects
  window.hoverMiniCard = function(card, isHover) {
    const poster = card.querySelector('.mini-poster');
    const overlay = card.querySelector('.mini-overlay');
    
    if (isHover) {
      card.style.transform = 'translateX(4px) scale(1.02)';
      card.style.boxShadow = '0 8px 25px rgba(59, 130, 246, 0.25)';
      poster.style.transform = 'scale(1.1)';
      overlay.style.opacity = '1';
    } else {
      card.style.transform = 'translateX(0) scale(1)';
      card.style.boxShadow = '0 2px 8px rgba(0, 0, 0, 0.2)';
      poster.style.transform = 'scale(1)';
      overlay.style.opacity = '0';
    }
  };

  // Populate mini card with content data
  window.populateMiniCard = function(cardElement, contentData) {
    // Set data attributes
    cardElement.dataset.contentId = contentData.id;
    
    // Populate poster
    const poster = cardElement.querySelector('.mini-poster');
    poster.src = contentData.poster_path || '/assets/no-poster.jpg';
    poster.alt = contentData.title;
    poster.onerror = function() { this.src = '/assets/no-poster.jpg'; };
    
    // Populate title
    const title = cardElement.querySelector('.mini-title');
    title.textContent = contentData.title;
    
    // Populate content type badge
    const typeBadge = cardElement.querySelector('.mini-type-badge');
    typeBadge.textContent = contentData.content_type.toUpperCase();
    
    // Populate rating
    const ratingValue = cardElement.querySelector('.mini-rating-value');
    const ratingBadge = cardElement.querySelector('.mini-rating-badge');
    if (contentData.rating) {
      ratingValue.textContent = parseFloat(contentData.rating).toFixed(1);
      
      // Color code rating
      const rating = parseFloat(contentData.rating);
      if (rating >= 8) {
        ratingBadge.className = 'mini-rating-badge badge bg-success text-white d-flex align-items-center gap-1';
      } else if (rating >= 6) {
        ratingBadge.className = 'mini-rating-badge badge bg-warning text-dark d-flex align-items-center gap-1';
      } else {
        ratingBadge.className = 'mini-rating-badge badge bg-danger text-white d-flex align-items-center gap-1';
      }
    } else {
      ratingValue.textContent = 'N/A';
    }
    
    // Populate genres
    const genresContainer = cardElement.querySelector('.mini-genres');
    if (contentData.genres && contentData.genres.length > 0) {
      const genreText = contentData.genres.slice(0, 2).join(' â€¢ ');
      genresContainer.innerHTML = `<span class="text-muted">${genreText}</span>`;
    }
  };

  // Create mini card from template
  window.createMiniCard = function(contentData) {
    const template = document.querySelector('.card-mini').cloneNode(true);
    populateMiniCard(template, contentData);
    return template;
  };
})();

const miniCardStyles = `
<style>
.card-mini {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  border: 1px solid rgba(75, 85, 99, 0.3);
}

.card-mini:hover {
  border-color: rgba(59, 130, 246, 0.5);
  z-index: 5;
}

.mini-poster {
  transition: transform 0.3s ease;
}

.mini-overlay {
  transition: opacity 0.3s ease;
}

.mini-watchlist-btn,
.mini-favorite-btn {
  transition: all 0.2s ease;
}

.mini-watchlist-btn:active,
.mini-favorite-btn:active {
  transform: scale(0.9);
}

/* Responsive adjustments */
@media (max-width: 576px) {
  .card-mini {
    height: 100px;
  }
  
  .mini-poster-container {
    width: 70px !important;
    min-width: 70px !important;
  }
  
  .mini-title {
    font-size: 0.8rem !important;
  }
}
</style>
`;

// Inject mini card styles
document.head.insertAdjacentHTML('beforeend', miniCardStyles);
</script>