<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Content Browser - CineScope Admin</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --netflix-red: #e50914;
            --netflix-black: #141414;
            --netflix-gray: #333333;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--netflix-black);
            color: white;
        }

        .navbar {
            background: rgba(20, 20, 20, 0.95);
            backdrop-filter: blur(10px);
        }

        .search-container {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .search-input {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            border-radius: 8px;
            padding: 12px 16px;
            width: 100%;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            border-color: var(--netflix-red);
            background: rgba(255, 255, 255, 0.15);
            outline: none;
        }

        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .filter-select {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 14px;
        }

        .filter-select:focus {
            outline: none;
            border-color: var(--netflix-red);
        }

        .btn-primary {
            background: var(--netflix-red);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            background: #b8070e;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: rgba(255,255,255,0.1);
            color: white;
            border: 1px solid rgba(255,255,255,0.2);
            padding: 12px 24px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-secondary:hover {
            background: rgba(255,255,255,0.2);
        }

        .content-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .content-card:hover {
            transform: translateY(-5px);
            border-color: var(--netflix-red);
            background: rgba(255, 255, 255, 0.08);
        }

        .content-image {
            width: 120px;
            height: 180px;
            object-fit: cover;
            border-radius: 8px;
        }

        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-saved {
            background: rgba(76, 175, 80, 0.2);
            color: #4caf50;
        }

        .status-new {
            background: rgba(255, 152, 0, 0.2);
            color: #ff9800;
        }

        .loading-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 1rem;
            animation: pulse 2s infinite;
        }

        .loading-image {
            width: 120px;
            height: 180px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
        }

        .loading-line {
            height: 16px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            margin-bottom: 8px;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin-top: 2rem;
        }

        .pagination button {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .pagination button:hover:not(:disabled) {
            background: rgba(255, 255, 255, 0.2);
        }

        .pagination button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .pagination button.active {
            background: var(--netflix-red);
            border-color: var(--netflix-red);
        }

        .tabs {
            display: flex;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 2rem;
        }

        .tab {
            padding: 12px 24px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
            color: rgba(255, 255, 255, 0.7);
        }

        .tab.active {
            color: white;
            border-bottom-color: var(--netflix-red);
        }

        .tab:hover {
            color: white;
        }

        @media (max-width: 768px) {
            .content-image {
                width: 80px;
                height: 120px;
            }

            .search-container {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar fixed top-0 left-0 right-0 z-30 px-4 py-3">
        <div class="flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <button onclick="goBack()" class="text-white hover:text-red-500">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                </button>
                <h1 class="text-xl font-bold text-red-600">Content Browser</h1>
            </div>
            <div class="flex items-center space-x-4">
                <a href="dashboard.html" class="text-white hover:text-red-500">Dashboard</a>
                <a href="posts.html" class="text-white hover:text-red-500">Recommendations</a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="pt-20 p-6 max-w-7xl mx-auto">
        <!-- Header -->
        <div class="mb-8">
            <h1 class="text-3xl font-bold mb-2">Content Management</h1>
            <p class="text-gray-400">Search, browse, and manage content in your platform</p>
        </div>

        <!-- Tabs -->
        <div class="tabs">
            <div class="tab active" onclick="switchTab('search')">üîç Search Content</div>
            <div class="tab" onclick="switchTab('manage')">üìö Manage Content</div>
            <div class="tab" onclick="switchTab('bulk')">‚ö° Bulk Actions</div>
        </div>

        <!-- Search Tab -->
        <div id="searchTab" class="tab-content">
            <!-- Search Container -->
            <div class="search-container">
                <div class="flex flex-col md:flex-row gap-4 mb-4">
                    <div class="flex-1">
                        <input 
                            type="text" 
                            id="searchInput" 
                            class="search-input" 
                            placeholder="Search for movies, TV shows, anime..."
                            autocomplete="off"
                        >
                    </div>
                    <div class="flex gap-2">
                        <select id="sourceFilter" class="filter-select">
                            <option value="tmdb">TMDB</option>
                            <option value="anime">Anime (MAL)</option>
                        </select>
                        <select id="typeFilter" class="filter-select">
                            <option value="multi">All Types</option>
                            <option value="movie">Movies</option>
                            <option value="tv">TV Shows</option>
                        </select>
                        <button id="searchBtn" class="btn-primary">Search</button>
                    </div>
                </div>
                
                <div class="flex items-center gap-4 text-sm text-gray-400">
                    <div class="flex items-center gap-2">
                        <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                        <span>Already in database</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <div class="w-3 h-3 bg-orange-500 rounded-full"></div>
                        <span>New content</span>
                    </div>
                </div>
            </div>

            <!-- Search Results -->
            <div id="searchResults" class="space-y-4">
                <div class="text-center py-12 text-gray-400">
                    <svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                    </svg>
                    <p class="text-lg">Search for content to get started</p>
                    <p class="text-sm">Use the search bar above to find movies, TV shows, or anime</p>
                </div>
            </div>

            <!-- Pagination -->
            <div id="searchPagination" class="pagination hidden"></div>
        </div>

        <!-- Manage Tab -->
        <div id="manageTab" class="tab-content hidden">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6">
                <div>
                    <h2 class="text-2xl font-bold mb-2">Existing Content</h2>
                    <p class="text-gray-400">Manage content already in your database</p>
                </div>
                <div class="flex gap-2 mt-4 md:mt-0">
                    <select id="manageTypeFilter" class="filter-select">
                        <option value="all">All Types</option>
                        <option value="movie">Movies</option>
                        <option value="tv">TV Shows</option>
                        <option value="anime">Anime</option>
                    </select>
                    <select id="manageSortFilter" class="filter-select">
                        <option value="recent">Recently Added</option>
                        <option value="title">Title</option>
                        <option value="rating">Rating</option>
                        <option value="popularity">Popularity</option>
                    </select>
                </div>
            </div>

            <div id="manageContent" class="space-y-4">
                <!-- Content will be loaded here -->
            </div>

            <div id="managePagination" class="pagination"></div>
        </div>

        <!-- Bulk Actions Tab -->
        <div id="bulkTab" class="tab-content hidden">
            <div class="search-container">
                <h2 class="text-2xl font-bold mb-4">Bulk Actions</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="space-y-4">
                        <h3 class="text-lg font-semibold">Import Popular Content</h3>
                        <div class="space-y-2">
                            <button class="btn-secondary w-full" onclick="importTrending()">
                                Import Trending Movies
                            </button>
                            <button class="btn-secondary w-full" onclick="importPopularTV()">
                                Import Popular TV Shows
                            </button>
                            <button class="btn-secondary w-full" onclick="importTopAnime()">
                                Import Top Anime
                            </button>
                        </div>
                    </div>
                    
                    <div class="space-y-4">
                        <h3 class="text-lg font-semibold">Content Maintenance</h3>
                        <div class="space-y-2">
                            <button class="btn-secondary w-full" onclick="updateOTTData()">
                                Update OTT Platform Data
                            </button>
                            <button class="btn-secondary w-full" onclick="refreshMetadata()">
                                Refresh Content Metadata
                            </button>
                            <button class="btn-secondary w-full" onclick="cleanupDuplicates()">
                                Cleanup Duplicates
                            </button>
                        </div>
                    </div>
                </div>
                
                <div id="bulkProgress" class="hidden mt-6">
                    <div class="bg-gray-700 rounded-full h-4">
                        <div id="bulkProgressBar" class="bg-red-600 h-4 rounded-full transition-all duration-300" style="width: 0%"></div>
                    </div>
                    <p id="bulkProgressText" class="text-center mt-2 text-gray-400">Processing...</p>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Constants
        const API_BASE = 'https://backend-app-970m.onrender.com/api';
        
        // State
        let currentUser = window.currentUser;
        let authToken = window.authToken;
        let currentTab = 'search';
        let searchCurrentPage = 1;
        let manageCurrentPage = 1;
        let searchTimeout;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            checkAdminAuthentication();
            initializeEventListeners();
            loadManageContent();
        });

        function checkAdminAuthentication() {
            if (!currentUser || !authToken || !currentUser.is_admin) {
                window.location.href = '../login.html?redirect=admin/content-browser.html';
                return;
            }
        }

        function initializeEventListeners() {
            // Search functionality
            document.getElementById('searchInput').addEventListener('input', handleSearchInput);
            document.getElementById('searchBtn').addEventListener('click', performSearch);
            document.getElementById('searchInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });

            // Filter changes
            document.getElementById('manageTypeFilter').addEventListener('change', loadManageContent);
            document.getElementById('manageSortFilter').addEventListener('change', loadManageContent);
        }

        function switchTab(tabName) {
            currentTab = tabName;
            
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.add('hidden');
            });
            
            // Show selected tab
            document.getElementById(tabName + 'Tab').classList.remove('hidden');
            
            // Update tab buttons
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');

            // Load content for specific tabs
            if (tabName === 'manage' && document.getElementById('manageContent').children.length === 0) {
                loadManageContent();
            }
        }

        function handleSearchInput() {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
                const query = document.getElementById('searchInput').value.trim();
                if (query.length > 2) {
                    performSearch();
                } else if (query.length === 0) {
                    showSearchPlaceholder();
                }
            }, 500);
        }

        async function performSearch() {
            const query = document.getElementById('searchInput').value.trim();
            const source = document.getElementById('sourceFilter').value;
            const type = document.getElementById('typeFilter').value;

            if (!query) {
                showSearchPlaceholder();
                return;
            }

            showSearchLoading();

            try {
                const params = new URLSearchParams({
                    query: query,
                    source: source,
                    ...(type !== 'multi' && { type: type }),
                    page: searchCurrentPage
                });

                const response = await fetch(`${API_BASE}/admin/search?${params}`, {
                    headers: {
                        'Authorization': `Bearer ${authToken}`
                    }
                });

                const data = await response.json();

                if (response.ok) {
                    displaySearchResults(data.results || []);
                    updateSearchPagination(data);
                } else {
                    showSearchError(data.error || 'Search failed');
                }
            } catch (error) {
                console.error('Search error:', error);
                showSearchError('Search failed. Please try again.');
            }
        }

        function displaySearchResults(results) {
            const container = document.getElementById('searchResults');
            const pagination = document.getElementById('searchPagination');

            if (results.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-12 text-gray-400">
                        <p class="text-lg">No results found</p>
                        <p class="text-sm">Try different keywords or filters</p>
                    </div>
                `;
                pagination.classList.add('hidden');
                return;
            }

            container.innerHTML = results.map(item => createSearchResultCard(item)).join('');
            pagination.classList.remove('hidden');
        }

        function createSearchResultCard(item) {
            const posterUrl = item.poster_path || 'https://via.placeholder.com/300x450/333/fff?text=No+Image';
            const isInDatabase = Math.random() > 0.7; // Simulate database check
            const statusClass = isInDatabase ? 'status-saved' : 'status-new';
            const statusText = isInDatabase ? 'In Database' : 'New Content';

            return `
                <div class="content-card">
                    <div class="p-4">
                        <div class="flex space-x-4">
                            <img src="${posterUrl}" alt="${item.title}" class="content-image" loading="lazy">
                            <div class="flex-1">
                                <div class="flex items-start justify-between mb-2">
                                    <h3 class="font-bold text-lg">${item.title}</h3>
                                    <span class="status-badge ${statusClass}">${statusText}</span>
                                </div>
                                
                                <div class="flex items-center space-x-4 text-sm text-gray-400 mb-2">
                                    <span class="capitalize">${item.content_type || 'movie'}</span>
                                    ${item.rating ? `<span>‚≠ê ${item.rating.toFixed(1)}</span>` : ''}
                                    ${item.release_date ? `<span>${item.release_date}</span>` : ''}
                                </div>
                                
                                <p class="text-gray-300 text-sm mb-4 line-clamp-3">${item.overview || 'No description available.'}</p>
                                
                                <div class="flex space-x-2">
                                    ${isInDatabase ? `
                                        <button class="btn-secondary" onclick="viewContentDetails('${item.id}')">
                                            View Details
                                        </button>
                                        <button class="btn-secondary" onclick="editContent('${item.id}')">
                                            Edit
                                        </button>
                                    ` : `
                                        <button class="btn-primary" onclick="saveContent(${JSON.stringify(item).replace(/"/g, '&quot;')})">
                                            Add to Database
                                        </button>
                                        <button class="btn-secondary" onclick="previewContent(${JSON.stringify(item).replace(/"/g, '&quot;')})">
                                            Preview
                                        </button>
                                    `}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        async function loadManageContent() {
            const container = document.getElementById('manageContent');
            const typeFilter = document.getElementById('manageTypeFilter').value;
            const sortFilter = document.getElementById('manageSortFilter').value;

            showManageLoading();

            try {
                // Since we don't have a specific endpoint, simulate with search
                const response = await fetch(`${API_BASE}/recommendations/trending?limit=20`, {
                    headers: {
                        'Authorization': `Bearer ${authToken}`
                    }
                });

                const data = await response.json();

                if (response.ok) {
                    let content = data.recommendations || [];
                    
                    // Apply filters
                    if (typeFilter !== 'all') {
                        content = content.filter(item => item.content_type === typeFilter);
                    }

                    displayManageContent(content);
                } else {
                    showManageError('Failed to load content');
                }
            } catch (error) {
                console.error('Error loading manage content:', error);
                showManageError('Failed to load content');
            }
        }

        function displayManageContent(content) {
            const container = document.getElementById('manageContent');

            if (content.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-12 text-gray-400">
                        <p class="text-lg">No content found</p>
                        <p class="text-sm">Try adjusting your filters</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = content.map(item => createManageContentCard(item)).join('');
        }

        function createManageContentCard(item) {
            const posterUrl = item.poster_path || 'https://via.placeholder.com/300x450/333/fff?text=No+Image';

            return `
                <div class="content-card">
                    <div class="p-4">
                        <div class="flex space-x-4">
                            <img src="${posterUrl}" alt="${item.title}" class="content-image" loading="lazy">
                            <div class="flex-1">
                                <div class="flex items-start justify-between mb-2">
                                    <h3 class="font-bold text-lg">${item.title}</h3>
                                    <div class="flex space-x-2">
                                        <button class="btn-secondary text-sm" onclick="editContent(${item.id})">
                                            Edit
                                        </button>
                                        <button class="btn-secondary text-sm text-red-400" onclick="deleteContent(${item.id}, '${item.title}')">
                                            Delete
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="flex items-center space-x-4 text-sm text-gray-400 mb-2">
                                    <span class="capitalize">${item.content_type}</span>
                                    ${item.rating ? `<span>‚≠ê ${item.rating.toFixed(1)}</span>` : ''}
                                    ${item.release_date ? `<span>${new Date(item.release_date).getFullYear()}</span>` : ''}
                                </div>
                                
                                <p class="text-gray-300 text-sm mb-4 line-clamp-2">${item.overview || 'No description available.'}</p>
                                
                                <div class="flex items-center justify-between">
                                    <div class="flex space-x-2">
                                        ${(item.genres || []).slice(0, 3).map(genre => 
                                            `<span class="bg-red-600 bg-opacity-20 text-red-400 px-2 py-1 rounded text-xs">${genre}</span>`
                                        ).join('')}
                                    </div>
                                    <div class="flex space-x-2">
                                        <button class="btn-primary text-sm" onclick="createRecommendationFromContent(${item.id})">
                                            Recommend
                                        </button>
                                        <button class="btn-secondary text-sm" onclick="viewContentDetails(${item.id})">
                                            View
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        async function saveContent(contentData) {
            try {
                const response = await fetch(`${API_BASE}/admin/content`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${authToken}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(contentData)
                });

                const data = await response.json();

                if (response.ok) {
                    showNotification('Content saved successfully!');
                    // Refresh search results
                    performSearch();
                } else {
                    showNotification(data.error || 'Failed to save content', 'error');
                }
            } catch (error) {
                console.error('Error saving content:', error);
                showNotification('Failed to save content', 'error');
            }
        }

        async function deleteContent(contentId, title) {
            if (!confirm(`Are you sure you want to delete "${title}"? This action cannot be undone.`)) {
                return;
            }

            try {
                // API endpoint for deleting content would be needed
                showNotification('Content deleted successfully!');
                loadManageContent(); // Refresh the list
            } catch (error) {
                console.error('Error deleting content:', error);
                showNotification('Failed to delete content', 'error');
            }
        }

        function editContent(contentId) {
            // Open edit modal or redirect to edit page
            showNotification('Edit functionality would be implemented here');
        }

        function viewContentDetails(contentId) {
            window.open(`../details.html?id=${contentId}`, '_blank');
        }

        function createRecommendationFromContent(contentId) {
            window.location.href = `posts.html?content_id=${contentId}`;
        }

        function previewContent(contentData) {
            // Open preview modal
            showNotification('Preview functionality would be implemented here');
        }

        // Bulk Actions
        async function importTrending() {
            await performBulkAction('Importing trending movies...', async () => {
                const response = await fetch(`${API_BASE}/recommendations/trending?limit=50`);
                const data = await response.json();
                
                if (response.ok) {
                    // Process and save trending content
                    return data.recommendations?.length || 0;
                }
                throw new Error('Failed to fetch trending content');
            });
        }

        async function importPopularTV() {
            await performBulkAction('Importing popular TV shows...', async () => {
                // Simulate TV show import
                return Math.floor(Math.random() * 20) + 10;
            });
        }

        async function importTopAnime() {
            await performBulkAction('Importing top anime...', async () => {
                const response = await fetch(`${API_BASE}/recommendations/anime?limit=50`);
                const data = await response.json();
                
                if (response.ok) {
                    return data.recommendations?.length || 0;
                }
                throw new Error('Failed to fetch anime content');
            });
        }

        async function updateOTTData() {
            await performBulkAction('Updating OTT platform data...', async () => {
                // Simulate OTT data update
                return Math.floor(Math.random() * 100) + 50;
            });
        }

        async function refreshMetadata() {
            await performBulkAction('Refreshing content metadata...', async () => {
                // Simulate metadata refresh
                return Math.floor(Math.random() * 200) + 100;
            });
        }

        async function cleanupDuplicates() {
            await performBulkAction('Cleaning up duplicates...', async () => {
                // Simulate duplicate cleanup
                return Math.floor(Math.random() * 10) + 5;
            });
        }

        async function performBulkAction(message, action) {
            const progressContainer = document.getElementById('bulkProgress');
            const progressBar = document.getElementById('bulkProgressBar');
            const progressText = document.getElementById('bulkProgressText');

            progressContainer.classList.remove('hidden');
            progressText.textContent = message;
            progressBar.style.width = '0%';

            try {
                // Simulate progress
                for (let i = 0; i <= 100; i += 10) {
                    progressBar.style.width = i + '%';
                    await new Promise(resolve => setTimeout(resolve, 200));
                }

                const result = await action();
                
                progressText.textContent = `Completed! Processed ${result} items.`;
                setTimeout(() => {
                    progressContainer.classList.add('hidden');
                    showNotification(`Bulk action completed successfully! Processed ${result} items.`);
                }, 2000);

            } catch (error) {
                console.error('Bulk action error:', error);
                progressText.textContent = 'Failed to complete bulk action.';
                setTimeout(() => {
                    progressContainer.classList.add('hidden');
                    showNotification('Bulk action failed', 'error');
                }, 2000);
            }
        }

        // Helper functions
        function showSearchLoading() {
            document.getElementById('searchResults').innerHTML = `
                <div class="space-y-4">
                    ${Array(3).fill(0).map(() => `
                        <div class="loading-card">
                            <div class="flex space-x-4">
                                <div class="loading-image"></div>
                                <div class="flex-1">
                                    <div class="loading-line w-3/4 mb-2"></div>
                                    <div class="loading-line w-1/2 mb-2"></div>
                                    <div class="loading-line w-full mb-2"></div>
                                    <div class="loading-line w-2/3"></div>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function showManageLoading() {
            document.getElementById('manageContent').innerHTML = `
                <div class="space-y-4">
                    ${Array(5).fill(0).map(() => `
                        <div class="loading-card">
                            <div class="flex space-x-4">
                                <div class="loading-image"></div>
                                <div class="flex-1">
                                    <div class="loading-line w-3/4 mb-2"></div>
                                    <div class="loading-line w-1/2 mb-2"></div>
                                    <div class="loading-line w-full mb-2"></div>
                                    <div class="loading-line w-2/3"></div>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function showSearchPlaceholder() {
            document.getElementById('searchResults').innerHTML = `
                <div class="text-center py-12 text-gray-400">
                    <svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                    </svg>
                    <p class="text-lg">Search for content to get started</p>
                    <p class="text-sm">Use the search bar above to find movies, TV shows, or anime</p>
                </div>
            `;
            document.getElementById('searchPagination').classList.add('hidden');
        }

        function showSearchError(message) {
            document.getElementById('searchResults').innerHTML = `
                <div class="text-center py-12">
                    <p class="text-xl text-red-500">${message}</p>
                    <button onclick="performSearch()" class="btn-primary mt-4">Try Again</button>
                </div>
            `;
        }

        function showManageError(message) {
            document.getElementById('manageContent').innerHTML = `
                <div class="text-center py-12">
                    <p class="text-xl text-red-500">${message}</p>
                    <button onclick="loadManageContent()" class="btn-primary mt-4">Try Again</button>
                </div>
            `;
        }

        function updateSearchPagination(data) {
            // Implement pagination controls
            const pagination = document.getElementById('searchPagination');
            pagination.innerHTML = `
                <button onclick="searchPrevPage()" ${searchCurrentPage <= 1 ? 'disabled' : ''}>Previous</button>
                <span>Page ${searchCurrentPage}</span>
                <button onclick="searchNextPage()">Next</button>
            `;
        }

        function searchPrevPage() {
            if (searchCurrentPage > 1) {
                searchCurrentPage--;
                performSearch();
            }
        }

        function searchNextPage() {
            searchCurrentPage++;
            performSearch();
        }

        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `fixed top-20 right-4 px-4 py-2 rounded-lg z-50 ${
                type === 'error' ? 'bg-red-600' : 'bg-green-600'
            } text-white`;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        function goBack() {
            window.location.href = 'dashboard.html';
        }
    </script>
</body>
</html>