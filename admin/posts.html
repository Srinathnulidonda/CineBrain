<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Posts & Recommendations - Admin - CineScope</title>

    <!-- CSS Files -->
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/components.css">
    <link rel="stylesheet" href="/css/responsive.css">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap"
        rel="stylesheet">
</head>

<body>
    <!-- Admin Header -->
    <header class="header bg-bg-secondary">
        <nav class="container">
            <div class="nav">
                <div class="nav-brand">
                    <a href="/admin/dashboard">CineScope Admin</a>
                </div>

                <ul class="nav-menu">
                    <li><a href="/admin/dashboard" class="nav-link">Dashboard</a></li>
                    <li><a href="/admin/content-browser" class="nav-link">Content</a></li>
                    <li><a href="/admin/posts" class="nav-link active">Posts</a></li>
                    <li><a href="/admin/analytics" class="nav-link">Analytics</a></li>
                    <li><a href="/" class="nav-link">View Site</a></li>
                </ul>

                <div class="nav-actions">
                    <button onclick="PostsManager.createNewPost()" class="btn btn-primary">
                        ‚úçÔ∏è New Post
                    </button>
                    <div id="user-menu" class="dropdown">
                        <button class="btn btn-secondary">Admin</button>
                        <div class="dropdown-menu">
                            <button onclick="AuthManager.logout()" class="dropdown-item">Logout</button>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main style="padding-top: 80px;">
        <div class="container py-8">
            <!-- Page Header -->
            <section class="mb-8">
                <h1 class="text-3xl font-bold mb-2">Posts & Recommendations</h1>
                <p class="text-secondary">Create and manage editorial content</p>
            </section>

            <!-- Post Types -->
            <section class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="card interactive p-6 text-center" onclick="PostsManager.filterByType('review')">
                    <div class="text-3xl mb-2">üìù</div>
                    <h3 class="font-semibold">Reviews</h3>
                    <p class="text-sm text-secondary">In-depth analysis</p>
                </div>
                <div class="card interactive p-6 text-center" onclick="PostsManager.filterByType('list')">
                    <div class="text-3xl mb-2">üìã</div>
                    <h3 class="font-semibold">Lists</h3>
                    <p class="text-sm text-secondary">Curated collections</p>
                </div>
                <div class="card interactive p-6 text-center" onclick="PostsManager.filterByType('article')">
                    <div class="text-3xl mb-2">üì∞</div>
                    <h3 class="font-semibold">Articles</h3>
                    <p class="text-sm text-secondary">News & features</p>
                </div>
                <div class="card interactive p-6 text-center" onclick="PostsManager.filterByType('recommendation')">
                    <div class="text-3xl mb-2">‚≠ê</div>
                    <h3 class="font-semibold">Recommendations</h3>
                    <p class="text-sm text-secondary">Admin picks</p>
                </div>
            </section>

            <!-- Quick Stats -->
            <section class="grid grid-cols-1 md:grid-cols-5 gap-4 mb-8">
                <div class="card p-4 text-center">
                    <div class="text-xl font-bold text-primary-blue" id="total-posts">0</div>
                    <div class="text-sm text-muted">Total Posts</div>
                </div>
                <div class="card p-4 text-center">
                    <div class="text-xl font-bold text-success" id="published-posts">0</div>
                    <div class="text-sm text-muted">Published</div>
                </div>
                <div class="card p-4 text-center">
                    <div class="text-xl font-bold text-warning" id="draft-posts">0</div>
                    <div class="text-sm text-muted">Drafts</div>
                </div>
                <div class="card p-4 text-center">
                    <div class="text-xl font-bold text-primary-purple" id="scheduled-posts">0</div>
                    <div class="text-sm text-muted">Scheduled</div>
                </div>
                <div class="card p-4 text-center">
                    <div class="text-xl font-bold text-accent-blue" id="telegram-sent">0</div>
                    <div class="text-sm text-muted">Telegram</div>
                </div>
            </section>

            <!-- Posts List -->
            <section class="card p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="font-semibold text-xl">All Posts</h3>
                    <div class="flex gap-4">
                        <select id="post-status-filter" class="form-input w-auto">
                            <option value="all">All Status</option>
                            <option value="published">Published</option>
                            <option value="draft">Draft</option>
                            <option value="scheduled">Scheduled</option>
                        </select>
                        <input type="text" id="post-search" class="form-input w-64" placeholder="Search posts...">
                    </div>
                </div>

                <div class="space-y-4" id="posts-list">
                    <!-- Posts will be populated here -->
                </div>

                <!-- Load More -->
                <div class="text-center mt-6">
                    <button id="load-more-posts" class="btn btn-secondary" style="display: none;">
                        Load More Posts
                    </button>
                </div>
            </section>
        </div>
    </main>

    <!-- Create/Edit Post Modal -->
    <div id="post-modal" class="modal-overlay">
        <div class="modal" style="max-width: 900px; max-height: 90vh;">
            <div class="modal-header">
                <h3 id="post-modal-title">Create New Post</h3>
                <button class="modal-close" onclick="UIComponents.closeModal('post-modal')">√ó</button>
            </div>
            <div class="modal-body" style="overflow-y: auto;">
                <form id="post-form" class="space-y-6">
                    <div class="form-group">
                        <label class="form-label">Post Title</label>
                        <input type="text" id="post-title" class="form-input" placeholder="Enter a compelling title..."
                            required>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="form-group">
                            <label class="form-label">Post Type</label>
                            <select id="post-type" class="form-input" required>
                                <option value="review">Review</option>
                                <option value="list">List</option>
                                <option value="article">Article</option>
                                <option value="recommendation">Recommendation</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Status</label>
                            <select id="post-status" class="form-input">
                                <option value="draft">Draft</option>
                                <option value="published">Published</option>
                                <option value="scheduled">Scheduled</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group" id="content-selector" style="display: none;">
                        <label class="form-label">Select Content</label>
                        <input type="text" id="content-search" class="form-input"
                            placeholder="Search for movie, TV show, or anime...">
                        <div id="content-search-results" class="mt-2"></div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Post Content</label>
                        <div class="border border-white/10 rounded-lg p-2">
                            <div class="flex gap-2 mb-2 p-2 border-b border-white/10">
                                <button type="button" onclick="PostsManager.formatText('bold')"
                                    class="btn btn-ghost btn-sm">B</button>
                                <button type="button" onclick="PostsManager.formatText('italic')"
                                    class="btn btn-ghost btn-sm">I</button>
                                <button type="button" onclick="PostsManager.formatText('heading')"
                                    class="btn btn-ghost btn-sm">H</button>
                                <button type="button" onclick="PostsManager.formatText('link')"
                                    class="btn btn-ghost btn-sm">üîó</button>
                                <button type="button" onclick="PostsManager.formatText('list')"
                                    class="btn btn-ghost btn-sm">‚ò∞</button>
                            </div>
                            <textarea id="post-content" class="form-input border-0" rows="10"
                                placeholder="Write your post content here..." required></textarea>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Featured Image URL</label>
                        <input type="url" id="post-image" class="form-input"
                            placeholder="https://example.com/image.jpg">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Tags (comma separated)</label>
                        <input type="text" id="post-tags" class="form-input" placeholder="action, thriller, 2024">
                    </div>

                    <div class="flex items-center gap-4">
                        <label class="flex items-center gap-2">
                            <input type="checkbox" id="send-to-telegram" checked>
                            <span>Send to Telegram channel</span>
                        </label>

                        <label class="flex items-center gap-2">
                            <input type="checkbox" id="pin-to-homepage">
                            <span>Pin to homepage</span>
                        </label>
                    </div>

                    <div class="form-group" id="schedule-section" style="display: none;">
                        <label class="form-label">Schedule Date & Time</label>
                        <input type="datetime-local" id="schedule-datetime" class="form-input">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button onclick="PostsManager.saveDraft()" class="btn btn-ghost">
                    Save as Draft
                </button>
                <button onclick="UIComponents.closeModal('post-modal')" class="btn btn-secondary">
                    Cancel
                </button>
                <button onclick="PostsManager.publishPost()" class="btn btn-primary">
                    Publish Post
                </button>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="/js/main.js"></script>
    <script src="/js/admin-posts.js"></script>
</body>

</html>