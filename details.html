<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Content Details - CineScope</title>
    
    <!-- Preload critical resources -->
    <link rel="preload" href="css/main.css" as="style">
    <link rel="preload" href="js/main.js" as="script">
    
    <!-- Stylesheets -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet">
    <link href="css/components.css" rel="stylesheet">
    <link href="css/responsive.css" rel="stylesheet">
</head>
<body class="bg-dark text-light">
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-container">
            <div class="loading-logo">
                <i class="fas fa-film"></i>
                <span>CineScope</span>
            </div>
            <div class="loading-spinner"></div>
            <div class="loading-text">Loading content details...</div>
        </div>
    </div>

    <!-- Header -->
    <div id="headerContainer"></div>

    <!-- Main Content -->
    <main class="main-content details-content">
        <!-- Hero Section -->
        <section class="details-hero" id="detailsHero">
            <div class="hero-backdrop" id="heroBackdrop"></div>
            <div class="hero-overlay"></div>
            <div class="container">
                <div class="row align-items-center min-vh-75">
                    <div class="col-lg-4">
                        <div class="poster-container">
                            <img id="contentPoster" src="" alt="" class="poster-image">
                            <div class="poster-actions">
                                <button class="btn btn-primary btn-lg" id="playTrailerBtn">
                                    <i class="fas fa-play me-2"></i>
                                    Play Trailer
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-8">
                        <div class="content-info">
                            <div class="content-badges" id="contentBadges"></div>
                            <h1 class="content-title" id="contentTitle">Loading...</h1>
                            <div class="content-meta" id="contentMeta"></div>
                            <div class="content-rating" id="contentRating"></div>
                            <p class="content-overview" id="contentOverview">Loading content details...</p>
                            <div class="content-genres" id="contentGenres"></div>
                            <div class="content-actions">
                                <button class="btn btn-outline-light" id="addToWatchlistBtn">
                                    <i class="fas fa-bookmark me-2"></i>
                                    Add to Watchlist
                                </button>
                                <button class="btn btn-outline-light" id="addToFavoritesBtn">
                                    <i class="fas fa-heart me-2"></i>
                                    Add to Favorites
                                </button>
                                <button class="btn btn-outline-light" id="shareBtn">
                                    <i class="fas fa-share me-2"></i>
                                    Share
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Content Details -->
        <section class="content-details-section">
            <div class="container">
                <div class="row">
                    <!-- Main Content -->
                    <div class="col-lg-8">
                        <!-- Synopsis -->
                        <div class="detail-card">
                            <h3>Synopsis</h3>
                            <p id="fullSynopsis">Loading synopsis...</p>
                        </div>

                        <!-- Cast & Crew -->
                        <div class="detail-card" id="castCrewSection">
                            <h3>Cast & Crew</h3>
                            <div class="cast-crew-tabs">
                                <button class="tab-btn active" data-tab="cast">Cast</button>
                                <button class="tab-btn" data-tab="crew">Crew</button>
                            </div>
                            <div class="tab-content">
                                <div class="tab-pane active" id="castTab">
                                    <div class="cast-grid" id="castGrid"></div>
                                </div>
                                <div class="tab-pane" id="crewTab">
                                    <div class="crew-list" id="crewList"></div>
                                </div>
                            </div>
                        </div>

                        <!-- User Reviews -->
                        <div class="detail-card" id="reviewsSection">
                            <div class="reviews-header">
                                <h3>User Reviews</h3>
                                <button class="btn btn-primary btn-sm" id="writeReviewBtn">
                                    <i class="fas fa-pen me-2"></i>
                                    Write Review
                                </button>
                            </div>
                            <div class="reviews-container" id="reviewsContainer"></div>
                        </div>
                    </div>

                    <!-- Sidebar -->
                    <div class="col-lg-4">
                        <!-- Content Info -->
                        <div class="sidebar-card">
                            <h4>Details</h4>
                            <div class="info-list" id="contentInfoList"></div>
                        </div>

                        <!-- Rating -->
                        <div class="sidebar-card" id="ratingCard">
                            <h4>Rate This</h4>
                            <div class="rating-section">
                                <div class="rating-stars" id="userRatingStars">
                                    <i class="fas fa-star rating-star" data-rating="1"></i>
                                    <i class="fas fa-star rating-star" data-rating="2"></i>
                                    <i class="fas fa-star rating-star" data-rating="3"></i>
                                    <i class="fas fa-star rating-star" data-rating="4"></i>
                                    <i class="fas fa-star rating-star" data-rating="5"></i>
                                </div>
                                <p class="rating-text">Click to rate</p>
                            </div>
                        </div>

                        <!-- Statistics -->
                        <div class="sidebar-card">
                            <h4>Statistics</h4>
                            <div class="stats-grid">
                                <div class="stat-item">
                                    <div class="stat-value" id="totalViews">-</div>
                                    <div class="stat-label">Views</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value" id="totalRatings">-</div>
                                    <div class="stat-label">Ratings</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value" id="avgRating">-</div>
                                    <div class="stat-label">Avg Rating</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value" id="watchlistCount">-</div>
                                    <div class="stat-label">Watchlisted</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Similar Content -->
        <section class="similar-content-section">
            <div class="container">
                <div class="content-section">
                    <div class="section-header">
                        <h2 class="section-title">
                            <i class="fas fa-thumbs-up text-primary me-2"></i>
                            More Like This
                        </h2>
                    </div>
                    <div class="content-carousel" id="similarCarousel">
                        <div class="carousel-loading">
                            <div class="loading-spinner-small"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <div id="footerContainer"></div>

    <!-- Review Modal -->
    <div class="modal fade" id="reviewModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content bg-dark">
                <div class="modal-header">
                    <h5 class="modal-title">Write a Review</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="reviewForm">
                        <div class="mb-3">
                            <label class="form-label">Your Rating</label>
                            <div class="rating-stars" id="reviewRatingStars">
                                <i class="fas fa-star rating-star" data-rating="1"></i>
                                <i class="fas fa-star rating-star" data-rating="2"></i>
                                <i class="fas fa-star rating-star" data-rating="3"></i>
                                <i class="fas fa-star rating-star" data-rating="4"></i>
                                <i class="fas fa-star rating-star" data-rating="5"></i>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Review Title</label>
                            <input type="text" class="form-control" id="reviewTitle" placeholder="Give your review a title">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Your Review</label>
                            <textarea class="form-control" id="reviewContent" rows="5" placeholder="Share your thoughts about this content..."></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="submitReviewBtn">Submit Review</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/main.js"></script>
    <script src="js/include.js"></script>
    <script>
        let currentContent = null;
        let userRating = 0;
        let reviewRating = 0;

        document.addEventListener('DOMContentLoaded', function() {
            initializeDetailsPage();
        });

        async function initializeDetailsPage() {
            // Load includes
            await loadIncludes();

            // Initialize details page
            await PageInitializers.initDetailsPage();
            
            // Bind events
            bindDetailsEvents();

            Utils.hideLoadingScreen();
        }

        async function loadIncludes() {
            try {
                await Promise.all([
                    loadHeader(),
                    loadFooter()
                ]);
            } catch (error) {
                console.error('Failed to load includes:', error);
            }
        }

        function bindDetailsEvents() {
            // Play trailer button
            const playTrailerBtn = document.getElementById('playTrailerBtn');
            playTrailerBtn.onclick = () => {
                if (currentContent && currentContent.youtube_trailer) {
                    UIComponents.playTrailer(currentContent.youtube_trailer);
                } else {
                    Utils.showToast('Trailer not available', 'error');
                }
            };

            // Action buttons
            bindActionButtons();

            // Rating stars
            bindRatingStars();

            // Tabs
            bindTabs();

            // Review modal
            bindReviewModal();
        }

        function bindActionButtons() {
            const watchlistBtn = document.getElementById('addToWatchlistBtn');
            const favoritesBtn = document.getElementById('addToFavoritesBtn');
            const shareBtn = document.getElementById('shareBtn');

            watchlistBtn.onclick = async () => {
                if (!AppState.isAuthenticated) {
                    Utils.showToast('Please login to add to watchlist', 'error');
                    return;
                }

                try {
                    await ApiService.recordInteraction(currentContent.id, 'watchlist');
                    watchlistBtn.innerHTML = '<i class="fas fa-check me-2"></i>Added to Watchlist';
                    watchlistBtn.disabled = true;
                    Utils.showToast('Added to watchlist!', 'success');
                } catch (error) {
                    Utils.showToast('Failed to add to watchlist', 'error');
                }
            };

            favoritesBtn.onclick = async () => {
                if (!AppState.isAuthenticated) {
                    Utils.showToast('Please login to add to favorites', 'error');
                    return;
                }

                try {
                    await ApiService.recordInteraction(currentContent.id, 'favorite');
                    favoritesBtn.innerHTML = '<i class="fas fa-heart me-2"></i>Added to Favorites';
                    favoritesBtn.disabled = true;
                    Utils.showToast('Added to favorites!', 'success');
                } catch (error) {
                    Utils.showToast('Failed to add to favorites', 'error');
                }
            };

            shareBtn.onclick = () => {
                if (navigator.share) {
                    navigator.share({
                        title: currentContent.title,
                        text: currentContent.overview,
                        url: window.location.href
                    });
                } else {
                    // Fallback to clipboard
                    navigator.clipboard.writeText(window.location.href);
                    Utils.showToast('Link copied to clipboard!', 'success');
                }
            };
        }

        function bindRatingStars() {
            const ratingStars = document.querySelectorAll('#userRatingStars .rating-star');
            ratingStars.forEach((star, index) => {
                star.onclick = async () => {
                    if (!AppState.isAuthenticated) {
                        Utils.showToast('Please login to rate content', 'error');
                        return;
                    }

                    userRating = index + 1;
                    updateStars(ratingStars, userRating);
                    
                    try {
                        await ApiService.recordInteraction(currentContent.id, 'rating', userRating);
                        Utils.showToast(`Rated ${userRating} stars!`, 'success');
                    } catch (error) {
                        Utils.showToast('Failed to submit rating', 'error');
                    }
                };

                star.onmouseover = () => {
                    updateStars(ratingStars, index + 1);
                };
            });

            const ratingContainer = document.getElementById('userRatingStars');
            ratingContainer.onmouseleave = () => {
                updateStars(ratingStars, userRating);
            };
        }

        function bindTabs() {
            const tabBtns = document.querySelectorAll('.tab-btn');
            const tabPanes = document.querySelectorAll('.tab-pane');

            tabBtns.forEach(btn => {
                btn.onclick = () => {
                    const targetTab = btn.getAttribute('data-tab');
                    
                    // Update active states
                    tabBtns.forEach(b => b.classList.remove('active'));
                    tabPanes.forEach(p => p.classList.remove('active'));
                    
                    btn.classList.add('active');
                    document.getElementById(targetTab + 'Tab').classList.add('active');
                };
            });
        }

        function bindReviewModal() {
            const writeReviewBtn = document.getElementById('writeReviewBtn');
            const reviewModal = new bootstrap.Modal(document.getElementById('reviewModal'));
            const reviewStars = document.querySelectorAll('#reviewRatingStars .rating-star');
            const submitReviewBtn = document.getElementById('submitReviewBtn');

            writeReviewBtn.onclick = () => {
                if (!AppState.isAuthenticated) {
                    Utils.showToast('Please login to write a review', 'error');
                    return;
                }
                reviewModal.show();
            };

            // Review rating stars
            reviewStars.forEach((star, index) => {
                star.onclick = () => {
                    reviewRating = index + 1;
                    updateStars(reviewStars, reviewRating);
                };
            });

            submitReviewBtn.onclick = async () => {
                if (reviewRating === 0) {
                    Utils.showToast('Please select a rating', 'error');
                    return;
                }

                const title = document.getElementById('reviewTitle').value.trim();
                const content = document.getElementById('reviewContent').value.trim();

                if (!content) {
                    Utils.showToast('Please write a review', 'error');
                    return;
                }

                try {
                    await submitReview({
                        rating: reviewRating,
                        title: title,
                        content: content
                    });

                    reviewModal.hide();
                    Utils.showToast('Review submitted successfully!', 'success');
                    
                    // Reset form
                    document.getElementById('reviewForm').reset();
                    updateStars(reviewStars, 0);
                    reviewRating = 0;

                } catch (error) {
                    Utils.showToast('Failed to submit review', 'error');
                }
            };
        }

        function updateStars(stars, rating) {
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
        }

        async function submitReview(reviewData) {
            return await ApiService.request('/reviews', {
                method: 'POST',
                body: JSON.stringify({
                    content_id: currentContent.id,
                    ...reviewData
                })
            });
        }

        // Override PageInitializers.initDetailsPage for custom rendering
        PageInitializers.renderContentDetails = function(content) {
            currentContent = content;
            
            // Update page title and meta
            document.title = `${content.title} - CineScope`;
            const metaDescription = document.querySelector('meta[name="description"]');
            if (metaDescription) {
                metaDescription.content = Utils.truncateText(content.overview, 160);
            }

            // Update hero section
            updateHeroSection(content);
            
            // Update content details
            updateContentDetails(content);
            
            // Update sidebar
            updateSidebar(content);
            
            // Load cast and crew
            loadCastAndCrew(content);
        };

        function updateHeroSection(content) {
            // Background
            const heroBackdrop = document.getElementById('heroBackdrop');
            if (content.backdrop_path) {
                heroBackdrop.style.backgroundImage = `url(${Utils.getImageUrl(content.backdrop_path, 'w1280')})`;
            }

            // Poster
            const posterImg = document.getElementById('contentPoster');
            posterImg.src = Utils.getImageUrl(content.poster_path, 'w500');
            posterImg.alt = content.title;

            // Content info
            document.getElementById('contentTitle').textContent = content.title;
            document.getElementById('contentOverview').textContent = content.overview || 'No overview available.';

            // Badges
            const badges = [];
            if (content.is_trending) badges.push('<span class="badge badge-trending">Trending</span>');
            if (content.is_new_release) badges.push('<span class="badge badge-new">New Release</span>');
            if (content.is_critics_choice) badges.push('<span class="badge badge-critics">Critics Choice</span>');
            document.getElementById('contentBadges').innerHTML = badges.join('');

            // Meta info
            const meta = [];
            if (content.release_date) meta.push(Utils.formatDate(content.release_date));
            if (content.runtime) meta.push(`${content.runtime} min`);
            meta.push(content.content_type.toUpperCase());
            document.getElementById('contentMeta').innerHTML = meta.join(' â€¢ ');

            // Rating
            const ratingHtml = `
                <div class="rating-display">
                    <i class="fas fa-star text-warning"></i>
                    <span class="rating-value">${Utils.formatRating(content.rating)}</span>
                    <span class="rating-count">(${content.vote_count || 0} votes)</span>
                </div>
            `;
            document.getElementById('contentRating').innerHTML = ratingHtml;

            // Genres
            const genres = content.genres || [];
            const genreHtml = genres.map(genre => 
                `<span class="genre-tag">${genre}</span>`
            ).join('');
            document.getElementById('contentGenres').innerHTML = genreHtml;
        }

        function updateContentDetails(content) {
            document.getElementById('fullSynopsis').textContent = content.overview || 'No synopsis available.';
        }

        function updateSidebar(content) {
            // Content info
            const infoList = [
                { label: 'Title', value: content.title },
                { label: 'Original Title', value: content.original_title || content.title },
                { label: 'Type', value: content.content_type.toUpperCase() },
                { label: 'Release Date', value: Utils.formatDate(content.release_date) },
                { label: 'Runtime', value: content.runtime ? `${content.runtime} minutes` : 'N/A' },
                { label: 'Languages', value: (content.languages || []).join(', ') || 'N/A' },
                { label: 'Rating', value: Utils.formatRating(content.rating) },
                { label: 'Vote Count', value: content.vote_count || 0 }
            ];

            const infoHtml = infoList.map(info => `
                <div class="info-item">
                    <span class="info-label">${info.label}:</span>
                    <span class="info-value">${info.value}</span>
                </div>
            `).join('');

            document.getElementById('contentInfoList').innerHTML = infoHtml;

            // Statistics
            document.getElementById('totalRatings').textContent = content.vote_count || 0;
            document.getElementById('avgRating').textContent = Utils.formatRating(content.rating);
        }

        function loadCastAndCrew(content) {
            const castGrid = document.getElementById('castGrid');
            const crewList = document.getElementById('crewList');

            // Cast
            if (content.cast && content.cast.length > 0) {
                const castHtml = content.cast.map(person => `
                    <div class="cast-member">
                        <img src="${person.profile_path ? Utils.getImageUrl(person.profile_path, 'w185') : 'https://via.placeholder.com/185x278?text=No+Photo'}" 
                             alt="${person.name}" class="cast-photo">
                        <div class="cast-info">
                            <h6 class="cast-name">${person.name}</h6>
                            <p class="cast-character">${person.character || person.role || 'Unknown Role'}</p>
                        </div>
                    </div>
                `).join('');
                castGrid.innerHTML = castHtml;
            } else {
                castGrid.innerHTML = '<p class="text-muted">Cast information not available.</p>';
            }

            // Crew
            if (content.crew && content.crew.length > 0) {
                const crewHtml = content.crew.map(person => `
                    <div class="crew-member">
                        <h6 class="crew-name">${person.name}</h6>
                        <p class="crew-job">${person.job || person.role || 'Unknown Position'}</p>
                    </div>
                `).join('');
                crewList.innerHTML = crewHtml;
            } else {
                crewList.innerHTML = '<p class="text-muted">Crew information not available.</p>';
            }
        }
    </script>

    <style>
        .details-content {
            padding-top: 0;
        }

        .details-hero {
            position: relative;
            min-height: 75vh;
            display: flex;
            align-items: center;
            overflow: hidden;
        }

        .hero-backdrop {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            filter: blur(5px);
            transform: scale(1.1);
            z-index: -2;
        }

        .hero-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                to right,
                rgba(11, 15, 25, 0.9) 0%,
                rgba(11, 15, 25, 0.7) 50%,
                rgba(11, 15, 25, 0.9) 100%
            );
            z-index: -1;
        }

        .poster-container {
            position: relative;
            text-align: center;
        }

        .poster-image {
            width: 300px;
            height: 450px;
            object-fit: cover;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-xl);
            margin-bottom: 1.5rem;
        }

        .poster-actions {
            display: flex;
            justify-content: center;
        }

        .content-info {
            padding-left: 2rem;
        }

        .content-badges {
            margin-bottom: 1rem;
        }

        .content-title {
            font-size: clamp(2rem, 4vw, 3.5rem);
            font-weight: 700;
            margin-bottom: 1rem;
            line-height: 1.1;
        }

        .content-meta {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .content-overview {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 1.5rem;
            max-width: 600px;
        }

        .content-genres {
            margin-bottom: 2rem;
        }

        .content-actions {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .rating-display {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .rating-value {
            font-size: 1.25rem;
            font-weight: 600;
        }

        .rating-count {
            color: var(--text-muted);
        }

        .content-details-section {
            padding: 4rem 0;
        }

        .detail-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-lg);
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .detail-card h3 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--primary-color);
        }

        .cast-crew-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .tab-btn {
            padding: 0.75rem 1.5rem;
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
        }

        .tab-btn.active,
        .tab-btn:hover {
            background: var(--primary-color);
            border-color: var(--primary-color);
            color: white;
        }

        .tab-pane {
            display: none;
        }

        .tab-pane.active {
            display: block;
        }

        .cast-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 1.5rem;
        }

        .cast-member {
            text-align: center;
        }

        .cast-photo {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: var(--border-radius);
            margin-bottom: 0.75rem;
        }

        .cast-name {
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .cast-character {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin: 0;
        }

        .crew-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .crew-member {
            padding: 1rem;
            background: var(--bg-tertiary);
            border-radius: var(--border-radius);
        }

        .crew-name {
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .crew-job {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin: 0;
        }

        .sidebar-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-lg);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .sidebar-card h4 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border-color);
        }

        .info-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .info-item {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .info-label {
            font-weight: 500;
            color: var(--text-secondary);
            min-width: 40%;
        }

        .info-value {
            text-align: right;
            flex: 1;
        }

        .rating-section {
            text-align: center;
        }

        .rating-text {
            margin-top: 0.5rem;
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        .stat-item {
            text-align: center;
            padding: 1rem;
            background: var(--bg-tertiary);
            border-radius: var(--border-radius);
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 0.25rem;
        }

        .similar-content-section {
            padding: 3rem 0;
            background: var(--bg-secondary);
        }

        .reviews-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .modal-content {
            border: 1px solid var(--border-color);
        }

        .modal-header {
            border-bottom: 1px solid var(--border-color);
        }

        .modal-footer {
            border-top: 1px solid var(--border-color);
        }

        @media (max-width: 992px) {
            .content-info {
                padding-left: 0;
                margin-top: 2rem;
                text-align: center;
            }

            .poster-image {
                width: 250px;
                height: 375px;
            }

            .content-title {
                font-size: 2.5rem;
            }
        }

        @media (max-width: 768px) {
            .details-hero {
                min-height: auto;
                padding: 2rem 0;
            }

            .poster-image {
                width: 200px;
                height: 300px;
            }

            .content-actions {
                justify-content: center;
            }

            .cast-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }

            .crew-list {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.5rem;
            }
        }
    </style>
</body>
</html>