<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search - CineScope</title>
    <meta name="description" content="Search for movies, TV shows, and anime on CineScope.">
    
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/components.css">
    <link rel="stylesheet" href="/css/layouts.css">
    <link rel="stylesheet" href="/css/animations.css">
    <link rel="stylesheet" href="/css/responsive.css">
    <link rel="stylesheet" href="/css/theme.css">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Fixed Top Bar -->
    <header class="topbar" id="topbar">
        <div class="topbar-logo" onclick="window.location.href='/'">
            CineScope
        </div>
        
        <div class="topbar-search">
            <div class="search-icon">üîç</div>
            <input type="text" class="search-input" id="mainSearchInput" placeholder="Search movies, TV shows, anime..." />
        </div>
        
        <div class="topbar-actions">
            <button class="theme-toggle" title="Toggle theme" onclick="toggleTheme()"></button>
            <img class="user-avatar user-only-show" style="display: none;" alt="User Avatar" onclick="toggleUserMenu()" />
            <button class="login-btn user-only-hide" onclick="window.location.href='/auth/login.html'">Sign In</button>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="search-layout">
            <!-- Search Header -->
            <div class="search-header">
                <div class="search-controls">
                    <input type="text" class="search-input-large" id="searchInput" placeholder="Search for movies, TV shows, anime..." />
                    <button class="btn btn-primary" id="searchBtn">
                        <i class="icon-search"></i> Search
                    </button>
                </div>
                
                <div class="search-filters">
                    <select class="filter-select" id="contentTypeFilter">
                        <option value="multi">All Content</option>
                        <option value="movie">Movies</option>
                        <option value="tv">TV Shows</option>
                        <option value="anime">Anime</option>
                    </select>
                    
                    <select class="filter-select" id="sortFilter">
                        <option value="relevance">Most Relevant</option>
                        <option value="rating">Highest Rated</option>
                        <option value="newest">Newest First</option>
                        <option value="oldest">Oldest First</option>
                        <option value="popular">Most Popular</option>
                    </select>
                    
                    <button class="btn btn-outline" id="clearFilters">Clear Filters</button>
                </div>

                <div class="genre-chips" id="genreChips" style="display: none;">
                    <!-- Genre filters will be populated dynamically -->
                </div>
            </div>

            <!-- Search Results -->
            <div class="search-results-section">
                <div class="search-results-header" id="resultsHeader" style="display: none;">
                    <div class="results-count" id="resultsCount"></div>
                    <div class="view-toggle">
                        <button class="view-btn active" id="gridViewBtn" data-view="grid" title="Grid View">‚äû</button>
                        <button class="view-btn" id="listViewBtn" data-view="list" title="List View">‚ò∞</button>
                    </div>
                </div>

                <!-- Results Container -->
                <div id="searchResults" class="search-results-container">
                    <!-- Initial state -->
                    <div class="search-placeholder">
                        <div class="search-placeholder-icon">ÔøΩÔøΩ</div>
                        <h2>Discover Your Next Favorite</h2>
                        <p>Search through thousands of movies, TV shows, and anime to find exactly what you're looking for.</p>
                        <div class="search-suggestions">
                            <p>Try searching for:</p>
                            <div class="suggestion-chips">
                                <button class="suggestion-chip" onclick="performQuickSearch('Avengers')">Avengers</button>
                                <button class="suggestion-chip" onclick="performQuickSearch('Breaking Bad')">Breaking Bad</button>
                                <button class="suggestion-chip" onclick="performQuickSearch('Demon Slayer')">Demon Slayer</button>
                                <button class="suggestion-chip" onclick="performQuickSearch('Inception')">Inception</button>
                                <button class="suggestion-chip" onclick="performQuickSearch('Stranger Things')">Stranger Things</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Load More Button -->
                <div class="load-more-container" id="loadMoreContainer" style="display: none;">
                    <button class="btn btn-outline" id="loadMoreBtn">Load More Results</button>
                </div>
            </div>
        </div>
    </main>

    <!-- Fixed Bottom Navigation (Mobile) -->
    <nav class="mobile-nav">
        <a href="/" class="mobile-nav-item">
            <div class="mobile-nav-icon">üè†</div>
            <span>Home</span>
        </a>
        <a href="/content/search.html" class="mobile-nav-item active">
            <div class="mobile-nav-icon">üîç</div>
            <span>Search</span>
        </a>
        <a href="/user/watchlist.html" class="mobile-nav-item user-only-show" style="display: none;">
            <div class="mobile-nav-icon">üìã</div>
            <span>Watchlist</span>
        </a>
        <a href="/user/favorites.html" class="mobile-nav-item user-only-show" style="display: none;">
            <div class="mobile-nav-icon">ÔøΩÔøΩÔ∏è</div>
            <span>Favorites</span>
        </a>
        <a href="#" class="mobile-nav-item" onclick="handleProfileClick()">
            <div class="mobile-nav-icon">üë§</div>
            <span>Profile</span>
        </a>
    </nav>

    <!-- Toast Container -->
    <div class="toast-container"></div>

    <script type="module">
        import apiClient from '/js/api.js';
        import authManager from '/js/auth.js';

        // Page state
        let currentQuery = '';
        let currentPage = 1;
        let currentFilters = {
            type: 'multi',
            sort: 'relevance'
        };
        let currentResults = [];
        let totalResults = 0;
        let isLoading = false;
        let currentView = 'grid';

        // DOM elements
        const searchInput = document.getElementById('searchInput');
        const mainSearchInput = document.getElementById('mainSearchInput');
        const searchBtn = document.getElementById('searchBtn');
        const contentTypeFilter = document.getElementById('contentTypeFilter');
        const sortFilter = document.getElementById('sortFilter');
        const searchResults = document.getElementById('searchResults');
        const resultsHeader = document.getElementById('resultsHeader');
        const resultsCount = document.getElementById('resultsCount');
        const loadMoreContainer = document.getElementById('loadMoreContainer');
        const loadMoreBtn = document.getElementById('loadMoreBtn');
        const gridViewBtn = document.getElementById('gridViewBtn');
        const listViewBtn = document.getElementById('listViewBtn');

        // Show toast function
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `toast toast-${type} show`;
            toast.innerHTML = `
                <div class="toast-content">
                    <span class="toast-message">${message}</span>
                    <button class="toast-close" onclick="this.parentElement.parentElement.remove()">&times;</button>
                </div>
            `;
            document.querySelector('.toast-container').appendChild(toast);
            
            setTimeout(() => {
                if (toast.parentElement) {
                    toast.classList.remove('show');
                    setTimeout(() => toast.remove(), 200);
                }
            }, 3000);
        }

        // Initialize search functionality
        function initSearch() {
            // Get query from URL params
            const urlParams = new URLSearchParams(window.location.search);
            const queryParam = urlParams.get('q');
            if (queryParam) {
                searchInput.value = queryParam;
                mainSearchInput.value = queryParam;
                performSearch(queryParam);
            }

            // Search input events
            searchInput.addEventListener('input', debounce(handleSearchInput, 300));
            mainSearchInput.addEventListener('input', debounce(handleSearchInput, 300));
            
            // Search button
            searchBtn.addEventListener('click', () => {
                const query = searchInput.value.trim();
                if (query) performSearch(query);
            });

            // Enter key handling
            [searchInput, mainSearchInput].forEach(input => {
                input.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        const query = input.value.trim();
                        if (query) performSearch(query);
                    }
                });
            });

            // Filter changes
            contentTypeFilter.addEventListener('change', handleFilterChange);
            sortFilter.addEventListener('change', handleFilterChange);

            // View toggle
            gridViewBtn.addEventListener('click', () => setView('grid'));
            listViewBtn.addEventListener('click', () => setView('list'));

            // Load more
            loadMoreBtn.addEventListener('click', loadMoreResults);

            // Clear filters
            document.getElementById('clearFilters').addEventListener('click', clearFilters);
        }

        // Debounce function
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // Handle search input
        function handleSearchInput(e) {
            const query = e.target.value.trim();
            // Sync both search inputs
            searchInput.value = query;
            mainSearchInput.value = query;
            
            if (query.length >= 2) {
                performSearch(query);
            } else if (query.length === 0) {
                resetToInitialState();
            }
        }

        // Perform search with real API call
        async function performSearch(query, page = 1) {
            if (isLoading) return;
            
            currentQuery = query;
            currentPage = page;
            isLoading = true;

            // Update URL without reload
            const url = new URL(window.location);
            url.searchParams.set('q', query);
            window.history.replaceState({}, '', url);

            // Show loading state
            if (page === 1) {
                showLoadingState();
            } else {
                loadMoreBtn.textContent = 'Loading...';
                loadMoreBtn.disabled = true;
            }

            try {
                // Real API call to backend
                const searchParams = {
                    query: query,
                    type: currentFilters.type,
                    page: page
                };

                const response = await apiClient.search(searchParams);
                
                if (page === 1) {
                    currentResults = response.results || [];
                    totalResults = response.total_results || 0;
                } else {
                    currentResults = [...currentResults, ...(response.results || [])];
                }

                // Sort results if needed
                if (currentFilters.sort !== 'relevance') {
                    sortResults(currentResults, currentFilters.sort);
                }

                displayResults();
                updateResultsHeader();
                updateLoadMoreButton(response);

                // Record search interaction if user is logged in
                if (authManager.isLoggedIn()) {
                    // This would typically be done for individual content views
                    // but we can track search queries for analytics
                }

            } catch (error) {
                console.error('Search error:', error);
                showToast('Search failed. Please try again.', 'error');
                
                if (page === 1) {
                    showErrorState();
                }
            } finally {
                isLoading = false;
                loadMoreBtn.textContent = 'Load More Results';
                loadMoreBtn.disabled = false;
            }
        }

        // Quick search from suggestions
        window.performQuickSearch = function(query) {
            searchInput.value = query;
            mainSearchInput.value = query;
            performSearch(query);
        };

        // Handle filter changes
        function handleFilterChange() {
            currentFilters.type = contentTypeFilter.value;
            currentFilters.sort = sortFilter.value;
            
            if (currentQuery) {
                performSearch(currentQuery, 1);
            }
        }

        // Sort results
        function sortResults(results, sortBy) {
            switch (sortBy) {
                case 'rating':
                    results.sort((a, b) => (b.rating || 0) - (a.rating || 0));
                    break;
                case 'newest':
                    results.sort((a, b) => {
                        const dateA = new Date(a.release_date || '1900-01-01');
                        const dateB = new Date(b.release_date || '1900-01-01');
                        return dateB - dateA;
                    });
                    break;
                case 'oldest':
                    results.sort((a, b) => {
                        const dateA = new Date(a.release_date || '2100-01-01');
                        const dateB = new Date(b.release_date || '2100-01-01');
                        return dateA - dateB;
                    });
                    break;
                case 'popular':
                    results.sort((a, b) => (b.vote_count || 0) - (a.vote_count || 0));
                    break;
            }
        }

        // Display results
        function displayResults() {
            if (currentResults.length === 0) {
                showNoResultsState();
                return;
            }

            resultsHeader.style.display = 'flex';
            
            if (currentView === 'grid') {
                displayGridResults();
            } else {
                displayListResults();
            }
        }

        // Display grid results
        function displayGridResults() {
            searchResults.innerHTML = `
                <div class="search-grid">
                    ${currentResults.map(item => createContentCard(item)).join('')}
                </div>
            `;
            searchResults.className = 'search-results-container grid-view';
        }

        // Display list results
        function displayListResults() {
            searchResults.innerHTML = `
                <div class="search-list">
                    ${currentResults.map(item => createListItem(item)).join('')}
                </div>
            `;
            searchResults.className = 'search-results-container list-view';
        }

        // Create content card
        function createContentCard(item) {
            const posterUrl = item.poster_path || '/assets/default-poster.jpg';
            const rating = item.rating ? `‚òÖ ${item.rating.toFixed(1)}` : '';
            const year = item.release_date ? new Date(item.release_date).getFullYear() : '';
            
            return `
                <div class="content-card" onclick="showContentDetails(${item.id})">
                    <div class="card-image">
                        <img src="${posterUrl}" alt="${item.title}" loading="lazy" />
                        <div class="card-overlay">
                            <div class="card-actions">
                                ${item.youtube_trailer ? `
                                    <button class="card-action" onclick="event.stopPropagation(); playTrailer('${item.youtube_trailer}')">
                                        <i class="icon-play"></i>
                                    </button>
                                ` : ''}
                                <button class="card-action" onclick="event.stopPropagation(); addToWatchlist(${item.id})">
                                    <i class="icon-plus"></i>
                                </button>
                                <button class="card-action" onclick="event.stopPropagation(); addToFavorites(${item.id})">
                                    <i class="icon-heart"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">${item.title}</h3>
                        <div class="card-meta">
                            ${rating ? `<span class="card-rating">${rating}</span>` : ''}
                            ${year ? `<span class="card-year">${year}</span>` : ''}
                            <span class="card-type">${(item.content_type || 'movie').toUpperCase()}</span>
                        </div>
                        ${item.genres && item.genres.length ? `
                            <div class="card-genres">${item.genres.slice(0, 2).join(', ')}</div>
                        ` : ''}
                    </div>
                </div>
            `;
        }

        // Create list item
        function createListItem(item) {
            const posterUrl = item.poster_path || '/assets/default-poster.jpg';
            const rating = item.rating ? item.rating.toFixed(1) : 'N/A';
            const year = item.release_date ? new Date(item.release_date).getFullYear() : '';
            
            return `
                <div class="list-item" onclick="showContentDetails(${item.id})">
                    <div class="list-item-image">
                        <img src="${posterUrl}" alt="${item.title}" loading="lazy" />
                    </div>
                    <div class="list-item-content">
                        <div class="list-item-title">${item.title}</div>
                        <div class="list-item-meta">
                            <span>‚òÖ ${rating}</span>
                            <span>${year}</span>
                            <span>${(item.content_type || 'movie').toUpperCase()}</span>
                            ${item.genres && item.genres.length ? `<span>${item.genres.slice(0, 2).join(', ')}</span>` : ''}
                        </div>
                        ${item.overview ? `
                            <div class="list-item-overview">${item.overview.substring(0, 150)}${item.overview.length > 150 ? '...' : ''}</div>
                        ` : ''}
                    </div>
                    <div class="list-item-actions">
                        ${item.youtube_trailer ? `
                            <button class="btn btn-sm btn-outline" onclick="event.stopPropagation(); playTrailer('${item.youtube_trailer}')">
                                <i class="icon-play"></i> Trailer
                            </button>
                        ` : ''}
                        <button class="btn btn-sm btn-outline" onclick="event.stopPropagation(); addToWatchlist(${item.id})">
                            <i class="icon-plus"></i> Watchlist
                        </button>
                    </div>
                </div>
            `;
        }

        // Show content details (placeholder for modal functionality)
        window.showContentDetails = async function(contentId) {
            try {
                // This would open a modal with content details
                // For now, we'll just show a toast
                showToast('Opening content details...', 'info');
                
                // In a real implementation, this would call:
                // const details = await apiClient.getContentDetails(contentId);
                // showContentModal(details);
                
            } catch (error) {
                showToast('Failed to load content details', 'error');
            }
        };

        // Placeholder interaction functions
        window.playTrailer = function(trailerUrl) {
            if (trailerUrl) {
                window.open(trailerUrl, '_blank');
            }
        };

        window.addToWatchlist = async function(contentId) {
            if (!authManager.isLoggedIn()) {
                showToast('Please sign in to add to watchlist', 'warning');
                return;
            }
            
            try {
                await apiClient.recordInteraction(authManager.getToken(), {
                    content_id: contentId,
                    interaction_type: 'watchlist'
                });
                showToast('Added to watchlist', 'success');
            } catch (error) {
                showToast('Failed to add to watchlist', 'error');
            }
        };

        window.addToFavorites = async function(contentId) {
            if (!authManager.isLoggedIn()) {
                showToast('Please sign in to add to favorites', 'warning');
                return;
            }
            
            try {
                await apiClient.recordInteraction(authManager.getToken(), {
                    content_id: contentId,
                    interaction_type: 'favorite'
                });
                showToast('Added to favorites', 'success');
            } catch (error) {
                showToast('Failed to add to favorites', 'error');
            }
        };

        // Set view mode
        function setView(view) {
            currentView = view;
            
            // Update buttons
            document.querySelectorAll('.view-btn').forEach(btn => btn.classList.remove('active'));
            if (view === 'grid') {
                gridViewBtn.classList.add('active');
            } else {
                listViewBtn.classList.add('active');
            }
            
            // Redisplay results
            if (currentResults.length > 0) {
                displayResults();
            }
        }

        // Update results header
        function updateResultsHeader() {
            resultsCount.textContent = `${currentResults.length} of ${totalResults} results for "${currentQuery}"`;
        }

        // Update load more button
        function updateLoadMoreButton(response) {
            const hasMore = response.current_page < response.total_pages;
            loadMoreContainer.style.display = hasMore ? 'block' : 'none';
        }

        // Load more results
        async function loadMoreResults() {
            if (currentQuery) {
                await performSearch(currentQuery, currentPage + 1);
            }
        }

        // Clear filters
        function clearFilters() {
            contentTypeFilter.value = 'multi';
            sortFilter.value = 'relevance';
            currentFilters = { type: 'multi', sort: 'relevance' };
            
            if (currentQuery) {
                performSearch(currentQuery, 1);
            }
        }

        // Show loading state
        function showLoadingState() {
            searchResults.innerHTML = `
                <div class="search-loading">
                    <div class="loading-spinner animate-spin"></div>
                    <p>Searching for "${currentQuery}"...</p>
                </div>
            `;
            resultsHeader.style.display = 'none';
            loadMoreContainer.style.display = 'none';
        }

        // Show no results state
        function showNoResultsState() {
            searchResults.innerHTML = `
                <div class="search-no-results">
                    <div class="no-results-icon">üîç</div>
                    <h2>No Results Found</h2>
                    <p>We couldn't find anything matching "${currentQuery}". Try adjusting your search or filters.</p>
                    <div class="no-results-suggestions">
                        <h3>Suggestions:</h3>
                        <ul>
                            <li>Check your spelling</li>
                            <li>Try different keywords</li>
                            <li>Use fewer filters</li>
                            <li>Search for a genre or actor name</li>
                        </ul>
                    </div>
                </div>
            `;
            resultsHeader.style.display = 'none';
            loadMoreContainer.style.display = 'none';
        }

        // Show error state
        function showErrorState() {
            searchResults.innerHTML = `
                <div class="search-error">
                    <div class="error-icon">‚ö†Ô∏è</div>
                    <h2>Search Failed</h2>
                    <p>We're having trouble performing your search right now. Please try again.</p>
                    <button class="btn btn-primary" onclick="performSearch('${currentQuery}')">Try Again</button>
                </div>
            `;
            resultsHeader.style.display = 'none';
            loadMoreContainer.style.display = 'none';
        }

        // Reset to initial state
        function resetToInitialState() {
            searchResults.innerHTML = `
                <div class="search-placeholder">
                    <div class="search-placeholder-icon">üîç</div>
                    <h2>Discover Your Next Favorite</h2>
                    <p>Search through thousands of movies, TV shows, and anime to find exactly what you're looking for.</p>
                    <div class="search-suggestions">
                        <p>Try searching for:</p>
                        <div class="suggestion-chips">
                            <button class="suggestion-chip" onclick="performQuickSearch('Avengers')">Avengers</button>
                            <button class="suggestion-chip" onclick="performQuickSearch('Breaking Bad')">Breaking Bad</button>
                            <button class="suggestion-chip" onclick="performQuickSearch('Demon Slayer')">Demon Slayer</button>
                            <button class="suggestion-chip" onclick="performQuickSearch('Inception')">Inception</button>
                            <button class="suggestion-chip" onclick="performQuickSearch('Stranger Things')">Stranger Things</button>
                        </div>
                    </div>
                </div>
            `;
            resultsHeader.style.display = 'none';
            loadMoreContainer.style.display = 'none';
            currentResults = [];
            currentQuery = '';
            
            // Clear URL params
            const url = new URL(window.location);
            url.searchParams.delete('q');
            window.history.replaceState({}, '', url);
        }

        // Theme toggle
        window.toggleTheme = function() {
            const currentTheme = document.documentElement.getAttribute('data-theme') || 'dark';
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('cinescope_theme', newTheme);
        };

        // User menu toggle
        window.toggleUserMenu = function() {
            // Placeholder for user menu functionality
        };

        // Handle profile click
        window.handleProfileClick = function() {
            if (authManager.isLoggedIn()) {
                const username = authManager.getUser().username;
                window.location.href = `/${username}/profile`;
            } else {
                window.location.href = '/auth/login.html';
            }
        };

        // Update auth UI
        function updateAuthUI() {
            const isLoggedIn = authManager.isLoggedIn();
            
            document.querySelectorAll('.user-only-show').forEach(el => {
                el.style.display = isLoggedIn ? 'block' : 'none';
            });
            
            document.querySelectorAll('.user-only-hide').forEach(el => {
                el.style.display = isLoggedIn ? 'none' : 'block';
            });

            if (isLoggedIn) {
                const user = authManager.getUser();
                const avatar = document.querySelector('.user-avatar');
                if (avatar) {
                    avatar.src = `https://ui-avatars.com/api/?name=${encodeURIComponent(user.username)}&background=3b82f6&color=fff&size=40`;
                }
            }
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', () => {
            initSearch();
            updateAuthUI();
            
            // Focus search input
            searchInput.focus();
            
            // Performance mark
            if (performance.mark) {
                performance.mark('search-page-ready');
            }
        });

        // Handle auth state changes
        authManager.onLogin(updateAuthUI);
        authManager.onLogout(updateAuthUI);
    </script>

    <style>
        .search-layout {
            max-width: 1200px;
            margin: 0 auto;
            padding: var(--spacing-lg);
        }

        .search-header {
            background: var(--theater-dark);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            margin-bottom: var(--spacing-xl);
        }

        .search-controls {
            display: flex;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-lg);
        }

        .search-input-large {
            flex: 1;
            padding: var(--spacing-md) var(--spacing-lg);
            background: var(--velvet-dark);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-lg);
            color: var(--text-primary);
            font-size: 1rem;
        }

        .search-input-large:focus {
            outline: none;
            border-color: var(--platinum-blue);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .search-filters {
            display: flex;
            gap: var(--spacing-md);
            flex-wrap: wrap;
        }

        .filter-select {
            padding: var(--spacing-sm) var(--spacing-md);
            background: var(--velvet-dark);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-md);
            color: var(--text-primary);
            font-size: 0.875rem;
        }

        .search-results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-lg);
        }

        .results-count {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .view-toggle {
            display: flex;
            gap: var(--spacing-sm);
        }

        .view-btn {
            width: 40px;
            height: 40px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            background: var(--velvet-dark);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .view-btn.active {
            background: var(--platinum-blue);
            border-color: var(--platinum-blue);
            color: white;
        }

        .search-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: var(--spacing-lg);
        }

        .search-list {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-md);
        }

        .search-placeholder {
            text-align: center;
            padding: var(--spacing-2xl);
        }

        .search-placeholder-icon {
            font-size: 4rem;
            margin-bottom: var(--spacing-lg);
        }

        .search-suggestions {
            margin-top: var(--spacing-xl);
        }

        .suggestion-chips {
            display: flex;
            gap: var(--spacing-sm);
            justify-content: center;
            flex-wrap: wrap;
            margin-top: var(--spacing-md);
        }

        .suggestion-chip {
            padding: var(--spacing-xs) var(--spacing-md);
            background: var(--velvet-dark);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-lg);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.875rem;
        }

        .suggestion-chip:hover {
            background: var(--platinum-blue);
            color: white;
            border-color: var(--platinum-blue);
        }

        .search-loading,
        .search-no-results,
        .search-error {
            text-align: center;
            padding: var(--spacing-2xl);
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid var(--velvet-dark);
            border-top: 3px solid var(--platinum-blue);
            border-radius: 50%;
            margin: 0 auto var(--spacing-lg);
        }

        .no-results-icon,
        .error-icon {
            font-size: 4rem;
            margin-bottom: var(--spacing-lg);
        }

        .no-results-suggestions {
            text-align: left;
            max-width: 300px;
            margin: var(--spacing-xl) auto 0;
        }

        .no-results-suggestions ul {
            list-style: disc;
            padding-left: var(--spacing-lg);
        }

        .load-more-container {
            text-align: center;
            margin-top: var(--spacing-xl);
        }

        .list-item-overview {
            color: var(--text-secondary);
            font-size: 0.875rem;
            line-height: 1.5;
            margin-top: var(--spacing-sm);
        }

        @media (max-width: 768px) {
            .search-controls {
                flex-direction: column;
            }

            .search-filters {
                justify-content: center;
            }

            .search-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: var(--spacing-md);
            }

            .suggestion-chips {
                justify-content: center;
            }

            .view-toggle {
                order: -1;
            }

            .search-results-header {
                flex-direction: column;
                gap: var(--spacing-md);
                align-items: center;
            }
        }
    </style>
</body>
</html>