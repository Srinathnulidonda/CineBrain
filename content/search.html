<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search - CineScope</title>

    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <link href="/assets/css/base.css" rel="stylesheet">
    <link href="/assets/css/components.css" rel="stylesheet">
    <link href="/assets/css/layouts.css" rel="stylesheet">
    <link href="/assets/css/animations.css" rel="stylesheet">
    <link href="/assets/css/responsive.css" rel="stylesheet">
    <link href="/assets/css/utilities.css" rel="stylesheet">
</head>

<body>
    <div class="app-layout">
        <!-- Navigation -->
        <nav class="navbar">
            <div class="container navbar__container">
                <a href="/" class="navbar__logo">CineScope</a>

                <div class="navbar__menu">
                    <a href="/content/trending.html" class="navbar__link">Trending</a>
                    <a href="/content/search.html" class="navbar__link navbar__link--active">Browse</a>
                    <a href="/content/anime.html" class="navbar__link">Anime</a>
                    <a href="/content/regional.html" class="navbar__link">Regional</a>
                </div>

                <div class="navbar__user" id="navbarUser">
                    <!-- Dynamic user menu -->
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="app-layout__main">
            <div class="container">
                <!-- Search Header -->
                <div class="page-header">
                    <h1 class="page-header__title">Search</h1>
                    <div class="search-bar mt-lg">
                        <div class="position-relative">
                            <i
                                class="bi bi-search position-absolute left-0 top-50 translate-middle-y ms-3 text-muted"></i>
                            <input type="text" class="form-control ps-5" placeholder="Search movies, TV shows, anime..."
                                id="searchInput" autofocus>
                            <button
                                class="position-absolute end-0 top-50 translate-middle-y me-2 btn btn-sm btn-secondary"
                                id="clearSearch" style="display: none;">
                                <i class="bi bi-x"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Search Suggestions -->
                <div class="mb-xl" id="searchSuggestions">
                    <p class="text-muted mb-md">Popular searches:</p>
                    <div class="d-flex flex-wrap gap-sm">
                        <button class="filter-chip" onclick="performSearch('Avatar')">Avatar</button>
                        <button class="filter-chip" onclick="performSearch('Marvel')">Marvel</button>
                        <button class="filter-chip" onclick="performSearch('Stranger Things')">Stranger Things</button>
                        <button class="filter-chip" onclick="performSearch('Anime')">Anime</button>
                        <button class="filter-chip" onclick="performSearch('K-Drama')">K-Drama</button>
                    </div>
                </div>

                <!-- Recent Searches -->
                <div class="mb-xl" id="recentSearches" style="display: none;">
                    <div class="d-flex justify-between align-center mb-md">
                        <p class="text-muted">Recent searches:</p>
                        <button class="text-sm text-muted border-0 bg-transparent"
                            onclick="Storage.clearSearchHistory(); loadRecentSearches();">
                            Clear
                        </button>
                    </div>
                    <div class="d-flex flex-wrap gap-sm" id="recentSearchesList">
                        <!-- Dynamic recent searches -->
                    </div>
                </div>

                <div class="search-layout">
                    <!-- Filters Sidebar -->
                    <aside class="sidebar">
                        <div class="sidebar__section">
                            <h3 class="sidebar__title">Filters</h3>

                            <!-- Content Type -->
                            <div class="mb-lg">
                                <label class="auth-form__label mb-sm">Content Type</label>
                                <div class="d-flex flex-column gap-xs">
                                    <label class="d-flex align-center gap-sm cursor-pointer">
                                        <input type="radio" name="contentType" value="multi" checked>
                                        <span>All</span>
                                    </label>
                                    <label class="d-flex align-center gap-sm cursor-pointer">
                                        <input type="radio" name="contentType" value="movie">
                                        <span>Movies</span>
                                    </label>
                                    <label class="d-flex align-center gap-sm cursor-pointer">
                                        <input type="radio" name="contentType" value="tv">
                                        <span>TV Shows</span>
                                    </label>
                                    <label class="d-flex align-center gap-sm cursor-pointer">
                                        <input type="radio" name="contentType" value="anime">
                                        <span>Anime</span>
                                    </label>
                                </div>
                            </div>

                            <!-- Genres -->
                            <div class="mb-lg">
                                <label class="auth-form__label mb-sm">Genres</label>
                                <div class="filters__options">
                                    <label class="filter-chip cursor-pointer">
                                        <input type="checkbox" value="Action" name="genre" class="d-none">
                                        Action
                                    </label>
                                    <label class="filter-chip cursor-pointer">
                                        <input type="checkbox" value="Comedy" name="genre" class="d-none">
                                        Comedy
                                    </label>
                                    <label class="filter-chip cursor-pointer">
                                        <input type="checkbox" value="Drama" name="genre" class="d-none">
                                        Drama
                                    </label>
                                    <label class="filter-chip cursor-pointer">
                                        <input type="checkbox" value="Horror" name="genre" class="d-none">
                                        Horror
                                    </label>
                                    <label class="filter-chip cursor-pointer">
                                        <input type="checkbox" value="Romance" name="genre" class="d-none">
                                        Romance
                                    </label>
                                    <label class="filter-chip cursor-pointer">
                                        <input type="checkbox" value="Sci-Fi" name="genre" class="d-none">
                                        Sci-Fi
                                    </label>
                                </div>
                            </div>

                            <!-- Rating -->
                            <div class="mb-lg">
                                <label class="auth-form__label mb-sm">Minimum Rating</label>
                                <input type="range" class="form-range" min="0" max="10" step="0.5" value="0"
                                    id="ratingFilter">
                                <div class="d-flex justify-between text-sm text-muted">
                                    <span>0</span>
                                    <span id="ratingValue">Any</span>
                                    <span>10</span>
                                </div>
                            </div>

                            <!-- Year -->
                            <div class="mb-lg">
                                <label class="auth-form__label mb-sm">Release Year</label>
                                <select class="form-control" id="yearFilter">
                                    <option value="">Any Year</option>
                                    <option value="2024">2024</option>
                                    <option value="2023">2023</option>
                                    <option value="2022">2022</option>
                                    <option value="2021">2021</option>
                                    <option value="2020">2020</option>
                                    <option value="2010s">2010s</option>
                                    <option value="2000s">2000s</option>
                                    <option value="1990s">1990s</option>
                                    <option value="older">Before 1990</option>
                                </select>
                            </div>

                            <button class="btn btn-secondary w-100" onclick="resetFilters()">
                                Reset Filters
                            </button>
                        </div>
                    </aside>

                    <!-- Search Results -->
                    <div class="search-results">
                        <!-- Results Header -->
                        <div class="search-results__header" id="resultsHeader" style="display: none;">
                            <p class="search-results__count" id="resultsCount">0 results</p>
                            <div class="search-results__sort">
                                <label class="text-sm text-muted me-sm">Sort by:</label>
                                <select class="form-control" id="sortBy" style="width: auto;">
                                    <option value="relevance">Relevance</option>
                                    <option value="popularity">Popularity</option>
                                    <option value="rating">Rating</option>
                                    <option value="release_date">Release Date</option>
                                    <option value="title">Title</option>
                                </select>
                            </div>
                        </div>

                        <!-- Results Grid -->
                        <div class="content-grid content-grid--movies" id="searchResults">
                            <!-- Initial state -->
                            <div class="empty-state col-span-full">
                                <i class="bi bi-search empty-state__icon"></i>
                                <h2 class="empty-state__title">Start your search</h2>
                                <p class="empty-state__description">
                                    Enter a movie, TV show, or anime title to begin
                                </p>
                            </div>
                        </div>

                        <!-- Loading State -->
                        <div class="d-none" id="loadingState">
                            <div class="spinner mx-auto"></div>
                        </div>

                        <!-- Pagination -->
                        <div class="pagination" id="pagination" style="display: none;">
                            <!-- Dynamic pagination -->
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Mobile Navigation -->
        <nav class="mobile-nav">
            <ul class="mobile-nav__list">
                <li class="mobile-nav__item">
                    <a href="/" class="mobile-nav__link">
                        <i class="bi bi-house mobile-nav__icon"></i>
                        <span>Home</span>
                    </a>
                </li>
                <li class="mobile-nav__item">
                    <a href="/content/search.html" class="mobile-nav__link mobile-nav__link--active">
                        <i class="bi bi-search mobile-nav__icon"></i>
                        <span>Search</span>
                    </a>
                </li>
                <li class="mobile-nav__item">
                    <a href="/content/trending.html" class="mobile-nav__link">
                        <i class="bi bi-fire mobile-nav__icon"></i>
                        <span>Trending</span>
                    </a>
                </li>
                <li class="mobile-nav__item" id="mobileWatchlistItem">
                    <a href="/auth/login.html" class="mobile-nav__link">
                        <i class="bi bi-bookmark mobile-nav__icon"></i>
                        <span>Watchlist</span>
                    </a>
                </li>
                <li class="mobile-nav__item" id="mobileProfileItem">
                    <a href="/auth/login.html" class="mobile-nav__link">
                        <i class="bi bi-person mobile-nav__icon"></i>
                        <span>Profile</span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Scripts -->
    <script src="/assets/js/core/config.js"></script>
    <script src="/assets/js/core/storage.js"></script>
    <script src="/assets/js/core/api.js"></script>
    <script src="/assets/js/core/auth.js"></script>
    <script src="/assets/js/core/router.js"></script>

    <script>
        let currentQuery = '';
        let currentPage = 1;
        let totalPages = 0;
        let searchResults = [];
        let searchTimeout;

        // Initialize page
        document.addEventListener('DOMContentLoaded', () => {
            updateNavigation();
            setupSearch();
            setupFilters();
            loadRecentSearches();

            // Check for query in URL
            const urlParams = new URLSearchParams(window.location.search);
            const query = urlParams.get('query');
            if (query) {
                document.getElementById('searchInput').value = query;
                performSearch(query);
            }
        });

        function updateNavigation() {
            const navbarUser = document.getElementById('navbarUser');
            const mobileWatchlistItem = document.getElementById('mobileWatchlistItem');
            const mobileProfileItem = document.getElementById('mobileProfileItem');

            if (auth.isAuthenticated()) {
                const user = auth.getUser();
                navbarUser.innerHTML = `
                    <a href="${auth.getUserUrl('watchlist')}" class="navbar__link">
                        <i class="bi bi-bookmark"></i>
                    </a>
                    <a href="${auth.getUserUrl('favorites')}" class="navbar__link">
                        <i class="bi bi-heart"></i>
                    </a>
                    <div class="navbar__avatar">
                        <img src="${user.avatar || '/assets/images/default-avatar.png'}" alt="${user.username}">
                    </div>
                `;

                mobileWatchlistItem.innerHTML = `
                    <a href="${auth.getUserUrl('watchlist')}" class="mobile-nav__link">
                        <i class="bi bi-bookmark mobile-nav__icon"></i>
                        <span>Watchlist</span>
                    </a>
                `;

                mobileProfileItem.innerHTML = `
                    <a href="${auth.getUserUrl('profile')}" class="mobile-nav__link">
                        <i class="bi bi-person mobile-nav__icon"></i>
                        <span>Profile</span>
                    </a>
                `;
            } else {
                navbarUser.innerHTML = `
                    <a href="/auth/login.html" class="btn btn-primary">Sign In</a>
                `;
            }
        }

        function setupSearch() {
            const searchInput = document.getElementById('searchInput');
            const clearButton = document.getElementById('clearSearch');

            searchInput.addEventListener('input', (e) => {
                clearTimeout(searchTimeout);
                const query = e.target.value.trim();

                clearButton.style.display = query ? 'block' : 'none';

                if (query.length >= 2) {
                    searchTimeout = setTimeout(() => {
                        performSearch(query);
                    }, Config.DEBOUNCE_DELAY);
                } else if (query.length === 0) {
                    resetSearch();
                }
            });

            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    clearTimeout(searchTimeout);
                    const query = e.target.value.trim();
                    if (query) {
                        performSearch(query);
                    }
                }
            });

            clearButton.addEventListener('click', () => {
                searchInput.value = '';
                clearButton.style.display = 'none';
                resetSearch();
                searchInput.focus();
            });
        }

        function setupFilters() {
            // Genre filter chips
            document.querySelectorAll('.filter-chip').forEach(chip => {
                chip.addEventListener('click', function () {
                    const checkbox = this.querySelector('input[type="checkbox"]');
                    if (checkbox) {
                        checkbox.checked = !checkbox.checked;
                        this.classList.toggle('filter-chip--active', checkbox.checked);
                        if (currentQuery) {
                            performSearch(currentQuery);
                        }
                    }
                });
            });

            // Content type filter
            document.querySelectorAll('input[name="contentType"]').forEach(radio => {
                radio.addEventListener('change', () => {
                    if (currentQuery) {
                        performSearch(currentQuery);
                    }
                });
            });

            // Rating filter
            const ratingFilter = document.getElementById('ratingFilter');
            const ratingValue = document.getElementById('ratingValue');
            ratingFilter.addEventListener('input', (e) => {
                const value = e.target.value;
                ratingValue.textContent = value === '0' ? 'Any' : value;
            });

            ratingFilter.addEventListener('change', () => {
                if (currentQuery) {
                    performSearch(currentQuery);
                }
            });

            // Sort by
            document.getElementById('sortBy').addEventListener('change', () => {
                if (searchResults.length > 0) {
                    sortResults();
                    renderResults();
                }
            });
        }

        async function performSearch(query, page = 1) {
            currentQuery = query;
            currentPage = page;

            // Update URL
            router.updateParams({ query });

            // Add to search history
            Storage.addToSearchHistory(query);

            // Show loading
            showLoading(true);
            document.getElementById('searchSuggestions').style.display = 'none';
            document.getElementById('recentSearches').style.display = 'none';

            try {
                // Get filters
                const contentType = document.querySelector('input[name="contentType"]:checked').value;

                // Perform search
                const response = await api.search(query, contentType, page);

                searchResults = response.results || [];
                totalPages = response.total_pages || 1;

                // Apply client-side filters
                applyFilters();

                // Update UI
                document.getElementById('resultsHeader').style.display = 'flex';
                document.getElementById('resultsCount').textContent =
                    `${response.total_results || 0} result${response.total_results !== 1 ? 's' : ''} for "${query}"`;

                renderResults();
                renderPagination();

            } catch (error) {
                console.error('Search failed:', error);
                showError('Search failed. Please try again.');
            } finally {
                showLoading(false);
            }
        }

        function applyFilters() {
            // Genre filter
            const selectedGenres = Array.from(document.querySelectorAll('input[name="genre"]:checked'))
                .map(cb => cb.value.toLowerCase());

            // Rating filter
            const minRating = parseFloat(document.getElementById('ratingFilter').value);

            // Year filter
            const yearFilter = document.getElementById('yearFilter').value;

            if (selectedGenres.length > 0 || minRating > 0 || yearFilter) {
                searchResults = searchResults.filter(item => {
                    // Genre check
                    if (selectedGenres.length > 0) {
                        const itemGenres = item.genres.map(g => g.toLowerCase());
                        if (!selectedGenres.some(g => itemGenres.includes(g))) {
                            return false;
                        }
                    }

                    // Rating check
                    if (minRating > 0 && (item.rating || 0) < minRating) {
                        return false;
                    }

                    // Year check
                    if (yearFilter && item.release_date) {
                        const year = new Date(item.release_date).getFullYear();
                        if (yearFilter === '2010s' && (year < 2010 || year > 2019)) return false;
                        if (yearFilter === '2000s' && (year < 2000 || year > 2009)) return false;
                        if (yearFilter === '1990s' && (year < 1990 || year > 1999)) return false;
                        if (yearFilter === 'older' && year >= 1990) return false;
                        if (!isNaN(yearFilter) && year !== parseInt(yearFilter)) return false;
                    }

                    return true;
                });
            }
        }

        function sortResults() {
            const sortBy = document.getElementById('sortBy').value;

            switch (sortBy) {
                case 'popularity':
                    searchResults.sort((a, b) => (b.popularity || 0) - (a.popularity || 0));
                    break;
                case 'rating':
                    searchResults.sort((a, b) => (b.rating || 0) - (a.rating || 0));
                    break;
                case 'release_date':
                    searchResults.sort((a, b) => {
                        const dateA = new Date(a.release_date || 0);
                        const dateB = new Date(b.release_date || 0);
                        return dateB - dateA;
                    });
                    break;
                case 'title':
                    searchResults.sort((a, b) => a.title.localeCompare(b.title));
                    break;
                // 'relevance' is default from API
            }
        }

        function renderResults() {
            const resultsGrid = document.getElementById('searchResults');

            if (searchResults.length === 0) {
                resultsGrid.innerHTML = `
                    <div class="empty-state col-span-full">
                        <i class="bi bi-search empty-state__icon"></i>
                        <h2 class="empty-state__title">No results found</h2>
                        <p class="empty-state__description">
                            Try adjusting your search or filters
                        </p>
                    </div>
                `;
                return;
            }

            resultsGrid.innerHTML = searchResults.map((item, index) => `
                <div class="content-card animate-fadeInUp" style="animation-delay: ${Math.min(index * 0.05, 0.3)}s">
                    <div class="content-card__image-wrapper" onclick="navigateToContentDetails(${item.id})">
                        <img src="${item.poster_path || '/assets/images/placeholder-poster.jpg'}" 
                             alt="${item.title}" 
                             class="content-card__image"
                             loading="lazy">
                        ${item.content_type ? `
                            <span class="content-card__badge">${item.content_type.toUpperCase()}</span>
                        ` : ''}
                    </div>
                    <div class="content-card__body">
                        <h3 class="content-card__title">${item.title}</h3>
                        <div class="content-card__meta">
                            <span class="content-card__rating">
                                <i class="bi bi-star-fill content-card__rating-star"></i>
                                ${item.rating || 'N/A'}
                            </span>
                            ${item.release_date ? `
                                <span>${new Date(item.release_date).getFullYear()}</span>
                            ` : ''}
                        </div>
                    </div>
                    <div class="content-card__overlay">
                        <p class="text-sm mb-sm">${item.overview || 'No description available.'}</p>
                        <div class="content-card__actions">
                            ${auth.isAuthenticated() ? `
                                <button class="content-card__action-btn" onclick="event.stopPropagation(); addToWatchlist(${item.id})">
                                    <i class="bi bi-plus"></i> Watchlist
                                </button>
                            ` : ''}
                            ${item.youtube_trailer ? `
                                <button class="content-card__action-btn" onclick="event.stopPropagation(); window.open('${item.youtube_trailer}', '_blank')">
                                    <i class="bi bi-play"></i> Trailer
                                </button>
                            ` : ''}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function renderPagination() {
            const pagination = document.getElementById('pagination');

            if (totalPages <= 1) {
                pagination.style.display = 'none';
                return;
            }

            pagination.style.display = 'flex';

            const maxButtons = 5;
            const halfButtons = Math.floor(maxButtons / 2);
            let startPage = Math.max(1, currentPage - halfButtons);
            let endPage = Math.min(totalPages, startPage + maxButtons - 1);

            if (endPage - startPage < maxButtons - 1) {
                startPage = Math.max(1, endPage - maxButtons + 1);
            }

            let paginationHTML = '';

            // Previous button
            paginationHTML += `
                <button class="pagination__item ${currentPage === 1 ? 'pagination__item--disabled' : ''}" 
                        onclick="changePage(${currentPage - 1})"
                        ${currentPage === 1 ? 'disabled' : ''}>
                    <i class="bi bi-chevron-left"></i>
                </button>
            `;

            // First page
            if (startPage > 1) {
                paginationHTML += `
                    <button class="pagination__item" onclick="changePage(1)">1</button>
                `;
                if (startPage > 2) {
                    paginationHTML += `<span class="pagination__item pagination__item--disabled">...</span>`;
                }
            }

            // Page numbers
            for (let i = startPage; i <= endPage; i++) {
                paginationHTML += `
                    <button class="pagination__item ${i === currentPage ? 'pagination__item--active' : ''}" 
                            onclick="changePage(${i})">${i}</button>
                `;
            }

            // Last page
            if (endPage < totalPages) {
                if (endPage < totalPages - 1) {
                    paginationHTML += `<span class="pagination__item pagination__item--disabled">...</span>`;
                }
                paginationHTML += `
                    <button class="pagination__item" onclick="changePage(${totalPages})">${totalPages}</button>
                `;
            }

            // Next button
            paginationHTML += `
                <button class="pagination__item ${currentPage === totalPages ? 'pagination__item--disabled' : ''}" 
                        onclick="changePage(${currentPage + 1})"
                        ${currentPage === totalPages ? 'disabled' : ''}>
                    <i class="bi bi-chevron-right"></i>
                </button>
            `;

            pagination.innerHTML = paginationHTML;
        }

        function changePage(page) {
            if (page >= 1 && page <= totalPages && page !== currentPage) {
                performSearch(currentQuery, page);
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function resetSearch() {
            currentQuery = '';
            currentPage = 1;
            searchResults = [];

            document.getElementById('searchResults').innerHTML = `
                <div class="empty-state col-span-full">
                    <i class="bi bi-search empty-state__icon"></i>
                    <h2 class="empty-state__title">Start your search</h2>
                    <p class="empty-state__description">
                        Enter a movie, TV show, or anime title to begin
                    </p>
                </div>
            `;

            document.getElementById('resultsHeader').style.display = 'none';
            document.getElementById('pagination').style.display = 'none';
            document.getElementById('searchSuggestions').style.display = 'block';

            loadRecentSearches();
        }

        function resetFilters() {
            // Reset all filters
            document.querySelector('input[name="contentType"][value="multi"]').checked = true;
            document.querySelectorAll('input[name="genre"]:checked').forEach(cb => {
                cb.checked = false;
                cb.closest('.filter-chip').classList.remove('filter-chip--active');
            });
            document.getElementById('ratingFilter').value = 0;
            document.getElementById('ratingValue').textContent = 'Any';
            document.getElementById('yearFilter').value = '';
            document.getElementById('sortBy').value = 'relevance';

            // Re-search if there's a current query
            if (currentQuery) {
                performSearch(currentQuery);
            }
        }

        function loadRecentSearches() {
            const searches = Storage.getSearchHistory();
            if (searches.length > 0) {
                document.getElementById('recentSearches').style.display = 'block';
                document.getElementById('recentSearchesList').innerHTML = searches.map(search => `
                    <button class="filter-chip" onclick="performSearch('${search}')">${search}</button>
                `).join('');
            } else {
                document.getElementById('recentSearches').style.display = 'none';
            }
        }

        async function addToWatchlist(contentId) {
            if (!auth.isAuthenticated()) {
                router.navigate('/auth/login.html');
                return;
            }

            try {
                await api.recordInteraction(contentId, Config.INTERACTIONS.WATCHLIST);
                showToast('Added to watchlist', 'success');
            } catch (error) {
                showToast('Failed to add to watchlist', 'error');
            }
        }

        function showLoading(show) {
            document.getElementById('loadingState').classList.toggle('d-none', !show);
            if (show) {
                document.getElementById('searchResults').innerHTML = '';
            }
        }

        function showError(message) {
            document.getElementById('searchResults').innerHTML = `
                <div class="empty-state col-span-full">
                    <i class="bi bi-exclamation-circle empty-state__icon text-error"></i>
                    <h2 class="empty-state__title">Error</h2>
                    <p class="empty-state__description">${message}</p>
                </div>
            `;
        }

        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `toast toast--${type} animate-slideInRight`;
            toast.innerHTML = `
                <i class="bi bi-${type === 'success' ? 'check-circle' : type === 'error' ? 'x-circle' : 'info-circle'} toast__icon"></i>
                <span class="toast__message">${message}</span>
                <i class="bi bi-x toast__close" onclick="this.parentElement.remove()"></i>
            `;

            document.getElementById('toastContainer').appendChild(toast);
            setTimeout(() => toast.classList.add('toast--visible'), 10);
            setTimeout(() => toast.remove(), 5000);
        }
    </script>
</body>

</html>