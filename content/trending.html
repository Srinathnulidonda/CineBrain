<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>CineBrain - Your Streaming Guide</title>

    <!-- Bootstrap CSS (for TopBar) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- TailwindCSS (for Mobile Nav) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'cinebrain-red': '#E50914',
                        'cinebrain-blue': '#0073E6',
                        'cinebrain-purple': '#8B5CF6',
                        'cinebrain-dark': '#0F0F0F',
                        'cinebrain-darker': '#000000',
                    }
                }
            }
        }
    </script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Inter:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Component CSS Files -->
    <link rel="stylesheet" href="/css/topbar.css">
    <link rel="stylesheet" href="/css/mobile-nav.css">

    <!-- Feather Icons -->
    <script src="https://unpkg.com/feather-icons"></script>

    <!-- Page Specific Styles -->
    <style>
        /* Body padding adjustments for both navigations */
        body {
            font-family: 'Inter', sans-serif;
            background: var(--bs-body-bg, #000);
            color: var(--bs-body-color, #fff);
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }

        /* Desktop view - only top padding for topbar */
        @media (min-width: 768px) {
            body {
                padding-top: var(--navbar-height, 60px);
                padding-bottom: 0;
            }
        }

        /* Mobile view - padding for both top and bottom nav */
        @media (max-width: 767px) {
            body {
                padding-top: var(--navbar-height, 56px);
                padding-bottom: calc(var(--nav-height, 60px) + var(--safe-area-inset-bottom, 0px));
            }
        }

        /* Main content area */
        .main-content {
            min-height: calc(100vh - var(--navbar-height, 60px));
            padding: 20px;
        }

        @media (max-width: 767px) {
            .main-content {
                min-height: calc(100vh - var(--navbar-height, 56px) - var(--nav-height, 60px));
            }
        }

        /* Placeholder content styling */
        .placeholder-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 400px;
            text-align: center;
            padding: 40px 20px;
        }

        .placeholder-content h1 {
            font-size: clamp(2rem, 5vw, 3rem);
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #E50914, #8B5CF6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .placeholder-content p {
            font-size: clamp(1rem, 2vw, 1.25rem);
            color: #888;
            max-width: 600px;
        }
    </style>
</head>

<body>
    <!-- Desktop TopBar Navigation -->
    <nav class="navbar navbar-expand-lg navbar-cinebrain fixed-top">
        <div class="container-fluid">
            <!-- Brand Section -->
            <div class="navbar-brand-wrapper">
                <a href="/" style="text-decoration: none;">
                    <div class="navbar-brand-cinebrain">CineBrain</div>
                    <div class="tagline">
                        <span class="tagline-full">The Mind Behind Your Next Favorite</span>
                        <span class="tagline-medium" style="display: none;">Your Next Favorite</span>
                        <span class="tagline-short" style="display: none;">Next Favorite</span>
                    </div>
                </a>
            </div>

            <!-- Desktop Search (Hidden on Mobile) -->
            <div class="search-container desktop-search">
                <div class="input-group">
                    <span class="input-group-text bg-transparent border-0 ps-2 pe-1">
                        <i data-feather="search" class="text-secondary" style="width: 18px; height: 18px;"></i>
                    </span>
                    <input type="text" class="form-control search-input border-0 ps-1" id="desktopSearchInput"
                        placeholder="Search movies, shows, anime..." autocomplete="off">
                </div>
                <div class="search-results" id="desktopSearchResults"></div>
            </div>

            <!-- Right Section: Icons -->
            <div class="nav-icons-section">
                <!-- Mobile Search Trigger -->
                <button class="icon-button mobile-search-trigger" id="mobileSearchTrigger" aria-label="Search">
                    <i data-feather="search"></i>
                </button>

                <!-- Theme Toggle -->
                <button class="icon-button theme-toggle" id="themeToggle" aria-label="Toggle theme">
                    <i data-feather="sun" class="theme-icon"></i>
                </button>

                <!-- Avatar/User Menu -->
                <div class="dropdown">
                    <div class="avatar-menu" data-bs-toggle="dropdown" aria-expanded="false" id="avatarMenu"
                        role="button">
                        <i data-feather="user"></i>
                    </div>
                    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-cinebrain" id="userDropdown">
                        <!-- Dynamic content inserted by JavaScript -->
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <!-- Mobile Navigation Component -->
    <!-- Include this HTML in your pages where needed -->

    <!-- Quick Loading Overlay -->
    <div class="mobile-nav-loader" id="mobileNavLoader">
        <div class="mobile-nav-spinner"></div>
    </div>

    <!-- Bottom Navigation Bar -->
    <nav class="mobile-bottom-nav" id="mobileBottomNav">
        <div class="mobile-nav-container">
            <!-- Navigation items will be dynamically inserted here -->
        </div>
    </nav>

    <!-- Auth Modal -->
    <div class="mobile-auth-modal" id="mobileAuthModal">
        <div class="mobile-modal-handle"></div>
        <h2 class="mobile-auth-title">TRENDING</h2>
        <p class="mobile-auth-subtitle">The Trending Movies, Anime, TV Series</p>

        <div class="mobile-auth-option" data-route="/auth/login.html">
            <div class="mobile-auth-option-content">
                <div class="mobile-auth-option-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
                        <polyline points="10 17 15 12 10 7"></polyline>
                        <line x1="15" y1="12" x2="3" y2="12"></line>
                    </svg>
                </div>
                <div class="mobile-auth-option-text">
                    <h3>Sign In</h3>
                    <p>Access your existing account</p>
                </div>
            </div>
            <svg class="mobile-auth-option-arrow" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round">
                <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
        </div>

        <div class="mobile-auth-option" data-route="/auth/register.html">
            <div class="mobile-auth-option-content">
                <div class="mobile-auth-option-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="8.5" cy="7" r="4"></circle>
                        <line x1="20" y1="8" x2="20" y2="14"></line>
                        <line x1="23" y1="11" x2="17" y2="11"></line>
                    </svg>
                </div>
                <div class="mobile-auth-option-text">
                    <h3>Create Account</h3>
                    <p>New to CineBrain? Get started</p>
                </div>
            </div>
            <svg class="mobile-auth-option-arrow" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round">
                <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
        </div>

        <div class="mobile-auth-footer">
            <button class="mobile-auth-close" id="mobileAuthClose">Maybe Later</button>
        </div>
    </div>

    <!-- Secondary Actions Menu -->
    <div class="mobile-secondary-menu" id="mobileSecondaryMenu">
        <div class="mobile-modal-handle"></div>
        <div class="mobile-secondary-header">
            <h3>Quick Actions</h3>
            <button class="mobile-secondary-close" id="mobileSecondaryClose">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
        </div>

        <div class="mobile-quick-actions-grid" id="mobileQuickActionsGrid">
            <!-- Quick actions will be loaded here -->
        </div>
    </div>

    <!-- Context Menu -->
    <div class="mobile-context-menu" id="mobileContextMenu">
        <!-- Context menu items will be dynamically inserted -->
    </div>

    <!-- Bootstrap JS (for TopBar dropdown) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Component JavaScript Files -->
    <script src="/js/topbar.js"></script>
    <script src="/js/movie-nav.js"></script>

    <!-- Initialization Script -->
    <script>
        // Wait for both components to load
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize Feather icons
            if (typeof feather !== 'undefined') {
                feather.replace();
            }

            // Sync theme between components
            setTimeout(() => {
                const syncTheme = () => {
                    const currentTheme = localStorage.getItem('cinebrain-theme') || 'dark';
                    document.documentElement.setAttribute('data-theme', currentTheme);
                };

                // Initial sync
                syncTheme();

                // Override theme toggle functions to sync both components
                if (window.topbar && window.mobileNav) {
                    const originalTopbarToggle = window.topbar.toggleTheme.bind(window.topbar);
                    window.topbar.toggleTheme = () => {
                        originalTopbarToggle();
                        syncTheme();
                    };

                    const originalMobileToggle = window.mobileNav.toggleTheme.bind(window.mobileNav);
                    window.mobileNav.toggleTheme = () => {
                        originalMobileToggle();
                        syncTheme();
                        if (window.topbar && window.topbar.setTheme) {
                            const theme = localStorage.getItem('cinebrain-theme') || 'dark';
                            window.topbar.setTheme(theme);
                        }
                    };
                }
            }, 100);
        });
    </script>
</body>

</html>