<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Regional Cinema - CineScope</title>

    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <link href="/css/base.css" rel="stylesheet">
    <link href="/css/bootstrap-overrides.css" rel="stylesheet">
    <link href="/css/tailwind.css" rel="stylesheet">
    <link href="/css/animation.css" rel="stylesheet">
    <link href="/css/responsive.css" rel="stylesheet">
    <link href="/css/utilities.css" rel="stylesheet">
</head>

<body>
    <div class="app-container">
        <!-- Desktop Sidebar -->
        <div id="sidebar-container"></div>

        <!-- Main Content -->
        <main class="main-content">
            <div class="container-fluid">
                <!-- Header -->
                <div class="mb-4">
                    <h1 class="tw-text-3xl tw-font-bold mb-3">
                        <i class="bi bi-globe text-primary"></i> Regional Cinema
                    </h1>
                    <p class="text-muted">Explore movies and shows from different languages and cultures</p>
                </div>

                <!-- Language Selection -->
                <div class="row g-4 mb-5">
                    <div class="col-6 col-md-4">
                        <div class="card h-100 hover-lift cursor-pointer" onclick="selectLanguage('english')">
                            <div class="card-body text-center py-4">
                                <div class="mb-3">
                                    <img src="https://flagcdn.com/48x36/us.png" alt="English" class="mb-2">
                                </div>
                                <h5 class="mb-1">English</h5>
                                <small class="text-muted">Hollywood</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-6 col-md-4">
                        <div class="card h-100 hover-lift cursor-pointer" onclick="selectLanguage('hindi')">
                            <div class="card-body text-center py-4">
                                <div class="mb-3">
                                    <img src="https://flagcdn.com/48x36/in.png" alt="Hindi" class="mb-2">
                                </div>
                                <h5 class="mb-1">Hindi</h5>
                                <small class="text-muted">Bollywood</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-6 col-md-4">
                        <div class="card h-100 hover-lift cursor-pointer" onclick="selectLanguage('telugu')">
                            <div class="card-body text-center py-4">
                                <div class="mb-3">
                                    <span style="font-size: 2.5rem;">తె</span>
                                </div>
                                <h5 class="mb-1">Telugu</h5>
                                <small class="text-muted">Tollywood</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-6 col-md-4">
                        <div class="card h-100 hover-lift cursor-pointer" onclick="selectLanguage('tamil')">
                            <div class="card-body text-center py-4">
                                <div class="mb-3">
                                    <span style="font-size: 2.5rem;">த</span>
                                </div>
                                <h5 class="mb-1">Tamil</h5>
                                <small class="text-muted">Kollywood</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-6 col-md-4">
                        <div class="card h-100 hover-lift cursor-pointer" onclick="selectLanguage('malayalam')">
                            <div class="card-body text-center py-4">
                                <div class="mb-3">
                                    <span style="font-size: 2.5rem;">മ</span>
                                </div>
                                <h5 class="mb-1">Malayalam</h5>
                                <small class="text-muted">Mollywood</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-6 col-md-4">
                        <div class="card h-100 hover-lift cursor-pointer" onclick="selectLanguage('kannada')">
                            <div class="card-body text-center py-4">
                                <div class="mb-3">
                                    <span style="font-size: 2.5rem;">ಕ</span>
                                </div>
                                <h5 class="mb-1">Kannada</h5>
                                <small class="text-muted">Sandalwood</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Language Content Section -->
                <div id="languageContent" class="d-none">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h2 class="h3 mb-0">
                            <span id="languageTitle"></span> Cinema
                        </h2>
                        <button class="btn btn-outline-secondary" onclick="clearLanguage()">
                            <i class="bi bi-arrow-left"></i> Back to Languages
                        </button>
                    </div>

                    <!-- Language Stats -->
                    <div class="row g-3 mb-4" id="languageStats">
                        <div class="col-md-3">
                            <div class="card bg-primary text-white">
                                <div class="card-body">
                                    <h6 class="card-title">Total Movies</h6>
                                    <h3 class="mb-0" id="totalMovies">-</h3>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card bg-success text-white">
                                <div class="card-body">
                                    <h6 class="card-title">New This Month</h6>
                                    <h3 class="mb-0" id="newReleases">-</h3>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card bg-warning text-dark">
                                <div class="card-body">
                                    <h6 class="card-title">Top Rated</h6>
                                    <h3 class="mb-0" id="topRated">-</h3>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card bg-info text-white">
                                <div class="card-body">
                                    <h6 class="card-title">Popular Now</h6>
                                    <h3 class="mb-0" id="popularNow">-</h3>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Content Grid -->
                    <div class="row g-4" id="languageGrid">
                        <div class="col-12 text-center">
                            <div class="spinner-border text-primary" role="status"></div>
                        </div>
                    </div>
                </div>

                <!-- Featured Regional Content -->
                <section id="featuredSection">
                    <h2 class="h3 mb-4">Featured Regional Content</h2>

                    <!-- Hindi Section -->
                    <div class="mb-5">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h4>Hindi Cinema</h4>
                            <a href="#" onclick="selectLanguage('hindi')" class="text-primary">View All</a>
                        </div>
                        <div class="row g-4" id="hindiGrid">
                            <div class="col-12 text-center text-muted">Loading...</div>
                        </div>
                    </div>

                    <!-- Telugu Section -->
                    <div class="mb-5">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h4>Telugu Cinema</h4>
                            <a href="#" onclick="selectLanguage('telugu')" class="text-primary">View All</a>
                        </div>
                        <div class="row g-4" id="teluguGrid">
                            <div class="col-12 text-center text-muted">Loading...</div>
                        </div>
                    </div>

                    <!-- Tamil Section -->
                    <div class="mb-5">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h4>Tamil Cinema</h4>
                            <a href="#" onclick="selectLanguage('tamil')" class="text-primary">View All</a>
                        </div>
                        <div class="row g-4" id="tamilGrid">
                            <div class="col-12 text-center text-muted">Loading...</div>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <!-- Mobile Navigation -->
        <div id="mobile-nav-container"></div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container"></div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/config.js"></script>
    <script src="/js/storage.js"></script>
    <script src="/js/http.js"></script>
    <script src="/js/ui.js"></script>
    <script src="/js/app.js"></script>

    <!-- Page specific JS -->
    <script>
        let currentLanguage = null;

        // Initialize page
        async function pageInit() {
            // Load featured content for each language
            loadFeaturedContent();

            // Check URL for language parameter
            const urlParams = new URLSearchParams(window.location.search);
            const language = urlParams.get('language');
            if (language) {
                selectLanguage(language);
            }
        }

        async function loadFeaturedContent() {
            // Load Hindi content
            loadLanguagePreview('hindi', 'hindiGrid');

            // Load Telugu content
            loadLanguagePreview('telugu', 'teluguGrid');

            // Load Tamil content
            loadLanguagePreview('tamil', 'tamilGrid');
        }

        async function loadLanguagePreview(language, gridId) {
            try {
                const data = await api.content.getRegional(language, 'movie', 4);
                const grid = document.getElementById(gridId);

                if (data.recommendations && data.recommendations.length > 0) {
                    grid.innerHTML = UI.createContentGrid(data.recommendations);
                } else {
                    grid.innerHTML = '<div class="col-12 text-center text-muted">No content found</div>';
                }
            } catch (error) {
                console.error(`Error loading ${language} content:`, error);
                document.getElementById(gridId).innerHTML =
                    '<div class="col-12 text-center text-danger">Failed to load content</div>';
            }
        }

        async function selectLanguage(language) {
            currentLanguage = language;

            // Update URL
            const url = new URL(window.location);
            url.searchParams.set('language', language);
            window.history.pushState({}, '', url);

            // Update UI
            document.getElementById('languageContent').classList.remove('d-none');
            document.getElementById('featuredSection').classList.add('d-none');
            document.querySelector('.row.g-4.mb-5').classList.add('d-none');

            // Set language title
            const languageNames = {
                english: 'English',
                hindi: 'Hindi',
                telugu: 'Telugu',
                tamil: 'Tamil',
                malayalam: 'Malayalam',
                kannada: 'Kannada'
            };
            document.getElementById('languageTitle').textContent = languageNames[language] || language;

            // Load language content
            await loadLanguageContent(language);

            // Update stats
            updateLanguageStats(language);

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        async function loadLanguageContent(language) {
            const grid = document.getElementById('languageGrid');
            grid.innerHTML = '<div class="col-12 text-center"><div class="spinner-border text-primary" role="status"></div></div>';

            try {
                const data = await api.content.getRegional(language, 'movie', 20);

                if (data.recommendations && data.recommendations.length > 0) {
                    grid.innerHTML = UI.createContentGrid(data.recommendations);
                } else {
                    grid.innerHTML = '<div class="col-12 text-center text-muted">No content found for this language</div>';
                }
            } catch (error) {
                console.error(`Error loading ${language} content:`, error);
                grid.innerHTML = '<div class="col-12 text-center text-danger">Failed to load content</div>';
            }
        }

        async function updateLanguageStats(language) {
            // These would normally come from a dedicated stats endpoint
            // For now, we'll use placeholder data
            const stats = {
                english: { total: '1000+', new: '50+', top: '9.2', popular: '95%' },
                hindi: { total: '800+', new: '40+', top: '8.9', popular: '92%' },
                telugu: { total: '600+', new: '35+', top: '8.7', popular: '88%' },
                tamil: { total: '700+', new: '38+', top: '8.8', popular: '90%' },
                malayalam: { total: '400+', new: '20+', top: '9.0', popular: '85%' },
                kannada: { total: '300+', new: '15+', top: '8.5', popular: '80%' }
            };

            const langStats = stats[language] || { total: '-', new: '-', top: '-', popular: '-' };

            document.getElementById('totalMovies').textContent = langStats.total;
            document.getElementById('newReleases').textContent = langStats.new;
            document.getElementById('topRated').textContent = langStats.top;
            document.getElementById('popularNow').textContent = langStats.popular;
        }

        function clearLanguage() {
            currentLanguage = null;

            // Update URL
            const url = new URL(window.location);
            url.searchParams.delete('language');
            window.history.pushState({}, '', url);

            // Update UI
            document.getElementById('languageContent').classList.add('d-none');
            document.getElementById('featuredSection').classList.remove('d-none');
            document.querySelector('.row.g-4.mb-5').classList.remove('d-none');

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Set pageInit for App.js
        window.pageInit = pageInit;
    </script>
</body>

</html>