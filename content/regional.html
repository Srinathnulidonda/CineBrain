<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Browse regional movies and TV shows on CineScope">

    <title>Regional Content - CineScope</title>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/base.css">
    <link rel="stylesheet" href="/css/bootstrap-overrides.css">
    <link rel="stylesheet" href="/css/animation.css">
    <link rel="stylesheet" href="/css/responsive.css">

    <style>
        .regional-hero {
            padding: 4rem 0;
            margin-bottom: 3rem;
            position: relative;
            overflow: hidden;
        }

        .regional-hero.hindi {
            background: linear-gradient(135deg, #fd7e14 0%, #dc3545 100%);
        }

        .regional-hero.telugu {
            background: linear-gradient(135deg, #ffc107 0%, #fd7e14 100%);
        }

        .regional-hero.tamil {
            background: linear-gradient(135deg, #6f42c1 0%, #e83e8c 100%);
        }

        .regional-hero.kannada {
            background: linear-gradient(135deg, #198754 0%, #20c997 100%);
        }

        .regional-hero.malayalam {
            background: linear-gradient(135deg, #0dcaf0 0%, #6f42c1 100%);
        }

        .regional-hero.english {
            background: linear-gradient(135deg, #0d6efd 0%, #0dcaf0 100%);
        }

        .regional-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 80px;
            height: 80px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            margin-bottom: 1rem;
        }

        .regional-card {
            background: var(--cs-surface-light);
            border: 1px solid var(--cs-border);
            border-radius: 1rem;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .regional-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--cs-shadow-md);
        }
    </style>
</head>

<body class="bg-black">
    <!-- Layout Container -->
    <div id="app-container">
        <!-- Top Bar Container (Desktop) -->
        <div id="topbar-container" class="d-none d-lg-block"></div>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Regional Hero Section -->
            <section class="regional-hero" id="regional-hero">
                <div class="container-fluid">
                    <div class="text-center text-white">
                        <div class="regional-icon">
                            <i class="bi bi-globe display-4"></i>
                        </div>
                        <h1 class="display-4 fw-bold mb-3" id="regional-title">Regional Content</h1>
                        <p class="lead mb-4" id="regional-description">Discover movies and shows from around the world
                        </p>
                    </div>
                </div>
            </section>

            <div class="container-fluid">
                <!-- Language Selection -->
                <section class="mb-5">
                    <h3 class="text-white mb-4">
                        <i class="bi bi-globe text-primary me-2"></i>Select Language
                    </h3>
                    <div class="row g-3 mb-4" id="language-container">
                        <div class="col-6 col-md-4 col-lg-2">
                            <div class="regional-card text-center p-3 rounded" data-language="english">
                                <i class="bi bi-globe-americas display-6 text-primary mb-2"></i>
                                <h6 class="text-white mb-1">English</h6>
                                <p class="text-muted small mb-0">Hollywood</p>
                            </div>
                        </div>
                        <div class="col-6 col-md-4 col-lg-2">
                            <div class="regional-card text-center p-3 rounded" data-language="hindi">
                                <i class="bi bi-globe-asia-australia display-6 text-warning mb-2"></i>
                                <h6 class="text-white mb-1">Hindi</h6>
                                <p class="text-muted small mb-0">Bollywood</p>
                            </div>
                        </div>
                        <div class="col-6 col-md-4 col-lg-2">
                            <div class="regional-card text-center p-3 rounded" data-language="telugu">
                                <i class="bi bi-globe-asia-australia display-6 text-success mb-2"></i>
                                <h6 class="text-white mb-1">Telugu</h6>
                                <p class="text-muted small mb-0">Tollywood</p>
                            </div>
                        </div>
                        <div class="col-6 col-md-4 col-lg-2">
                            <div class="regional-card text-center p-3 rounded" data-language="tamil">
                                <i class="bi bi-globe-asia-australia display-6 text-danger mb-2"></i>
                                <h6 class="text-white mb-1">Tamil</h6>
                                <p class="text-muted small mb-0">Kollywood</p>
                            </div>
                        </div>
                        <div class="col-6 col-md-4 col-lg-2">
                            <div class="regional-card text-center p-3 rounded" data-language="kannada">
                                <i class="bi bi-globe-asia-australia display-6 text-info mb-2"></i>
                                <h6 class="text-white mb-1">Kannada</h6>
                                <p class="text-muted small mb-0">Sandalwood</p>
                            </div>
                        </div>
                        <div class="col-6 col-md-4 col-lg-2">
                            <div class="regional-card text-center p-3 rounded" data-language="malayalam">
                                <i class="bi bi-globe-asia-australia display-6 text-purple mb-2"></i>
                                <h6 class="text-white mb-1">Malayalam</h6>
                                <p class="text-muted small mb-0">Mollywood</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Content Grid -->
                <div id="regional-content-container">
                    <!-- Loading state -->
                    <div class="d-flex justify-content-center py-5">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                    </div>
                </div>

                <!-- Load More -->
                <div class="text-center py-4 d-none" id="load-more-container">
                    <button class="btn btn-outline-primary" id="load-more-btn">
                        <i class="bi bi-arrow-down me-2"></i>Load More
                    </button>
                </div>
            </div>
        </main>

        <!-- Mobile Navigation Container -->
        <div id="mobile-nav-container" class="d-lg-none"></div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Core JavaScript -->
    <script src="/js/config.js"></script>
    <script src="/js/storage.js"></script>
    <script src="/js/http.js"></script>
    <script src="/js/ui.js"></script>
    <script src="/js/app.js"></script>

    <!-- Widget Scripts -->
    <script src="/widgets/content-card.html"></script>

    <!-- Page Script -->
    <script>
        let currentLanguage = '';
        let currentPage = 1;
        let hasMore = true;

        document.addEventListener('DOMContentLoaded', function () {
            console.log('🌍 Loading Regional Content Page...');

            // Set page title
            CineScope.UI.updatePageTitle('Regional Content');

            // Initialize language selection
            initializeLanguageSelection();

            // Initialize load more
            initializeLoadMore();

            console.log('✅ Regional page loaded');
        });

        function initializeLanguageSelection() {
            const languageCards = document.querySelectorAll('[data-language]');

            languageCards.forEach(card => {
                card.addEventListener('click', function () {
                    // Update active state
                    languageCards.forEach(c => c.classList.remove('active'));
                    this.classList.add('active');

                    // Set current language
                    currentLanguage = this.dataset.language;
                    currentPage = 1;

                    // Update hero
                    updateHero(currentLanguage);

                    // Load content
                    loadRegionalContent();
                });
            });

            // Select first language by default
            const firstCard = languageCards[0];
            if (firstCard) {
                firstCard.click();
            }
        }

        function updateHero(language) {
            const hero = document.getElementById('regional-hero');
            const title = document.getElementById('regional-title');
            const description = document.getElementById('regional-description');

            hero.className = `regional-hero ${language}`;
            title.textContent = language.charAt(0).toUpperCase() + language.slice(1);
            description.textContent = `Discover the best in ${language} entertainment`;
        }

        async function loadRegionalContent(append = false) {
            if (!currentLanguage) return;

            const container = document.getElementById('regional-content-container');

            if (!append) {
                container.innerHTML = `
                    <div class="d-flex justify-content-center py-5">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                    </div>
                `;
            }

            try {
                const response = await CineScope.HTTP.content.getRegional(currentLanguage, { page: currentPage, limit: 24 });
                const content = response.recommendations || [];

                hasMore = content.length === 24;

                if (append) {
                    CineScope.Widgets.ContentCard.createGrid(content, container, { append: true });
                } else {
                    CineScope.Widgets.ContentCard.createGrid(content, container);
                }

                document.getElementById('load-more-container').classList.toggle('d-none', !hasMore);

            } catch (error) {
                console.error('Failed to load regional content:', error);
                container.innerHTML = '<p class="text-danger text-center">Failed to load content</p>';
            }
        }

        function initializeLoadMore() {
            document.getElementById('load-more-btn').addEventListener('click', function () {
                currentPage++;
                loadRegionalContent(true);
            });
        }
    </script>
</body>

</html>