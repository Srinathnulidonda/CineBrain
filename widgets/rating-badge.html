<!-- CineScope Rating Badge Widget -->
<template id="rating-badge-template">
    <span class="badge rating-badge bg-primary rounded-pill">
        <i class="bi bi-star-fill me-1"></i>
        <span class="rating-value">0.0</span>
    </span>
</template>

<style>
    .rating-badge {
        font-size: 0.875rem;
        padding: 0.25rem 0.75rem;
        background: var(--cs-gradient-primary) !important;
        color: white;
        box-shadow: var(--cs-shadow-sm);
        transition: all 0.2s ease;
    }

    .rating-badge:hover {
        transform: scale(1.05);
    }

    .rating-badge.low {
        background: linear-gradient(135deg, #dc3545 0%, #fd7e14 100%) !important;
    }

    .rating-badge.medium {
        background: linear-gradient(135deg, #ffc107 0%, #fd7e14 100%) !important;
    }

    .rating-badge.high {
        background: linear-gradient(135deg, #28a745 0%, #20c997 100%) !important;
    }
</style>

<script>
    window.CineScope = window.CineScope || {};
    window.CineScope.Widgets = window.CineScope.Widgets || {};

    window.CineScope.Widgets.RatingBadge = {
        create(rating, options = {}) {
            const { size = 'normal', showIcon = true } = options;

            const template = document.getElementById('rating-badge-template');
            if (!template) return null;

            const badge = template.content.cloneNode(true).querySelector('.rating-badge');

            // Set rating value
            const ratingValue = badge.querySelector('.rating-value');
            ratingValue.textContent = CineScope.utils.formatRating(rating);

            // Set color class
            if (rating < 5) {
                badge.classList.add('low');
            } else if (rating < 7) {
                badge.classList.add('medium');
            } else {
                badge.classList.add('high');
            }

            // Size
            if (size === 'small') {
                badge.style.fontSize = '0.75rem';
                badge.style.padding = '0.125rem 0.5rem';
            } else if (size === 'large') {
                badge.style.fontSize = '1rem';
                badge.style.padding = '0.375rem 1rem';
            }

            // Icon
            if (!showIcon) {
                badge.querySelector('i').remove();
            }

            return badge;
        }
    };
</script>