<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MovieRec - Personalized Movie & TV Recommendations</title>
    
    <!-- Meta tags for SEO and PWA -->
    <meta name="description" content="Discover your next favorite movie or TV show with personalized recommendations">
    <meta name="theme-color" content="#1a1a2e">
    <link rel="manifest" href="/manifest.json">
    
    <!-- Preconnect to external domains -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://image.tmdb.org">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Bootstrap CSS (Grid Only) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-grid@5.3.0/dist/css/bootstrap-grid.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/styles.css">
    
    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#e94560',
                        secondary: '#0f3460',
                        dark: '#1a1a2e',
                        accent: '#16213e'
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-dark text-white">
    <!-- Navigation -->
    <nav class="navbar sticky-top bg-accent shadow-lg" id="navbar">
        <div class="container">
            <div class="row w-100 align-items-center">
                <div class="col-6 col-md-3">
                    <a href="/" class="flex items-center space-x-2 text-white no-underline">
                        <i class="fas fa-film text-primary text-2xl"></i>
                        <span class="text-xl font-bold">MovieRec</span>
                    </a>
                </div>
                <div class="col-6 col-md-6 d-none d-md-block">
                    <div class="search-container">
                        <input type="text" id="searchInput" class="search-input" placeholder="Search movies, TV shows, anime...">
                        <button class="search-btn" onclick="performSearch()">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </div>
                <div class="col-6 col-md-3 text-end">
                    <div class="flex items-center justify-end space-x-4">
                        <button class="icon-btn d-md-none" onclick="toggleMobileSearch()">
                            <i class="fas fa-search"></i>
                        </button>
                        <button class="icon-btn" onclick="toggleTheme()">
                            <i class="fas fa-moon" id="themeIcon"></i>
                        </button>
                        <div id="authButtons" class="flex items-center space-x-2">
                            <!-- Auth buttons will be inserted here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Mobile Search -->
    <div id="mobileSearch" class="mobile-search hidden">
        <input type="text" id="mobileSearchInput" class="search-input" placeholder="Search...">
    </div>

    <!-- Hero Section -->
    <section id="heroSection" class="hero-section">
        <div class="hero-overlay"></div>
        <div class="container hero-content">
            <div class="row">
                <div class="col-12 col-md-8 col-lg-6">
                    <h1 class="hero-title">Discover Your Next Favorite</h1>
                    <p class="hero-subtitle">Get personalized recommendations for movies, TV shows, and anime</p>
                    <div class="hero-buttons">
                        <button class="btn-primary" onclick="scrollToRecommendations()">
                            Explore Now <i class="fas fa-arrow-down ml-2"></i>
                        </button>
                        <button class="btn-secondary" onclick="showSignupModal()">
                            Get Personalized <i class="fas fa-user ml-2"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Trending Section -->
    <section class="content-section">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-fire text-primary mr-2"></i>Trending Now
                </h2>
                <button class="view-all-btn" onclick="loadMore('trending')">
                    View All <i class="fas fa-chevron-right ml-1"></i>
                </button>
            </div>
            <div class="content-slider" id="trendingSlider">
                <div class="slider-container" id="trendingContainer">
                    <!-- Content cards will be loaded here -->
                </div>
                <button class="slider-btn slider-prev" onclick="slide('trending', 'prev')">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button class="slider-btn slider-next" onclick="slide('trending', 'next')">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>
    </section>

    <!-- Categories -->
    <section class="content-section bg-accent">
        <div class="container">
            <h2 class="section-title text-center mb-4">Browse by Category</h2>
            <div class="row g-3" id="categoriesGrid">
                <!-- Categories will be loaded here -->
            </div>
        </div>
    </section>

    <!-- Recommendations Grid -->
    <section class="content-section" id="recommendationsSection">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <ul class="nav nav-tabs recommendation-tabs" role="tablist">
                        <li class="nav-item">
                            <button class="nav-link active" data-tab="forYou" onclick="switchTab('forYou')">
                                For You
                            </button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" data-tab="popular" onclick="switchTab('popular')">
                                Popular
                            </button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" data-tab="topRated" onclick="switchTab('topRated')">
                                Top Rated
                            </button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" data-tab="newReleases" onclick="switchTab('newReleases')">
                                New Releases
                            </button>
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="tab-content mt-4">
                <div class="row g-3" id="contentGrid">
                    <!-- Content cards will be loaded here -->
                </div>
            </div>
            
            <!-- Load More -->
            <div class="text-center mt-5">
                <button class="btn-primary" onclick="loadMoreContent()" id="loadMoreBtn">
                    Load More <i class="fas fa-spinner fa-spin ml-2 hidden" id="loadingSpinner"></i>
                </button>
            </div>
        </div>
    </section>

    <!-- Regional Content -->
    <section class="content-section bg-accent">
        <div class="container">
            <h2 class="section-title text-center mb-4">Regional Cinema</h2>
            <div class="row g-4">
                <div class="col-6 col-md-3">
                    <div class="regional-card" onclick="filterByRegion('hindi')">
                        <div class="regional-icon">ðŸŽ¬</div>
                        <h3>Hindi</h3>
                    </div>
                </div>
                <div class="col-6 col-md-3">
                    <div class="regional-card" onclick="filterByRegion('telugu')">
                        <div class="regional-icon">ðŸŽ­</div>
                        <h3>Telugu</h3>
                    </div>
                </div>
                <div class="col-6 col-md-3">
                    <div class="regional-card" onclick="filterByRegion('tamil')">
                        <div class="regional-icon">ðŸŽª</div>
                        <h3>Tamil</h3>
                    </div>
                </div>
                <div class="col-6 col-md-3">
                    <div class="regional-card" onclick="filterByRegion('kannada')">
                        <div class="regional-icon">ðŸŽ¨</div>
                        <h3>Kannada</h3>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer bg-accent mt-5">
        <div class="container">
            <div class="row">
                <div class="col-12 col-md-4 mb-4">
                    <h3 class="text-primary mb-3">MovieRec</h3>
                    <p class="text-gray-400">Your personalized entertainment discovery platform</p>
                    <div class="social-links">
                        <a href="#" class="social-link"><i class="fab fa-facebook"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
                <div class="col-6 col-md-2 mb-4">
                    <h4 class="mb-3">Browse</h4>
                    <ul class="footer-links">
                        <li><a href="/movies">Movies</a></li>
                        <li><a href="/tv-shows">TV Shows</a></li>
                        <li><a href="/anime">Anime</a></li>
                        <li><a href="/trending">Trending</a></li>
                    </ul>
                </div>
                <div class="col-6 col-md-2 mb-4">
                    <h4 class="mb-3">Genres</h4>
                    <ul class="footer-links">
                        <li><a href="/genre/action">Action</a></li>
                        <li><a href="/genre/comedy">Comedy</a></li>
                        <li><a href="/genre/drama">Drama</a></li>
                        <li><a href="/genre/horror">Horror</a></li>
                    </ul>
                </div>
                <div class="col-12 col-md-4 mb-4">
                    <h4 class="mb-3">Stay Updated</h4>
                    <p class="text-gray-400 mb-3">Get the latest recommendations and updates</p>
                    <form class="newsletter-form" onsubmit="subscribeNewsletter(event)">
                        <input type="email" placeholder="Your email" required>
                        <button type="submit">Subscribe</button>
                    </form>
                </div>
            </div>
            <hr class="border-gray-700 my-4">
            <div class="text-center text-gray-400">
                <p>&copy; 2024 MovieRec. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Content Modal -->
    <div id="contentModal" class="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal()">&times;</span>
            <div id="modalContent">
                <!-- Dynamic content will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Login/Signup Modal -->
    <div id="authModal" class="modal">
        <div class="modal-content auth-modal">
            <span class="modal-close" onclick="closeAuthModal()">&times;</span>
            <div class="auth-container">
                <h2 id="authTitle">Sign In</h2>
                <form id="authForm" onsubmit="handleAuth(event)">
                    <div class="form-group">
                        <input type="text" id="username" placeholder="Username" required>
                    </div>
                    <div class="form-group" id="emailGroup" style="display: none;">
                        <input type="email" id="email" placeholder="Email">
                    </div>
                    <div class="form-group">
                        <input type="password" id="password" placeholder="Password" required>
                    </div>
                    <button type="submit" class="btn-primary w-full" id="authSubmitBtn">
                        Sign In
                    </button>
                </form>
                <p class="auth-switch">
                    <span id="authSwitchText">Don't have an account?</span>
                    <a href="#" onclick="toggleAuthMode()" id="authSwitchLink">Sign Up</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <!-- Scripts -->
    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/components.js"></script>
    <script src="js/app.js"></script>
    
    <!-- Register Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(reg => console.log('Service Worker registered'))
                    .catch(err => console.error('Service Worker registration failed'));
            });
        }
    </script>
</body>
</html>