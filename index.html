<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CineScope - Discover Amazing Movies, TV Shows & Anime</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Discover trending movies, TV shows, and anime with personalized recommendations. Your ultimate entertainment platform.">
    <meta name="keywords" content="movies, tv shows, anime, recommendations, streaming, entertainment">
    <meta name="author" content="CineScope">
    
    <!-- Open Graph -->
    <meta property="og:title" content="CineScope - Your Ultimate Entertainment Platform">
    <meta property="og:description" content="Discover trending movies, TV shows, and anime with personalized recommendations.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://your-domain.com">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/assets/icons/favicon.ico">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- Stylesheets -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="/css/main.css" rel="stylesheet">
    <link href="/css/components.css" rel="stylesheet">
    <link href="/css/responsive.css" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <div id="navigation-container" data-include="header"></div>
    
    <!-- Hero Section -->
    <main class="main-content">
        <section class="hero">
            <div class="hero-content">
                <h1 class="hero-title">Discover Your Next Favorite</h1>
                <p class="hero-subtitle">
                    Explore trending movies, binge-worthy TV shows, and captivating anime 
                    with personalized recommendations just for you.
                </p>
                <div class="hero-actions">
                    <a href="/categories/trending" class="btn btn-primary">
                        <i class="fas fa-fire"></i> Explore Trending
                    </a>
                    <a href="/login" class="btn btn-outline guest-only">
                        <i class="fas fa-user"></i> Sign In for Recommendations
                    </a>
                    <a href="/dashboard" class="btn btn-outline auth-required" style="display: none;">
                        <i class="fas fa-tachometer-alt"></i> Go to Dashboard
                    </a>
                </div>
            </div>
        </section>
        
        <!-- Trending Section -->
        <section class="section">
            <div class="container">
                <div class="section-header">
                    <div>
                        <h2 class="section-title">Trending Now</h2>
                        <p class="section-subtitle">What everyone's watching this week</p>
                    </div>
                    <a href="/categories/trending" class="btn btn-ghost">View All</a>
                </div>
                <div id="trending-grid" class="content-grid">
                    <!-- Skeleton loaders will be shown initially -->
                </div>
            </div>
        </section>
        
        <!-- New Releases Section -->
        <section class="section">
            <div class="container">
                <div class="section-header">
                    <div>
                        <h2 class="section-title">New Releases</h2>
                        <p class="section-subtitle">Fresh content added this month</p>
                    </div>
                    <a href="/categories/new-releases" class="btn btn-ghost">View All</a>
                </div>
                <div id="new-releases-grid" class="content-grid">
                    <!-- Content will be loaded here -->
                </div>
            </div>
        </section>
        
        <!-- Critics' Choice Section -->
        <section class="section">
            <div class="container">
                <div class="section-header">
                    <div>
                        <h2 class="section-title">Critics' Choice</h2>
                        <p class="section-subtitle">Highly rated and critically acclaimed</p>
                    </div>
                    <a href="/categories/critic-choices" class="btn btn-ghost">View All</a>
                </div>
                <div id="critics-choice-grid" class="content-grid">
                    <!-- Content will be loaded here -->
                </div>
            </div>
        </section>
        
        <!-- Categories Preview -->
        <section class="section">
            <div class="container">
                <div class="section-header">
                    <div>
                        <h2 class="section-title">Browse by Category</h2>
                        <p class="section-subtitle">Find content that matches your mood</p>
                    </div>
                </div>
                <div class="categories-grid">
                    <a href="/categories/movies" class="category-card">
                        <div class="category-icon">
                            <i class="fas fa-film"></i>
                        </div>
                        <h3>Movies</h3>
                        <p>Blockbusters to indie films</p>
                    </a>
                    <a href="/categories/tv-shows" class="category-card">
                        <div class="category-icon">
                            <i class="fas fa-tv"></i>
                        </div>
                        <h3>TV Shows</h3>
                        <p>Series and documentaries</p>
                    </a>
                    <a href="/categories/anime" class="category-card">
                        <div class="category-icon">
                            <i class="fas fa-dragon"></i>
                        </div>
                        <h3>Anime</h3>
                        <p>From shounen to seinen</p>
                    </a>
                </div>
            </div>
        </section>
        
        <!-- Anonymous Recommendations (for non-logged users) -->
        <section class="section guest-only">
            <div class="container">
                <div class="section-header">
                    <div>
                        <h2 class="section-title">Recommended for You</h2>
                        <p class="section-subtitle">Based on popular trends and your browsing</p>
                    </div>
                </div>
                <div id="anonymous-recommendations-grid" class="content-grid">
                    <!-- Content will be loaded here -->
                </div>
            </div>
        </section>
    </main>
    
    <!-- Footer -->
    <div data-include="footer"></div>
    
    <!-- Global Loader -->
    <div id="global-loader">
        <div class="loader">
            <div class="loader-spinner"></div>
            <div class="loader-text">Loading...</div>
        </div>
    </div>
    
    <!-- Notification Container -->
    <div id="notification-container"></div>
    
    <!-- Scripts -->
    <script src="/js/main.js"></script>
    
    <script>
        // Page-specific functionality
        document.addEventListener('DOMContentLoaded', async function() {
            // Show skeleton loaders
            app.showSkeletonLoader(document.getElementById('trending-grid'), 6);
            app.showSkeletonLoader(document.getElementById('new-releases-grid'), 6);
            app.showSkeletonLoader(document.getElementById('critics-choice-grid'), 6);
            
            try {
                // Load trending content
                const trendingData = await app.getTrendingContent('all', 12);
                if (trendingData?.recommendations) {
                    app.renderContentGrid(
                        trendingData.recommendations,
                        document.getElementById('trending-grid')
                    );
                }
                
                // Load new releases
                const newReleasesData = await app.getNewReleases(null, 'movie', 12);
                if (newReleasesData?.recommendations) {
                    app.renderContentGrid(
                        newReleasesData.recommendations,
                        document.getElementById('new-releases-grid')
                    );
                }
                
                // Load critics' choice
                const criticsChoiceData = await app.getCriticsChoice('movie', 12);
                if (criticsChoiceData?.recommendations) {
                    app.renderContentGrid(
                        criticsChoiceData.recommendations,
                        document.getElementById('critics-choice-grid')
                    );
                }
                
                // Load anonymous recommendations for guests
                if (!app.currentUser) {
                    const anonymousData = await app.apiCall('/recommendations/anonymous?limit=12');
                    if (anonymousData?.recommendations) {
                        app.renderContentGrid(
                            anonymousData.recommendations,
                            document.getElementById('anonymous-recommendations-grid')
                        );
                    }
                }
                
            } catch (error) {
                console.error('Error loading homepage content:', error);
                app.showNotification('Failed to load some content', 'warning');
            }
        });
    </script>
</body>
</html>