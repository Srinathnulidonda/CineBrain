<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Details - MovieRec</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>
<body class="bg-primary text-white">
    <!-- Navigation -->
    <nav class="navbar fixed top-0 w-full z-50 bg-primary bg-opacity-95 backdrop-blur-sm">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <button onclick="history.back()" class="back-btn mr-4">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                        </svg>
                    </button>
                    <div class="logo text-2xl font-bold text-accent-red">MovieRec</div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <button id="share-btn" class="icon-btn">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path>
                        </svg>
                    </button>
                    <div class="user-menu relative">
                        <button id="user-menu-btn" class="user-avatar">
                            <span id="user-initial">U</span>
                        </button>
                        <div id="user-dropdown" class="user-dropdown hidden">
                            <a href="dashboard.html" class="dropdown-item">Dashboard</a>
                            <a href="profile.html" class="dropdown-item">Profile</a>
                            <button onclick="logout()" class="dropdown-item">Sign Out</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Movie Hero Section -->
    <section class="movie-hero">
        <div class="movie-backdrop">
            <img id="backdrop-image" src="" alt="" class="backdrop-img">
            <div class="backdrop-overlay"></div>
        </div>
        
        <div class="movie-hero-content">
            <div class="container mx-auto px-4">
                <div class="movie-info-grid">
                    <div class="movie-poster">
                        <img id="poster-image" src="" alt="" class="poster-img">
                        <div class="poster-actions">
                            <button id="watchlist-btn" class="action-btn">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                                </svg>
                                Watchlist
                            </button>
                            <button id="favorite-btn" class="action-btn">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                                </svg>
                                Favorite
                            </button>
                        </div>
                    </div>
                    
                    <div class="movie-details">
                        <h1 id="movie-title" class="movie-title"></h1>
                        <div class="movie-meta">
                            <span id="movie-year" class="meta-item"></span>
                            <span id="movie-runtime" class="meta-item"></span>
                            <span id="movie-rating" class="meta-item rating"></span>
                        </div>
                        
                        <div class="movie-genres" id="movie-genres"></div>
                        
                        <p id="movie-overview" class="movie-overview"></p>
                        
                        <div class="movie-actions">
                            <button id="play-trailer-btn" class="btn-primary">
                                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h1m4 0h1m-6-8h1m4 0h1M9 6h6"></path>
                                </svg>
                                Watch Trailer
                            </button>
                            <button id="rate-btn" class="btn-secondary">Rate This</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Video Section -->
    <section class="video-section">
        <div class="container mx-auto px-4">
            <h2 class="section-title">Trailers & Videos</h2>
            <div class="video-grid" id="video-grid"></div>
        </div>
    </section>

    <!-- Cast & Crew -->
    <section class="cast-section">
        <div class="container mx-auto px-4">
            <h2 class="section-title">Cast & Crew</h2>
            <div class="cast-carousel">
                <div class="cast-track" id="cast-track"></div>
            </div>
        </div>
    </section>

    <!-- User Reviews -->
    <section class="reviews-section">
        <div class="container mx-auto px-4">
            <div class="section-header">
                <h2 class="section-title">User Reviews</h2>
                <button id="write-review-btn" class="btn-secondary">Write Review</button>
            </div>
                        <div class="reviews-container" id="reviews-container"></div>
        </div>
    </section>

    <!-- Similar Movies -->
    <section class="content-section">
        <div class="container mx-auto px-4">
            <h2 class="section-title">More Like This</h2>
            <div class="content-carousel" id="similar-movies-carousel">
                <div class="carousel-container">
                    <div class="carousel-track" id="similar-movies-track"></div>
                </div>
                <button class="carousel-btn carousel-prev" onclick="scrollCarousel('similar-movies', -1)">‹</button>
                <button class="carousel-btn carousel-next" onclick="scrollCarousel('similar-movies', 1)">›</button>
            </div>
        </div>
    </section>

    <!-- Rating Modal -->
    <div id="rating-modal" class="modal hidden">
        <div class="modal-overlay" onclick="closeModal('rating-modal')"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Rate This Movie</h3>
                <button onclick="closeModal('rating-modal')" class="modal-close">×</button>
            </div>
            <div class="modal-body">
                <div class="rating-stars" id="rating-stars">
                    <span class="star" data-rating="1">★</span>
                    <span class="star" data-rating="2">★</span>
                    <span class="star" data-rating="3">★</span>
                    <span class="star" data-rating="4">★</span>
                    <span class="star" data-rating="5">★</span>
                </div>
                <textarea id="review-text" placeholder="Write your review (optional)" class="review-textarea"></textarea>
            </div>
            <div class="modal-footer">
                <button onclick="closeModal('rating-modal')" class="btn-secondary">Cancel</button>
                <button onclick="submitRating()" class="btn-primary">Submit Rating</button>
            </div>
        </div>
    </div>

    <!-- Video Player Modal -->
    <div id="video-modal" class="modal hidden">
        <div class="modal-overlay" onclick="closeModal('video-modal')"></div>
        <div class="modal-content video-modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="video-title">Trailer</h3>
                <button onclick="closeModal('video-modal')" class="modal-close">×</button>
            </div>
            <div class="modal-body">
                <div class="video-container" id="video-container"></div>
            </div>
        </div>
    </div>

    <script src="js/components.js"></script>
    <script src="js/app.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            initializeMovieDetail();
        });
    </script>
</body>
</html>