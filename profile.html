<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile - MovieRec</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>
<body class="bg-primary text-white">
    <!-- Navigation -->
    <nav class="navbar fixed top-0 w-full z-50 bg-primary bg-opacity-95 backdrop-blur-sm">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <div class="logo text-2xl font-bold text-accent-red">MovieRec</div>
                </div>
                
                <div class="flex items-center space-x-6">
                    <a href="dashboard.html" class="nav-link">Dashboard</a>
                    <a href="#" class="nav-link">Browse</a>
                    <a href="#" class="nav-link">Watchlist</a>
                    <div class="user-menu relative">
                        <button id="user-menu-btn" class="user-avatar">
                            <span id="user-initial">U</span>
                        </button>
                        <div id="user-dropdown" class="user-dropdown hidden">
                            <a href="profile.html" class="dropdown-item active">Profile</a>
                            <a href="#" class="dropdown-item">Settings</a>
                            <button onclick="logout()" class="dropdown-item">Sign Out</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Profile Header -->
    <section class="profile-header">
        <div class="container mx-auto px-4">
            <div class="profile-avatar-large" id="profile-avatar">
                <span id="profile-initial">U</span>
            </div>
            <h1 class="profile-name" id="profile-name">User Name</h1>
            <p class="profile-email" id="profile-email">user@example.com</p>
            
            <div class="profile-stats">
                <div class="stat-item">
                    <span class="stat-number" id="profile-watchlist">0</span>
                    <span class="stat-label">Watchlist</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="profile-favorites">0</span>
                    <span class="stat-label">Favorites</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="profile-watched">0</span>
                    <span class="stat-label">Watched</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="profile-reviews">0</span>
                    <span class="stat-label">Reviews</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Profile Content -->
    <main class="profile-content">
        <div class="container mx-auto px-4">
            <!-- Account Settings -->
            <div class="profile-section">
                <h2 class="profile-section-title">Account Settings</h2>
                <form id="profile-form" class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Username</label>
                        <input type="text" id="username" class="form-input" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" id="email" class="form-input">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Full Name</label>
                        <input type="text" id="full-name" class="form-input">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Bio</label>
                        <textarea id="bio" class="form-input" rows="3" placeholder="Tell us about yourself..."></textarea>
                    </div>
                </form>
                <div class="mt-6">
                    <button class="btn-primary" onclick="updateProfile()">Save Changes</button>
                    <button class="btn-secondary ml-4" onclick="resetProfile()">Reset</button>
                </div>
            </div>

            <!-- Privacy Settings -->
            <div class="profile-section">
                <h2 class="profile-section-title">Privacy Settings</h2>
                <div class="space-y-4">
                    <div class="form-checkbox">
                        <input type="checkbox" id="public-profile">
                        <label for="public-profile">Make my profile public</label>
                    </div>
                    <div class="form-checkbox">
                        <input type="checkbox" id="show-watchlist">
                        <label for="show-watchlist">Show my watchlist to others</label>
                    </div>
                    <div class="form-checkbox">
                        <input type="checkbox" id="show-favorites">
                        <label for="show-favorites">Show my favorites to others</label>
                    </div>
                    <div class="form-checkbox">
                        <input type="checkbox" id="email-notifications" checked>
                        <label for="email-notifications">Receive email notifications</label>
                    </div>
                </div>
            </div>

            <!-- Viewing Preferences -->
            <div class="profile-section">
                <h2 class="profile-section-title">Viewing Preferences</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Preferred Language</label>
                        <select id="preferred-language" class="form-select">
                            <option value="en">English</option>
                            <option value="hi">Hindi</option>
                            <option value="te">Telugu</option>
                            <option value="ta">Tamil</option>
                            <option value="kn">Kannada</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Content Rating</label>
                        <select id="content-rating" class="form-select">
                            <option value="all">All Ratings</option>
                            <option value="g">G - General Audiences</option>
                            <option value="pg">PG - Parental Guidance</option>
                            <option value="pg13">PG-13 - Parents Strongly Cautioned</option>
                            <option value="r">R - Restricted</option>
                        </select>
                    </div>
                </div>
                
                <div class="mt-6">
                    <h3 class="text-lg font-semibold mb-4">Favorite Genres</h3>
                    <div class="genre-tags" id="favorite-genres">
                        <!-- Genre tags will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Watch History -->
            <div class="profile-section">
                <h2 class="profile-section-title">Recent Activity</h2>
                <div class="activity-timeline" id="activity-timeline">
                    <!-- Activity items will be populated here -->
                </div>
                <div class="text-center mt-6">
                    <button class="btn-secondary" onclick="loadMoreActivity()">Load More Activity</button>
                </div>
            </div>

            <!-- Watchlist -->
            <div class="profile-section">
                <h2 class="profile-section-title">My Watchlist</h2>
                <div class="content-grid" id="watchlist-grid">
                    <!-- Watchlist items will be populated here -->
                </div>
            </div>

            <!-- Favorites -->
            <div class="profile-section">
                <h2 class="profile-section-title">My Favorites</h2>
                <div class="content-grid" id="favorites-grid">
                    <!-- Favorite items will be populated here -->
                </div>
            </div>

            <!-- Account Actions -->
            <div class="profile-section">
                <h2 class="profile-section-title">Account Actions</h2>
                <div class="space-y-4">
                    <button class="btn-secondary" onclick="changePassword()">Change Password</button>
                    <button class="btn-secondary" onclick="exportData()">Export My Data</button>
                    <button class="btn-secondary" onclick="clearHistory()">Clear Watch History</button>
                    <button class="btn-primary" style="background: var(--accent-red);" onclick="deleteAccount()">Delete Account</button>
                </div>
            </div>
        </div>
    </main>

    <!-- Change Password Modal -->
    <div id="change-password-modal" class="modal hidden">
        <div class="modal-overlay" onclick="closeModal('change-password-modal')"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Change Password</h3>
                <button onclick="closeModal('change-password-modal')" class="modal-close">Ã—</button>
            </div>
            <div class="modal-body">
                                <form id="change-password-form">
                    <div class="form-group">
                        <label class="form-label">Current Password</label>
                        <input type="password" id="current-password" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">New Password</label>
                        <input type="password" id="new-password" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Confirm New Password</label>
                        <input type="password" id="confirm-password" class="form-input" required>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button onclick="closeModal('change-password-modal')" class="btn-secondary">Cancel</button>
                <button onclick="submitPasswordChange()" class="btn-primary">Change Password</button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-spinner"></div>
    </div>

    <script src="js/components.js"></script>
    <script src="js/app.js"></script>
    <script src="js/profile.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            initializeProfile();
        });
    </script>
</body>
</html>