<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trending - CineScope</title>
    
    <!-- Stylesheets -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="../css/main.css" rel="stylesheet">
    <link href="../css/components.css" rel="stylesheet">
    <link href="../css/responsive.css" rel="stylesheet">
</head>
<body class="bg-dark text-light">
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-container">
            <div class="loading-logo">
                <i class="fas fa-film"></i>
                <span>CineScope</span>
            </div>
            <div class="loading-spinner"></div>
            <div class="loading-text">Loading trending content...</div>
        </div>
    </div>

    <!-- Header -->
    <div id="headerContainer"></div>

    <!-- Main Content -->
    <main class="main-content category-content">
        <!-- Category Hero -->
        <section class="category-hero trending-hero">
            <div class="hero-overlay"></div>
            <div class="container">
                <div class="hero-content">
                    <div class="breadcrumb-nav">
                        <nav class="breadcrumb">
                            <span class="breadcrumb-item"><a href="/">Home</a></span>
                            <span class="breadcrumb-item"><a href="/categories">Categories</a></span>
                            <span class="breadcrumb-item active">Trending</span>
                        </nav>
                    </div>
                    <h1 class="category-title">
                        <i class="fas fa-fire text-warning me-3"></i>
                        Trending Now
                    </h1>
                    <p class="category-description">
                        Discover what everyone's watching right now
                    </p>
                    <div class="trending-stats">
                        <div class="stat-badge">
                            <i class="fas fa-clock"></i>
                            Updated hourly
                        </div>
                        <div class="stat-badge">
                            <i class="fas fa-globe"></i>
                            Global trends
                        </div>
                        <div class="stat-badge">
                            <i class="fas fa-chart-line"></i>
                            <span id="trendingCount">0</span> titles trending
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Trending Filters -->
        <section class="category-filters">
            <div class="container">
                <div class="filters-wrapper">
                    <div class="filter-tabs">
                        <button class="filter-tab active" data-filter="all">
                            <i class="fas fa-globe me-2"></i>
                            All Regions
                        </button>
                        <button class="filter-tab" data-filter="india">
                            <i class="fas fa-flag me-2"></i>
                            India
                        </button>
                        <button class="filter-tab" data-filter="global">
                            <i class="fas fa-world-americas me-2"></i>
                            Global
                        </button>
                    </div>
                    <div class="filter-controls">
                        <div class="filter-group">
                            <label>Time Period:</label>
                            <select class="form-select form-select-sm" id="timePeriodFilter">
                                <option value="today">Today</option>
                                <option value="week" selected>This Week</option>
                                <option value="month">This Month</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>Content Type:</label>
                            <select class="form-select form-select-sm" id="contentTypeFilter">
                                <option value="all">All Types</option>
                                <option value="movie">Movies</option>
                                <option value="tv">TV Shows</option>
                                <option value="anime">Anime</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Top 10 Trending -->
        <section class="top-trending-section">
            <div class="container">
                <h2 class="section-title">
                    <i class="fas fa-crown text-warning me-2"></i>
                    Top 10 Trending
                </h2>
                <div class="top-trending-grid" id="topTrendingGrid">
                    <div class="loading-skeleton">
                        <div class="rank-card-skeleton skeleton"></div>
                        <div class="rank-card-skeleton skeleton"></div>
                        <div class="rank-card-skeleton skeleton"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Trending by Category -->
        <section class="trending-categories-section">
            <div class="container">
                <!-- Trending Movies -->
                <div class="category-section">
                    <h3 class="subsection-title">
                        <i class="fas fa-film me-2"></i>
                        Trending Movies
                    </h3>
                    <div class="content-carousel" id="trendingMoviesCarousel">
                        <div class="carousel-loading">
                            <div class="loading-spinner-small"></div>
                        </div>
                    </div>
                </div>

                <!-- Trending TV Shows -->
                <div class="category-section">
                    <h3 class="subsection-title">
                        <i class="fas fa-tv me-2"></i>
                        Trending TV Shows
                    </h3>
                    <div class="content-carousel" id="trendingTVCarousel">
                        <div class="carousel-loading">
                            <div class="loading-spinner-small"></div>
                        </div>
                    </div>
                </div>

                <!-- Trending Anime -->
                <div class="category-section">
                    <h3 class="subsection-title">
                        <i class="fas fa-mask me-2"></i>
                        Trending Anime
                    </h3>
                    <div class="content-carousel" id="trendingAnimeCarousel">
                        <div class="carousel-loading">
                            <div class="loading-spinner-small"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Regional Trends -->
        <section class="regional-trends-section">
            <div class="container">
                <h2 class="section-title">
                    <i class="fas fa-map-marked-alt me-2"></i>
                    Regional Trends
                </h2>
                <div class="regional-grid">
                    <div class="region-card" data-region="bollywood">
                        <div class="region-header">
                            <h4>Bollywood</h4>
                            <span class="region-badge">Hindi</span>
                        </div>
                        <div class="region-content" id="bollywoodTrending">
                            <div class="loading-spinner-small"></div>
                        </div>
                    </div>
                    <div class="region-card" data-region="tollywood">
                        <div class="region-header">
                            <h4>Tollywood</h4>
                            <span class="region-badge">Telugu</span>
                        </div>
                        <div class="region-content" id="tollywoodTrending">
                            <div class="loading-spinner-small"></div>
                        </div>
                    </div>
                    <div class="region-card" data-region="kollywood">
                        <div class="region-header">
                            <h4>Kollywood</h4>
                            <span class="region-badge">Tamil</span>
                        </div>
                        <div class="region-content" id="kollywoodTrending">
                            <div class="loading-spinner-small"></div>
                        </div>
                    </div>
                    <div class="region-card" data-region="hollywood">
                        <div class="region-header">
                            <h4>Hollywood</h4>
                            <span class="region-badge">English</span>
                        </div>
                        <div class="region-content" id="hollywoodTrending">
                            <div class="loading-spinner-small"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Trending Insights -->
        <section class="trending-insights-section">
            <div class="container">
                <h2 class="section-title">
                    <i class="fas fa-chart-bar me-2"></i>
                    Trending Insights
                </h2>
                <div class="insights-grid">
                    <div class="insight-card">
                        <div class="insight-icon">
                            <i class="fas fa-arrow-trend-up"></i>
                        </div>
                        <div class="insight-content">
                            <h4>Rising Fast</h4>
                            <div id="risingFastList" class="insight-list">
                                <div class="loading-spinner-small"></div>
                            </div>
                        </div>
                    </div>
                    <div class="insight-card">
                        <div class="insight-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="insight-content">
                            <h4>Most Discussed</h4>
                            <div id="mostDiscussedList" class="insight-list">
                                <div class="loading-spinner-small"></div>
                            </div>
                        </div>
                    </div>
                    <div class="insight-card">
                        <div class="insight-icon">
                            <i class="fas fa-heart"></i>
                        </div>
                        <div class="insight-content">
                            <h4>Fan Favorites</h4>
                            <div id="fanFavoritesList" class="insight-list">
                                <div class="loading-spinner-small"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <div id="footerContainer"></div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../js/main.js"></script>
    <script src="../js/include.js"></script>
    <script>
        let trendingState = {
            region: 'all',
            timePeriod: 'week',
            contentType: 'all',
            trendingData: {}
        };

        document.addEventListener('DOMContentLoaded', function() {
            initializeTrendingPage();
        });

        async function initializeTrendingPage() {
            // Load includes
            await loadIncludes();
            
            // Initialize page
            bindTrendingEvents();
            await loadAllTrendingContent();

            Utils.hideLoadingScreen();
        }

        async function loadIncludes() {
            try {
                await Promise.all([
                    loadHeader(),
                    loadFooter()
                ]);
            } catch (error) {
                console.error('Failed to load includes:', error);
            }
        }

        function bindTrendingEvents() {
            // Filter tabs
            document.querySelectorAll('.filter-tab').forEach(tab => {
                tab.onclick = () => {
                    const filter = tab.getAttribute('data-filter');
                    setActiveRegion(filter);
                };
            });

            // Filter controls
            document.getElementById('timePeriodFilter').onchange = (e) => {
                trendingState.timePeriod = e.target.value;
                refreshTrendingContent();
            };

            document.getElementById('contentTypeFilter').onchange = (e) => {
                trendingState.contentType = e.target.value;
                refreshTrendingContent();
            };
        }

        function setActiveRegion(region) {
            trendingState.region = region;
            
            // Update tab states
            document.querySelectorAll('.filter-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-filter="${region}"]`).classList.add('active');
            
            refreshTrendingContent();
        }

        async function loadAllTrendingContent() {
            try {
                // Load all sections in parallel
                await Promise.all([
                    loadTop10Trending(),
                    loadTrendingByCategory(),
                    loadRegionalTrends(),
                    loadTrendingInsights()
                ]);

                updateTrendingCount();

            } catch (error) {
                console.error('Failed to load trending content:', error);
                Utils.showToast('Failed to load trending content', 'error');
            }
        }

        async function refreshTrendingContent() {
            await loadTop10Trending();
            await loadTrendingByCategory();
        }

        async function loadTop10Trending() {
            try {
                const grid = document.getElementById('topTrendingGrid');
                showLoadingSkeleton(grid, 10);

                const trending = await ApiService.getTrending(trendingState.contentType, 10);
                const topItems = trending.recommendations || [];

                const topHtml = topItems.map((item, index) => createRankCard(item, index + 1)).join('');
                grid.innerHTML = topHtml || '<p class="text-muted">No trending content found</p>';

            } catch (error) {
                console.error('Failed to load top trending:', error);
            }
        }

        function createRankCard(item, rank) {
            const changeClass = item.change > 0 ? 'positive' : item.change < 0 ? 'negative' : 'neutral';
            const changeIcon = item.change > 0 ? 'arrow-up' : item.change < 0 ? 'arrow-down' : 'minus';
            
            return `
                <div class="rank-card ${rank <= 3 ? 'top-3' : ''}" onclick="Utils.navigateToDetails(${item.id})">
                    <div class="rank-number">${rank}</div>
                    <div class="rank-poster">
                        <img src="${Utils.getImageUrl(item.poster_path, 'w154')}" 
                             alt="${item.title}"
                             onerror="this.src='https://via.placeholder.com/154x231?text=No+Image'">
                        <div class="rank-overlay">
                            <button class="play-btn-small" onclick="event.stopPropagation(); UIComponents.playTrailer('${item.youtube_trailer || ''}')">
                                <i class="fas fa-play"></i>
                            </button>
                        </div>
                    </div>
                    <div class="rank-info">
                        <h6 class="rank-title">${item.title}</h6>
                        <div class="rank-meta">
                            <span class="content-type">${item.content_type.toUpperCase()}</span>
                            <div class="rank-rating">
                                <i class="fas fa-star"></i>
                                <span>${Utils.formatRating(item.rating)}</span>
                            </div>
                        </div>
                        <div class="rank-change ${changeClass}">
                            <i class="fas fa-${changeIcon}"></i>
                            <span>${Math.abs(item.change || 0)} ${item.change !== 0 ? 'positions' : ''}</span>
                        </div>
                        <div class="rank-stats">
                            <span class="stat-item">
                                <i class="fas fa-eye"></i>
                                ${Utils.formatNumber(item.views || 0)}
                            </span>
                            <span class="stat-item">
                                <i class="fas fa-heart"></i>
                                ${Utils.formatNumber(item.likes || 0)}
                            </span>
                        </div>
                    </div>
                </div>
            `;
        }

        async function loadTrendingByCategory() {
            try {
                // Load trending for each category
                const [movies, tvShows, anime] = await Promise.all([
                    ApiService.getTrending('movie', 20),
                    ApiService.getTrending('tv', 20),
                    ApiService.getTrending('anime', 20)
                ]);

                UIComponents.createCarousel(movies.recommendations || [], 'trendingMoviesCarousel');
                UIComponents.createCarousel(tvShows.recommendations || [], 'trendingTVCarousel');
                UIComponents.createCarousel(anime.recommendations || [], 'trendingAnimeCarousel');

            } catch (error) {
                console.error('Failed to load trending by category:', error);
            }
        }

        async function loadRegionalTrends() {
            try {
                const regions = ['bollywood', 'tollywood', 'kollywood', 'hollywood'];
                const regionPromises = regions.map(region => 
                    ApiService.getTrendingByRegion(region, 5)
                );

                const results = await Promise.all(regionPromises);

                regions.forEach((region, index) => {
                    const container = document.getElementById(`${region}Trending`);
                    const items = results[index].recommendations || [];
                    
                    if (items.length > 0) {
                        const listHtml = items.map((item, idx) => `
                            <div class="trend-item" onclick="Utils.navigateToDetails(${item.id})">
                                <span class="trend-rank">${idx + 1}</span>
                                <img class="trend-thumb" src="${Utils.getImageUrl(item.poster_path, 'w92')}" 
                                     alt="${item.title}"
                                     onerror="this.src='https://via.placeholder.com/92x138?text=No+Image'">
                                <div class="trend-info">
                                    <h6 class="trend-title">${item.title}</h6>
                                    <div class="trend-meta">
                                        <span class="trend-rating">
                                            <i class="fas fa-star"></i>
                                            ${Utils.formatRating(item.rating)}
                                        </span>
                                    </div>
                                </div>
                            </div>
                        `).join('');
                        
                        container.innerHTML = listHtml;
                    } else {
                        container.innerHTML = '<p class="text-muted">No trending content</p>';
                    }
                });

            } catch (error) {
                console.error('Failed to load regional trends:', error);
            }
        }

        async function loadTrendingInsights() {
            try {
                const insights = await ApiService.getTrendingInsights();

                // Rising Fast
                const risingFastHtml = (insights.rising_fast || []).slice(0, 5).map(item => `
                    <div class="insight-item" onclick="Utils.navigateToDetails(${item.id})">
                        <img src="${Utils.getImageUrl(item.poster_path, 'w45')}" 
                             alt="${item.title}"
                             onerror="this.src='https://via.placeholder.com/45x68?text=No+Image'">
                        <span class="insight-title">${item.title}</span>
                        <span class="insight-badge">+${item.growth_rate}%</span>
                    </div>
                `).join('');
                document.getElementById('risingFastList').innerHTML = risingFastHtml || '<p class="text-muted">No data</p>';

                // Most Discussed
                const mostDiscussedHtml = (insights.most_discussed || []).slice(0, 5).map(item => `
                    <div class="insight-item" onclick="Utils.navigateToDetails(${item.id})">
                        <img src="${Utils.getImageUrl(item.poster_path, 'w45')}" 
                             alt="${item.title}"
                             onerror="this.src='https://via.placeholder.com/45x68?text=No+Image'">
                        <span class="insight-title">${item.title}</span>
                        <span class="insight-badge">${Utils.formatNumber(item.discussion_count)} posts</span>
                    </div>
                `).join('');
                document.getElementById('mostDiscussedList').innerHTML = mostDiscussedHtml || '<p class="text-muted">No data</p>';

                // Fan Favorites
                const fanFavoritesHtml = (insights.fan_favorites || []).slice(0, 5).map(item => `
                    <div class="insight-item" onclick="Utils.navigateToDetails(${item.id})">
                        <img src="${Utils.getImageUrl(item.poster_path, 'w45')}" 
                             alt="${item.title}"
                             onerror="this.src='https://via.placeholder.com/45x68?text=No+Image'">
                        <span class="insight-title">${item.title}</span>
                        <span class="insight-badge">${item.fan_rating}/10</span>
                    </div>
                `).join('');
                document.getElementById('fanFavoritesList').innerHTML = fanFavoritesHtml || '<p class="text-muted">No data</p>';

            } catch (error) {
                console.error('Failed to load trending insights:', error);
            }
        }

        function updateTrendingCount() {
            // This would typically come from the API
            document.getElementById('trendingCount').textContent = '150+';
        }

        function showLoadingSkeleton(container, count = 3) {
            const skeletonHtml = Array(count).fill(0).map(() => 
                '<div class="rank-card-skeleton skeleton"></div>'
            ).join('');
            container.innerHTML = `<div class="loading-skeleton">${skeletonHtml}</div>`;
        }

        // Extended API service
        ApiService.getTrendingByRegion = async function(region, limit = 10) {
            return await this.request(`/trending/region/${region}?limit=${limit}`);
        };

        ApiService.getTrendingInsights = async function() {
            return await this.request('/trending/insights');
        };
    </script>

    <style>
        .category-content {
            padding-top: 0;
        }

        .category-hero {
            position: relative;
            padding: 4rem 0;
            background-size: cover;
            background-position: center;
        }

        .trending-hero {
            background-image: linear-gradient(135deg, #FF6B6B 0%, #FFD93D 100%);
        }

        .hero-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 0;
        }

        .hero-content {
            position: relative;
            z-index: 1;
            text-align: center;
            max-width: 800px;
            margin: 0 auto;
        }

        .category-title {
            font-size: clamp(2.5rem, 5vw, 4rem);
            font-weight: 700;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .category-description {
            font-size: 1.25rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }

        .trending-stats {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .stat-badge {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: var(--border-radius);
            font-size: 0.9rem;
        }

        .category-filters {
            padding: 1.5rem 0;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 80px;
            z-index: 100;
        }

        .top-trending-section {
            padding: 3rem 0;
        }

        .section-title {
            font-size: 2rem;
            font-weight: 600;
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
        }

        .top-trending-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1.5rem;
        }

        .rank-card {
            display: flex;
            gap: 1rem;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-lg);
            padding: 1rem;
            transition: var(--transition);
            cursor: pointer;
            position: relative;
        }

        .rank-card.top-3 {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, var(--bg-card) 0%, rgba(255, 193, 7, 0.1) 100%);
        }

        .rank-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .rank-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-muted);
            width: 40px;
            text-align: center;
            flex-shrink: 0;
        }

        .rank-card.top-3 .rank-number {
            color: var(--warning-color);
        }

        .rank-poster {
            position: relative;
            width: 100px;
            flex-shrink: 0;
        }

        .rank-poster img {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: var(--border-radius);
        }

        .rank-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: var(--transition);
        }

        .rank-card:hover .rank-overlay {
            opacity: 1;
        }

        .play-btn-small {
            width: 40px;
            height: 40px;
            background: var(--primary-color);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .play-btn-small:hover {
            transform: scale(1.1);
        }

        .rank-info {
            flex: 1;
            min-width: 0;
        }

        .rank-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .rank-meta {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 0.5rem;
            font-size: 0.85rem;
        }

        .rank-change {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.25rem 0.75rem;
            border-radius: var(--border-radius);
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .rank-change.positive {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
        }

        .rank-change.negative {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        .rank-change.neutral {
            background: rgba(107, 114, 128, 0.2);
            color: #6b7280;
        }

        .rank-stats {
            display: flex;
            gap: 1rem;
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        .trending-categories-section {
            padding: 3rem 0;
            background: var(--bg-secondary);
        }

        .category-section {
            margin-bottom: 3rem;
        }

        .subsection-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
        }

        .regional-trends-section {
            padding: 3rem 0;
        }

        .regional-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .region-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-lg);
            overflow: hidden;
        }

        .region-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
        }

        .region-header h4 {
            font-size: 1.1rem;
            font-weight: 600;
            margin: 0;
        }

        .region-badge {
            padding: 0.25rem 0.75rem;
            background: var(--primary-color);
            color: white;
            border-radius: var(--border-radius);
            font-size: 0.75rem;
            font-weight: 600;
        }

        .region-content {
            padding: 1rem;
            min-height: 200px;
        }

        .trend-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.5rem;
            margin-bottom: 0.5rem;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
        }

        .trend-item:hover {
            background: var(--bg-secondary);
        }

        .trend-rank {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text-muted);
            width: 30px;
            text-align: center;
        }

        .trend-thumb {
            width: 50px;
            height: 75px;
            object-fit: cover;
            border-radius: var(--border-radius);
        }

        .trend-info {
            flex: 1;
            min-width: 0;
        }

        .trend-title {
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 0.25rem;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .trend-meta {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .trending-insights-section {
            padding: 3rem 0;
            background: var(--bg-secondary);
        }

        .insights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
        }

        .insight-card {
            display: flex;
            gap: 1.5rem;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-lg);
            padding: 2rem;
        }

        .insight-icon {
            width: 60px;
            height: 60px;
            background: var(--gradient-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            flex-shrink: 0;
        }

        .insight-content {
            flex: 1;
        }

        .insight-content h4 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .insight-list {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .insight-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.5rem;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
        }

        .insight-item:hover {
            background: var(--bg-secondary);
        }

        .insight-item img {
            width: 30px;
            height: 45px;
            object-fit: cover;
            border-radius: 4px;
        }

        .insight-title {
            flex: 1;
            font-size: 0.9rem;
            font-weight: 500;
            display: -webkit-box;
            -webkit-line-clamp: 1;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .insight-badge {
            padding: 0.125rem 0.5rem;
            background: var(--primary-color);
            color: white;
            border-radius: var(--border-radius);
            font-size: 0.7rem;
            font-weight: 600;
            white-space: nowrap;
        }

        @media (max-width: 768px) {
            .trending-stats {
                flex-direction: column;
                gap: 0.5rem;
            }

            .stat-badge {
                justify-content: center;
            }

            .top-trending-grid {
                grid-template-columns: 1fr;
            }

            .regional-grid {
                grid-template-columns: 1fr;
            }

            .insights-grid {
                grid-template-columns: 1fr;
            }

            .rank-card {
                flex-direction: column;
                text-align: center;
            }

            .rank-number {
                position: absolute;
                top: 0.5rem;
                right: 0.5rem;
                background: rgba(0, 0, 0, 0.7);
                border-radius: 50%;
                width: 50px;
                height: 50px;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .rank-poster {
                width: 100%;
            }

            .rank-poster img {
                width: 100%;
                height: 200px;
            }
        }
    </style>
</body>
</html>