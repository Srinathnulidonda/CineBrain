<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Anime - CineScope</title>
  
  <!-- CSS -->
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/components.css">
  <link rel="stylesheet" href="/css/responsive.css">
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  
  <style>
    .anime-hero {
      background: linear-gradient(135deg, #FF6B6B 0%, #8B5CF6 100%);
      padding: var(--space-2xl) 0;
      margin-bottom: var(--space-2xl);
      position: relative;
      overflow: hidden;
    }
    
    .anime-hero::before {
      content: 'Ê°ú';
      position: absolute;
      right: -50px;
      top: -50px;
      font-size: 200px;
      opacity: 0.1;
      font-family: serif;
    }
    
    .anime-categories {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: var(--space-md);
      margin-bottom: var(--space-2xl);
    }
    
    .anime-category {
      background: var(--bg-card);
      border-radius: var(--radius-lg);
      padding: var(--space-lg);
      text-align: center;
      cursor: pointer;
      transition: all var(--transition-base);
      border: 2px solid transparent;
    }
    
    .anime-category:hover {
      border-color: var(--primary-purple);
      transform: translateY(-2px);
    }
    
    .anime-category.active {
      background: var(--gradient-primary);
      color: white;
    }
    
    .anime-category h3 {
      font-size: 1.25rem;
      margin-bottom: var(--space-xs);
    }
    
    .anime-category p {
      font-size: 0.875rem;
      opacity: 0.8;
    }
    
    .season-tabs {
      display: flex;
      gap: var(--space-sm);
      margin-bottom: var(--space-lg);
      overflow-x: auto;
      padding-bottom: var(--space-sm);
    }
    
    .season-tab {
      padding: var(--space-sm) var(--space-lg);
      background: var(--bg-card);
      border-radius: var(--radius-full);
      white-space: nowrap;
      cursor: pointer;
      transition: all var(--transition-fast);
    }
    
    .season-tab:hover {
      background: var(--bg-hover);
    }
    
    .season-tab.active {
      background: var(--gradient-primary);
      color: white;
    }
    
    .anime-info {
      display: flex;
      gap: var(--space-xs);
      font-size: 0.75rem;
      color: var(--text-secondary);
      margin-top: var(--space-xs);
    }
    
    .anime-info span {
      display: flex;
      align-items: center;
      gap: 2px;
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar">
    <div class="container navbar-content">
      <a href="/" class="navbar-brand gradient-text">CineScope</a>
      
      <button class="mobile-menu-toggle md:hidden">
        <i class="fas fa-bars"></i>
      </button>
      
      <div class="navbar-menu hidden md:flex">
        <a href="/" class="navbar-link">Home</a>
        <a href="/categories/movies.html" class="navbar-link">Movies</a>
        <a href="/categories/tv-shows.html" class="navbar-link">TV Shows</a>
        <a href="/categories/anime.html" class="navbar-link active">Anime</a>
        
        <div class="search-container">
          <input type="text" class="search-input" placeholder="Search anime...">
          <i class="fas fa-search search-icon"></i>
          <div class="search-suggestions" style="display: none;"></div>
        </div>
        
        <div class="auth-buttons flex gap-sm">
          <a href="/login.html" class="btn btn-ghost btn-sm">Login</a>
          <a href="/login.html#register" class="btn btn-primary btn-sm">Sign Up</a>
        </div>
        
        <div class="user-menu" style="display: none;"></div>
      </div>
    </div>
  </nav>
  
  <!-- Anime Hero -->
  <div class="anime-hero" style="margin-top: 60px;">
    <div class="container">
      <h1 class="text-white mb-sm">„Ç¢„Éã„É° Anime Collection</h1>
      <p class="text-white opacity-90">Discover the best of Japanese animation</p>
    </div>
  </div>
  
  <!-- Main Content -->
  <main class="container">
    <!-- Anime Categories -->
    <section class="mb-2xl">
      <h2 class="mb-lg">Browse by Category</h2>
      <div class="anime-categories">
        <div class="anime-category active" onclick="loadAnimeCategory('all')">
          <h3>All Anime</h3>
          <p>Everything in our collection</p>
        </div>
        <div class="anime-category" onclick="loadAnimeCategory('shonen')">
          <h3>Shonen</h3>
          <p>Action-packed adventures</p>
        </div>
        <div class="anime-category" onclick="loadAnimeCategory('shojo')">
          <h3>Shojo</h3>
          <p>Romance and drama</p>
        </div>
        <div class="anime-category" onclick="loadAnimeCategory('seinen')">
          <h3>Seinen</h3>
          <p>Mature themes</p>
        </div>
        <div class="anime-category" onclick="loadAnimeCategory('josei')">
          <h3>Josei</h3>
          <p>Adult romance</p>
        </div>
        <div class="anime-category" onclick="loadAnimeCategory('kodomomuke')">
          <h3>Kids</h3>
          <p>Family friendly</p>
        </div>
      </div>
    </section>
    
    <!-- Seasonal Anime -->
    <section class="mb-2xl">
      <h2 class="mb-lg">Seasonal Anime</h2>
      <div class="season-tabs">
        <div class="season-tab active" onclick="loadSeason('current')">Winter 2024</div>
        <div class="season-tab" onclick="loadSeason('fall2023')">Fall 2023</div>
        <div class="season-tab" onclick="loadSeason('summer2023')">Summer 2023</div>
        <div class="season-tab" onclick="loadSeason('spring2023')">Spring 2023</div>
        <div class="season-tab" onclick="loadSeason('upcoming')">Upcoming</div>
      </div>
      
      <div id="seasonal-anime" class="grid">
        <!-- Seasonal anime will be loaded here -->
      </div>
    </section>
    
    <!-- Top Anime Lists -->
    <section class="mb-2xl">
      <h2 class="mb-lg">Top Anime</h2>
      <div class="grid gap-lg" style="grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));">
        <div class="card p-lg">
          <h3 class="mb-sm gradient-text">üèÜ All Time Best</h3>
          <div id="top-all-time" class="flex-col gap-sm">
            <div class="skeleton" style="height: 40px;"></div>
            <div class="skeleton" style="height: 40px;"></div>
            <div class="skeleton" style="height: 40px;"></div>
          </div>
        </div>
        
        <div class="card p-lg">
          <h3 class="mb-sm gradient-text">üìà Most Popular</h3>
          <div id="most-popular" class="flex-col gap-sm">
            <div class="skeleton" style="height: 40px;"></div>
            <div class="skeleton" style="height: 40px;"></div>
            <div class="skeleton" style="height: 40px;"></div>
          </div>
        </div>
        
        <div class="card p-lg">
          <h3 class="mb-sm gradient-text">üî• Currently Airing</h3>
          <div id="currently-airing" class="flex-col gap-sm">
            <div class="skeleton" style="height: 40px;"></div>
            <div class="skeleton" style="height: 40px;"></div>
            <div class="skeleton" style="height: 40px;"></div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- All Anime -->
    <section>
      <div class="flex-between mb-lg">
        <h2>All Anime</h2>
        <div class="filter-container">
          <select class="form-select filter-select" id="type-filter">
            <option value="">All Types</option>
            <option value="tv">TV Series</option>
            <option value="movie">Movies</option>
            <option value="ova">OVA</option>
            <option value="special">Special</option>
          </select>
          
          <select class="form-select filter-select" id="status-filter">
            <option value="">All Status</option>
            <option value="airing">Currently Airing</option>
            <option value="complete">Completed</option>
            <option value="upcoming">Upcoming</option>
          </select>
        </div>
      </div>
      
      <div id="category-content">
        <div class="grid">
          <div class="skeleton" style="height: 300px;"></div>
          <div class="skeleton" style="height: 300px;"></div>
          <div class="skeleton" style="height: 300px;"></div>
          <div class="skeleton" style="height: 300px;"></div>
        </div>
      </div>
    </section>
  </main>
  
  <!-- Toast Container -->
  <div class="toast-container"></div>
  
  <!-- Scripts -->
  <script src="/js/main.js"></script>
  <script>
    let currentCategory = 'all';
    let currentSeason = 'current';
    
    // Load anime by category
    function loadAnimeCategory(category) {
      currentCategory = category;
      
      // Update active category
      document.querySelectorAll('.anime-category').forEach(cat => cat.classList.remove('active'));
      event.target.closest('.anime-category').classList.add('active');
      
      loadAnime();
    }
    
    // Load seasonal anime
    function loadSeason(season) {
      currentSeason = season;
      
      // Update active tab
      document.querySelectorAll('.season-tab').forEach(tab => tab.classList.remove('active'));
      event.target.classList.add('active');
      
      loadSeasonalAnime();
    }
    
    // Load seasonal anime content
    async function loadSeasonalAnime() {
      const container = document.getElementById('seasonal-anime');
      container.innerHTML = '<div class="spinner mx-auto col-span-full"></div>';
      
      try {
        const data = await ApiService.getAnimeRecommendations(null, 12);
        
        container.innerHTML = '';
        if (data.recommendations) {
          data.recommendations.forEach(anime => {
            const card = createAnimeCard(anime);
            container.appendChild(card);
          });
        }
      } catch (error) {
        console.error('Failed to load seasonal anime:', error);
      }
    }
    
    // Create anime-specific card
    function createAnimeCard(anime) {
      const card = createContentCard(anime);
      
      // Add anime-specific info
      const infoDiv = document.createElement('div');
      infoDiv.className = 'anime-info';
      infoDiv.innerHTML = `
        <span><i class="fas fa-tv"></i> ${anime.episodes || '?'} eps</span>
        <span><i class="fas fa-star"></i> ${anime.rating || 'N/A'}</span>
        ${anime.status ? `<span><i class="fas fa-circle"></i> ${anime.status}</span>` : ''}
      `;
      
      card.querySelector('.card-content').appendChild(infoDiv);
      return card;
    }
    
    // Load top anime lists
    async function loadTopLists() {
      try {
        const topAnime = await ApiService.getAnimeRecommendations(null, 15);
        
        if (topAnime.recommendations) {
          // All time best
          const allTimeContainer = document.getElementById('top-all-time');
          allTimeContainer.innerHTML = topAnime.recommendations.slice(0, 3).map((anime, index) => `
            <div class="flex items-center gap-sm cursor-pointer hover:bg-hover p-sm rounded" onclick="navigateToDetails(${anime.id})">
              <span class="font-bold text-lg">${index + 1}</span>
              <span class="flex-1">${anime.title}</span>
              <span class="text-sm text-secondary">${anime.rating || 'N/A'}</span>
            </div>
          `).join('');
          
          // Most popular
          const popularContainer = document.getElementById('most-popular');
          popularContainer.innerHTML = topAnime.recommendations.slice(3, 6).map((anime, index) => `
            <div class="flex items-center gap-sm cursor-pointer hover:bg-hover p-sm rounded" onclick="navigateToDetails(${anime.id})">
              <span class="font-bold text-lg">${index + 1}</span>
              <span class="flex-1">${anime.title}</span>
            </div>
          `).join('');
          
          // Currently airing
          const airingContainer = document.getElementById('currently-airing');
          airingContainer.innerHTML = topAnime.recommendations.slice(6, 9).map((anime, index) => `
            <div class="flex items-center gap-sm cursor-pointer hover:bg-hover p-sm rounded" onclick="navigateToDetails(${anime.id})">
              <span class="font-bold text-lg">${index + 1}</span>
              <span class="flex-1">${anime.title}</span>
            </div>
          `).join('');
        }
      } catch (error) {
        console.error('Failed to load top lists:', error);
      }
    }
    
    // Load all anime
    async function loadAnime() {
      try {
        const data = await ApiService.getAnimeRecommendations(
          currentCategory === 'all' ? null : currentCategory,
          20
        );
        
        const container = document.getElementById('category-content');
        
        if (data.recommendations) {
          container.innerHTML = '';
          const grid = document.createElement('div');
          grid.className = 'grid';
          
          data.recommendations.forEach(anime => {
            grid.appendChild(createAnimeCard(anime));
          });
          
          container.appendChild(grid);
        }
      } catch (error) {
        console.error('Failed to load anime:', error);
      }
    }
    
    // Initialize
    updateAuthUI();
    loadSeasonalAnime();
    loadTopLists();
    loadAnime();
  </script>
</body>
</html>