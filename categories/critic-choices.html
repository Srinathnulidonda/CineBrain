<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Critics' Choice - CineScope</title>

    <!-- CSS Files -->
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/components.css">
    <link rel="stylesheet" href="/css/responsive.css">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap"
        rel="stylesheet">
</head>

<body>
    <!-- Include Header -->
    <div id="header-include"></div>

    <!-- Main Content -->
    <main style="padding-top: 80px;">
        <!-- Page Header -->
        <section class="bg-secondary py-12">
            <div class="container text-center">
                <h1 class="text-4xl font-bold mb-4">‚≠ê Critics' Choice</h1>
                <p class="text-lg text-secondary mb-6">Highly rated content by professional critics and reviewers</p>

                <!-- Critics stats -->
                <div class="flex justify-center items-center gap-6 text-sm">
                    <div class="flex items-center gap-2">
                        <span class="text-warning">‚≠ê</span>
                        <span class="text-muted">Average rating: <span class="text-warning font-semibold"
                                id="avg-rating">8.5</span></span>
                    </div>
                    <div class="flex items-center gap-2">
                        <span class="text-primary-blue">üë•</span>
                        <span class="text-muted"><span id="total-critics">150+</span> critics</span>
                    </div>
                </div>
            </div>
        </section>

        <div class="container py-8">
            <!-- Rating Filter -->
            <div class="flex justify-center mb-6">
                <div class="flex gap-2 bg-bg-card rounded-lg p-1">
                    <button class="rating-filter-btn active" data-rating="all">All Ratings</button>
                    <button class="rating-filter-btn" data-rating="9">9.0+</button>
                    <button class="rating-filter-btn" data-rating="8">8.0+</button>
                    <button class="rating-filter-btn" data-rating="7">7.5+</button>
                </div>
            </div>

            <!-- Content Type Filter -->
            <div class="tabs mb-8">
                <div class="tab-list">
                    <button class="tab-button active" data-type="all">All</button>
                    <button class="tab-button" data-type="movie">Movies</button>
                    <button class="tab-button" data-type="tv">TV Shows</button>
                    <button class="tab-button" data-type="anime">Anime</button>
                </div>
            </div>

            <!-- Critics Highlights -->
            <section class="mb-8">
                <h2 class="text-2xl font-semibold mb-4">This Week's Highlights</h2>
                <div id="critics-highlights" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Highlights will be populated dynamically -->
                </div>
            </section>

            <!-- Awards Section -->
            <section class="mb-8">
                <h2 class="text-2xl font-semibold mb-4">Award Winners & Nominees</h2>
                <div class="tabs">
                    <div class="tab-list">
                        <button class="tab-button active" data-award="oscar">Oscar Winners</button>
                        <button class="tab-button" data-award="emmy">Emmy Winners</button>
                        <button class="tab-button" data-award="golden">Golden Globe</button>
                        <button class="tab-button" data-award="cannes">Cannes</button>
                    </div>
                </div>
                <div id="awards-content" class="mt-6">
                    <!-- Awards content will be populated -->
                </div>
            </section>

            <!-- Content Grid -->
            <section id="content-grid">
                <div class="flex justify-center p-8">
                    <div class="spinner"></div>
                </div>
            </section>

            <!-- Critics Reviews -->
            <section class="mt-12">
                <h2 class="text-2xl font-semibold mb-6">Recent Critics Reviews</h2>
                <div id="critics-reviews" class="space-y-4">
                    <!-- Reviews will be populated dynamically -->
                </div>
            </section>
        </div>
    </main>

    <!-- Include Footer -->
    <div id="footer-include"></div>

    <!-- JavaScript -->
    <script src="/js/main.js"></script>
    <script src="/js/include.js"></script>
    <script src="/js/category-base.js"></script>
    <script>
        class CriticsChoicePage extends CategoryBasePage {
            constructor() {
                super('critics-choice', 'Critics\' Choice');
                this.currentRating = 'all';
                this.currentAward = 'oscar';
                this.init();
            }

            init() {
                super.init();
                this.setupRatingFilters();
                this.setupAwardFilters();
                this.loadCriticsHighlights();
                this.loadAwardsContent();
                this.loadCriticsReviews();
                this.updateCriticsStats();
            }

            setupRatingFilters() {
                document.querySelectorAll('.rating-filter-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        this.currentRating = e.target.dataset.rating;
                        this.switchActiveRatingFilter(e.target);
                        this.loadContent();
                    });
                });
            }

            setupAwardFilters() {
                document.querySelectorAll('[data-award]').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        this.currentAward = e.target.dataset.award;
                        this.switchActiveTab(e.target);
                        this.loadAwardsContent();
                    });
                });
            }

            switchActiveRatingFilter(activeBtn) {
                document.querySelectorAll('.rating-filter-btn').forEach(btn =>
                    btn.classList.remove('active'));
                activeBtn.classList.add('active');
            }

            async loadContent() {
                const container = document.getElementById('content-grid');
                UIComponents.showLoading(container);

                try {
                    const params = {
                        type: this.currentType,
                        limit: 24
                    };

                    if (this.currentRating !== 'all') {
                        params.min_rating = this.currentRating;
                    }

                    const response = await ApiService.getCriticsChoice(this.currentType, 24);
                    this.renderContent(response.recommendations, container);
                } catch (error) {
                    UIComponents.showError(container, 'Failed to load critics choice content');
                }
            }

            async loadCriticsHighlights() {
                const container = document.getElementById('critics-highlights');

                try {
                    // Simulate critics highlights
                    const highlights = [
                        {
                            title: "Film of the Week",
                            content: "Exceptional cinematography and storytelling",
                            rating: 9.2,
                            critic: "Roger Ebert's successor",
                            image: "/assets/images/highlight1.jpg"
                        },
                        {
                            title: "TV Show Spotlight",
                            content: "Outstanding performances and writing",
                            rating: 8.9,
                            critic: "Entertainment Weekly",
                            image: "/assets/images/highlight2.jpg"
                        },
                        {
                            title: "Anime Discovery",
                            content: "Innovative animation and deep narrative",
                            rating: 8.7,
                            critic: "Anime News Network",
                            image: "/assets/images/highlight3.jpg"
                        }
                    ];

                    container.innerHTML = highlights.map(highlight => `
                        <div class="card overflow-hidden interactive">
                            <div class="relative">
                                <div class="h-48 bg-gradient-primary rounded-t-lg flex items-center justify-center">
                                    <span class="text-4xl">üé¨</span>
                                </div>
                                <div class="absolute top-2 right-2 bg-warning text-black px-2 py-1 rounded-md text-sm font-bold">
                                    ‚≠ê ${highlight.rating}
                                </div>
                            </div>
                            <div class="p-6">
                                <h3 class="font-bold text-lg mb-2">${highlight.title}</h3>
                                <p class="text-secondary mb-3">${highlight.content}</p>
                                <div class="text-sm text-muted">‚Äî ${highlight.critic}</div>
                            </div>
                        </div>
                    `).join('');
                } catch (error) {
                    console.error('Failed to load critics highlights:', error);
                }
            }

            async loadAwardsContent() {
                const container = document.getElementById('awards-content');

                try {
                    // Simulate award winners based on current award filter
                    const awardData = {
                        oscar: [
                            { title: "Best Picture Winner 2024", type: "Movie", year: "2024" },
                            { title: "Best Director Winner", type: "Movie", year: "2024" },
                            { title: "Best Actor Winner", type: "Movie", year: "2024" }
                        ],
                        emmy: [
                            { title: "Outstanding Drama Series", type: "TV Show", year: "2024" },
                            { title: "Outstanding Comedy Series", type: "TV Show", year: "2024" },
                            { title: "Outstanding Limited Series", type: "TV Show", year: "2024" }
                        ],
                        golden: [
                            { title: "Best Motion Picture", type: "Movie", year: "2024" },
                            { title: "Best Television Series", type: "TV Show", year: "2024" }
                        ],
                        cannes: [
                            { title: "Palme d'Or Winner", type: "Movie", year: "2024" },
                            { title: "Grand Prix Winner", type: "Movie", year: "2024" }
                        ]
                    };

                    const awards = awardData[this.currentAward] || [];

                    container.innerHTML = `
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            ${awards.map(award => `
                                <div class="card p-4 border-l-4 border-warning">
                                    <div class="flex items-center gap-3">
                                        <span class="text-2xl">üèÜ</span>
                                        <div>
                                            <h4 class="font-semibold">${award.title}</h4>
                                            <p class="text-sm text-secondary">${award.type} ‚Ä¢ ${award.year}</p>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    `;
                } catch (error) {
                    console.error('Failed to load awards content:', error);
                }
            }

            async loadCriticsReviews() {
                const container = document.getElementById('critics-reviews');

                try {
                    // Simulate critics reviews
                    const reviews = [
                        {
                            content: "A masterpiece of modern cinema with exceptional character development...",
                            title: "The Latest Blockbuster",
                            critic: "James Anderson",
                            publication: "Film Quarterly",
                            rating: 9.0,
                            time: "2 hours ago"
                        },
                        {
                            content: "Brilliant storytelling combined with outstanding performances...",
                            title: "Popular TV Drama",
                            critic: "Sarah Chen",
                            publication: "TV Guide",
                            rating: 8.8,
                            time: "5 hours ago"
                        },
                        {
                            content: "An innovative approach to animation that pushes boundaries...",
                            title: "New Anime Series",
                            critic: "Michael Torres",
                            publication: "Anime Review",
                            rating: 8.5,
                            time: "1 day ago"
                        }
                    ];

                    container.innerHTML = reviews.map(review => `
                        <div class="card p-6">
                            <div class="flex justify-between items-start mb-4">
                                <div>
                                    <h4 class="font-semibold text-lg">${review.title}</h4>
                                    <p class="text-sm text-muted">${review.critic} ‚Ä¢ ${review.publication}</p>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="bg-warning text-black px-2 py-1 rounded text-sm font-bold">
                                        ${review.rating}/10
                                    </span>
                                    <span class="text-xs text-muted">${review.time}</span>
                                </div>
                            </div>
                            <p class="text-secondary">${review.content}</p>
                            <div class="mt-3 flex gap-2">
                                <button class="btn btn-ghost btn-sm">Read Full Review</button>
                                <button class="btn btn-ghost btn-sm">üëç Helpful</button>
                            </div>
                        </div>
                    `).join('');
                } catch (error) {
                    console.error('Failed to load critics reviews:', error);
                }
            }

            updateCriticsStats() {
                // Simulate real-time stats updates
                setInterval(() => {
                    const avgRating = (Math.random() * 1.5 + 8).toFixed(1);
                    const totalCritics = Math.floor(Math.random() * 50) + 120;

                    document.getElementById('avg-rating').textContent = avgRating;
                    document.getElementById('total-critics').textContent = totalCritics + '+';
                }, 60000); // Update every minute
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            new CriticsChoicePage();
        });
    </script>
</body>

</html>