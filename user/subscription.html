<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subscription - CineScope</title>

    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <link href="/assets/css/base.css" rel="stylesheet">
    <link href="/assets/css/components.css" rel="stylesheet">
    <link href="/assets/css/layouts.css" rel="stylesheet">
    <link href="/assets/css/animations.css" rel="stylesheet">
    <link href="/assets/css/responsive.css" rel="stylesheet">
    <link href="/assets/css/utilities.css" rel="stylesheet">
</head>

<body>
    <div class="app-layout">
        <!-- Navigation -->
        <nav class="navbar">
            <div class="container navbar__container">
                <a href="/" class="navbar__logo">CineScope</a>

                <div class="navbar__menu">
                    <a href="/content/trending.html" class="navbar__link">Trending</a>
                    <a href="/content/search.html" class="navbar__link">Browse</a>
                    <a href="/content/anime.html" class="navbar__link">Anime</a>
                    <a href="/content/regional.html" class="navbar__link">Regional</a>
                </div>

                <div class="navbar__user" id="navbarUser">
                    <!-- Dynamic user menu -->
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="app-layout__main">
            <div class="container">
                <!-- Page Header -->
                <div class="page-header text-center">
                    <h1 class="page-header__title">
                        <i class="bi bi-crown-fill text-gold"></i> Choose Your Plan
                    </h1>
                    <p class="page-header__description">
                        Unlock premium features and exclusive content
                    </p>
                </div>

                <!-- Current Plan -->
                <div class="alert alert-info mb-xl" id="currentPlan">
                    <i class="bi bi-info-circle me-sm"></i>
                    You are currently on the <strong>Free Plan</strong>. Upgrade to unlock premium features!
                </div>

                <!-- Pricing Cards -->
                <div class="row justify-center mb-xl">
                    <div class="col-lg-10">
                        <div class="row g-lg">
                            <!-- Free Plan -->
                            <div class="col-md-4">
                                <div class="pricing-card animate-fadeInUp">
                                    <div class="pricing-card__header">
                                        <h3 class="pricing-card__title">Free</h3>
                                        <div class="pricing-card__price">
                                            <span class="pricing-card__currency">$</span>
                                            <span class="pricing-card__amount">0</span>
                                            <span class="pricing-card__period">/month</span>
                                        </div>
                                    </div>
                                    <ul class="pricing-card__features">
                                        <li><i class="bi bi-check-circle text-success"></i> Limited content access</li>
                                        <li><i class="bi bi-check-circle text-success"></i> Standard quality streaming
                                        </li>
                                        <li><i class="bi bi-check-circle text-success"></i> Basic recommendations</li>
                                        <li><i class="bi bi-check-circle text-success"></i> 1 device at a time</li>
                                        <li><i class="bi bi-x-circle text-muted"></i> No offline downloads</li>
                                        <li><i class="bi bi-x-circle text-muted"></i> No early access</li>
                                    </ul>
                                    <button class="btn btn-secondary w-100" disabled>
                                        Current Plan
                                    </button>
                                </div>
                            </div>

                            <!-- Premium Plan -->
                            <div class="col-md-4">
                                <div class="pricing-card pricing-card--featured animate-fadeInUp"
                                    style="animation-delay: 0.1s">
                                    <div class="pricing-card__badge">Most Popular</div>
                                    <div class="pricing-card__header">
                                        <h3 class="pricing-card__title">Premium</h3>
                                        <div class="pricing-card__price">
                                            <span class="pricing-card__currency">$</span>
                                            <span class="pricing-card__amount">9.99</span>
                                            <span class="pricing-card__period">/month</span>
                                        </div>
                                    </div>
                                    <ul class="pricing-card__features">
                                        <li><i class="bi bi-check-circle text-success"></i> Unlimited content access
                                        </li>
                                        <li><i class="bi bi-check-circle text-success"></i> 4K Ultra HD streaming</li>
                                        <li><i class="bi bi-check-circle text-success"></i> AI-powered recommendations
                                        </li>
                                        <li><i class="bi bi-check-circle text-success"></i> 3 devices simultaneously
                                        </li>
                                        <li><i class="bi bi-check-circle text-success"></i> Offline downloads</li>
                                        <li><i class="bi bi-check-circle text-success"></i> Early access to new releases
                                        </li>
                                    </ul>
                                    <button class="btn btn-primary w-100" onclick="selectPlan('premium')">
                                        Upgrade to Premium
                                    </button>
                                </div>
                            </div>

                            <!-- Ultimate Plan -->
                            <div class="col-md-4">
                                <div class="pricing-card animate-fadeInUp" style="animation-delay: 0.2s">
                                    <div class="pricing-card__header">
                                        <h3 class="pricing-card__title">Ultimate</h3>
                                        <div class="pricing-card__price">
                                            <span class="pricing-card__currency">$</span>
                                            <span class="pricing-card__amount">14.99</span>
                                            <span class="pricing-card__period">/month</span>
                                        </div>
                                    </div>
                                    <ul class="pricing-card__features">
                                        <li><i class="bi bi-check-circle text-success"></i> Everything in Premium</li>
                                        <li><i class="bi bi-check-circle text-success"></i> 8K streaming where available
                                        </li>
                                        <li><i class="bi bi-check-circle text-success"></i> Exclusive content</li>
                                        <li><i class="bi bi-check-circle text-success"></i> Unlimited devices</li>
                                        <li><i class="bi bi-check-circle text-success"></i> Priority support</li>
                                        <li><i class="bi bi-check-circle text-success"></i> Virtual premieres access
                                        </li>
                                    </ul>
                                    <button class="btn btn-gradient-premium w-100" onclick="selectPlan('ultimate')">
                                        Go Ultimate
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Features Comparison -->
                <section class="mb-xl">
                    <h2 class="text-center mb-lg">Feature Comparison</h2>
                    <div class="table-responsive">
                        <table class="table table-dark">
                            <thead>
                                <tr>
                                    <th>Feature</th>
                                    <th class="text-center">Free</th>
                                    <th class="text-center">Premium</th>
                                    <th class="text-center">Ultimate</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Content Library</td>
                                    <td class="text-center">Limited</td>
                                    <td class="text-center">Full</td>
                                    <td class="text-center">Full + Exclusive</td>
                                </tr>
                                <tr>
                                    <td>Video Quality</td>
                                    <td class="text-center">HD</td>
                                    <td class="text-center">4K</td>
                                    <td class="text-center">8K</td>
                                </tr>
                                <tr>
                                    <td>Simultaneous Devices</td>
                                    <td class="text-center">1</td>
                                    <td class="text-center">3</td>
                                    <td class="text-center">Unlimited</td>
                                </tr>
                                <tr>
                                    <td>Offline Downloads</td>
                                    <td class="text-center"><i class="bi bi-x text-muted"></i></td>
                                    <td class="text-center"><i class="bi bi-check text-success"></i></td>
                                    <td class="text-center"><i class="bi bi-check text-success"></i></td>
                                </tr>
                                <tr>
                                    <td>Ad-Free Experience</td>
                                    <td class="text-center"><i class="bi bi-x text-muted"></i></td>
                                    <td class="text-center"><i class="bi bi-check text-success"></i></td>
                                    <td class="text-center"><i class="bi bi-check text-success"></i></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- FAQ -->
                <section>
                    <h2 class="text-center mb-lg">Frequently Asked Questions</h2>
                    <div class="row justify-center">
                        <div class="col-lg-8">
                            <div class="accordion" id="faqAccordion">
                                <div class="accordion-item bg-secondary border-0 mb-sm">
                                    <h3 class="accordion-header">
                                        <button class="accordion-button bg-secondary text-white" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#faq1">
                                            Can I change my plan anytime?
                                        </button>
                                    </h3>
                                    <div id="faq1" class="accordion-collapse collapse show"
                                        data-bs-parent="#faqAccordion">
                                        <div class="accordion-body">
                                            Yes! You can upgrade or downgrade your subscription at any time. Changes
                                            will take effect at the start of your next billing cycle.
                                        </div>
                                    </div>
                                </div>

                                <div class="accordion-item bg-secondary border-0 mb-sm">
                                    <h3 class="accordion-header">
                                        <button class="accordion-button bg-secondary text-white collapsed" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#faq2">
                                            Is there a free trial?
                                        </button>
                                    </h3>
                                    <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                        <div class="accordion-body">
                                            New users get a 7-day free trial of Premium features. No credit card
                                            required to start!
                                        </div>
                                    </div>
                                </div>

                                <div class="accordion-item bg-secondary border-0">
                                    <h3 class="accordion-header">
                                        <button class="accordion-button bg-secondary text-white collapsed" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#faq3">
                                            What payment methods do you accept?
                                        </button>
                                    </h3>
                                    <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                        <div class="accordion-body">
                                            We accept all major credit cards, debit cards, PayPal, and various regional
                                            payment methods.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <style>
        .pricing-card {
            background: var(--bg-secondary);
            border-radius: var(--border-radius-lg);
            padding: var(--spacing-xl);
            text-align: center;
            position: relative;
            transition: all var(--transition-base);
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .pricing-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-xl);
        }

        .pricing-card--featured {
            background: var(--bg-tertiary);
            border: 2px solid var(--accent-blue);
        }

        .pricing-card__badge {
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--gradient-primary);
            padding: var(--spacing-xs) var(--spacing-md);
            border-radius: var(--border-radius-full);
            font-size: 0.875rem;
            font-weight: 600;
        }

        .pricing-card__header {
            margin-bottom: var(--spacing-xl);
        }

        .pricing-card__title {
            font-size: 1.5rem;
            margin-bottom: var(--spacing-md);
        }

        .pricing-card__price {
            display: flex;
            align-items: baseline;
            justify-content: center;
            gap: var(--spacing-xs);
        }

        .pricing-card__currency {
            font-size: 1.25rem;
            color: var(--text-muted);
        }

        .pricing-card__amount {
            font-size: 3rem;
            font-weight: 700;
        }

        .pricing-card__period {
            color: var(--text-muted);
        }

        .pricing-card__features {
            list-style: none;
            padding: 0;
            margin-bottom: var(--spacing-xl);
            flex: 1;
        }

        .pricing-card__features li {
            padding: var(--spacing-sm) 0;
            text-align: left;
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .btn-gradient-premium {
            background: var(--gradient-premium);
            color: white;
            border: none;
        }

        .btn-gradient-premium:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
    </style>

    <!-- Scripts -->
    <script src="/assets/js/core/config.js"></script>
    <script src="/assets/js/core/storage.js"></script>
    <script src="/assets/js/core/api.js"></script>
    <script src="/assets/js/core/auth.js"></script>
    <script src="/assets/js/core/router.js"></script>

    <script>
        // Check authentication
        if (!auth.requireAuth()) {
            // Will redirect to login if not authenticated
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', () => {
            updateNavigation();
            checkCurrentPlan();
        });

        function updateNavigation() {
            const navbarUser = document.getElementById('navbarUser');
            const user = auth.getUser();

            navbarUser.innerHTML = `
                <a href="${auth.getUserUrl('watchlist')}" class="navbar__link">
                    <i class="bi bi-bookmark"></i>
                </a>
                <a href="${auth.getUserUrl('favorites')}" class="navbar__link">
                    <i class="bi bi-heart"></i>
                </a>
                <div class="navbar__avatar">
                    <img src="${user.avatar || '/assets/images/default-avatar.png'}" alt="${user.username}">
                </div>
            `;
        }

        function checkCurrentPlan() {
            // Check user's current subscription
            const user = auth.getUser();
            const plan = user.subscription || 'free';

            if (plan !== 'free') {
                document.getElementById('currentPlan').innerHTML = `
                    <i class="bi bi-crown-fill text-gold me-sm"></i>
                    You are currently on the <strong>${plan.charAt(0).toUpperCase() + plan.slice(1)} Plan</strong>. 
                    Your subscription renews on ${new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toLocaleDateString()}.
                `;
            }
        }

        function selectPlan(plan) {
            showToast(`Redirecting to payment for ${plan} plan...`, 'info');

            // In production, this would redirect to payment gateway
            setTimeout(() => {
                showToast('Payment integration coming soon!', 'warning');
            }, 2000);
        }

        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `toast toast--${type} animate-slideInRight`;
            toast.innerHTML = `
                <i class="bi bi-${type === 'success' ? 'check-circle' : type === 'error' ? 'x-circle' : 'info-circle'} toast__icon"></i>
                <span class="toast__message">${message}</span>
                <i class="bi bi-x toast__close" onclick="this.parentElement.remove()"></i>
            `;

            document.getElementById('toastContainer').appendChild(toast);
            setTimeout(() => toast.classList.add('toast--visible'), 10);
            setTimeout(() => toast.remove(), 5000);
        }
    </script>
</body>

</html>