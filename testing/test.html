<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <!-- Dynamic SEO Meta Tags - Updated by JavaScript -->
    <title>Loading... | CineBrain</title>
    <meta name="description" content="">
    <meta name="keywords" content="">

    <!-- Open Graph -->
    <meta property="og:type" content="video.movie">
    <meta property="og:title" content="">
    <meta property="og:description" content="">
    <meta property="og:image" content="">
    <meta property="og:url" content="">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="">

    <!-- Canonical -->
    <link rel="canonical" href="">

    <!-- Preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://image.tmdb.org">
    <link rel="preconnect" href="https://backend-app-970m.onrender.com">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- TailwindCSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#6366f1',
                        'secondary': '#8b5cf6',
                        'success': '#10b981',
                        'danger': '#ef4444',
                        'warning': '#f59e0b',
                        'dark': '#0f172a',
                        'light': '#f8fafc'
                    },
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif']
                    },
                    animation: {
                        'shimmer': 'shimmer 2s infinite',
                        'fadeIn': 'fadeIn 0.5s ease-in-out',
                        'slideUp': 'slideUp 0.3s ease-out',
                        'pulse-slow': 'pulse 3s infinite'
                    }
                }
            }
        }
    </script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/assets/css/theme.css">
    <link rel="stylesheet" href="/assets/css/topbar.css">
    <link rel="stylesheet" href="/assets/css/animations.css">
    <link rel="stylesheet" href="/assets/css/details.css">

    <!-- Theme Script -->
    <script>
            (function () {
                const savedTheme = localStorage.getItem('cinebrain-theme') || 'dark';
                document.documentElement.setAttribute('data-theme', savedTheme);
                document.documentElement.setAttribute('data-bs-theme', savedTheme);
            })();
    </script>
</head>

<body class="bg-gray-50 dark:bg-gray-900 font-inter">

    <!-- TopBar Navigation (Reuse existing) -->
    <header id="topbar-container"></header>

    <!-- Main Content -->
    <main id="main-content" class="min-h-screen">

        <!-- Hero Section -->
        <section id="hero-section" class="relative w-full overflow-hidden">
            <!-- Backdrop Container -->
            <div class="hero-backdrop absolute inset-0 z-0">
                <img id="backdrop-image" class="w-full h-full object-cover opacity-0 transition-opacity duration-700"
                    alt="">
                <div class="absolute inset-0 bg-gradient-to-t from-gray-900 via-gray-900/60 to-transparent"></div>
                <div class="absolute inset-0 bg-gradient-to-r from-gray-900 via-transparent to-transparent"></div>
            </div>

            <!-- Content Container -->
            <div class="relative z-10 container mx-auto px-4 pt-20 pb-16 lg:pt-32 lg:pb-24">
                <div class="flex flex-col lg:flex-row gap-8 lg:gap-12">

                    <!-- Poster -->
                    <div class="poster-container flex-shrink-0 mx-auto lg:mx-0">
                        <div id="poster-skeleton" class="skeleton-poster rounded-xl"></div>
                        <img id="poster-image"
                            class="poster-image rounded-xl shadow-2xl opacity-0 transition-opacity duration-500" alt="">
                        <div id="rating-badge" class="rating-overlay hidden">
                            <span class="rating-score"></span>
                        </div>
                    </div>

                    <!-- Info Section -->
                    <div class="content-info flex-grow text-center lg:text-left">
                        <!-- Badges -->
                        <div id="badges-container" class="flex flex-wrap gap-2 justify-center lg:justify-start mb-4">
                        </div>

                        <!-- Title -->
                        <h1 id="content-title" class="text-3xl lg:text-5xl font-bold text-white mb-2"></h1>
                        <p id="original-title" class="text-lg text-gray-300 mb-4 hidden"></p>

                        <!-- Meta Info -->
                        <div id="meta-info"
                            class="flex flex-wrap items-center gap-3 text-gray-300 mb-4 justify-center lg:justify-start">
                            <span id="year"></span>
                            <span class="text-gray-500">•</span>
                            <span id="runtime"></span>
                            <span class="text-gray-500">•</span>
                            <span id="content-rating"></span>
                        </div>

                        <!-- Tagline -->
                        <p id="tagline" class="text-xl text-gray-200 italic mb-6 hidden"></p>

                        <!-- Action Buttons -->
                        <div class="action-buttons flex flex-wrap gap-3 justify-center lg:justify-start mb-8">
                            <button id="play-btn"
                                class="btn-primary flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-lg hover:scale-105 transition-transform">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                    <path
                                        d="M6.3 2.841A1.5 1.5 0 004 4.11v11.78a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z" />
                                </svg>
                                <span>Watch Trailer</span>
                            </button>
                            <button id="watchlist-btn"
                                class="btn-secondary flex items-center gap-2 px-6 py-3 border-2 border-gray-400 text-white rounded-lg hover:bg-gray-800 transition">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M12 4v16m8-8H4" />
                                </svg>
                                <span>Add to List</span>
                            </button>
                            <button id="favorite-btn"
                                class="btn-icon p-3 border-2 border-gray-400 text-white rounded-lg hover:bg-gray-800 transition">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                                </svg>
                            </button>
                            <button id="share-btn"
                                class="btn-icon p-3 border-2 border-gray-400 text-white rounded-lg hover:bg-gray-800 transition">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m9.032 4.026a3 3 0 10-2.684 0m-9.032 0a3 3 0 002.684 0m6.348 0a3 3 0 10-2.684 0" />
                                </svg>
                            </button>
                        </div>

                        <!-- Progress Bar (if watching) -->
                        <div id="progress-container" class="hidden mb-6">
                            <div class="flex justify-between text-sm text-gray-400 mb-2">
                                <span>Continue Watching</span>
                                <span id="progress-text">0% watched</span>
                            </div>
                            <div class="w-full bg-gray-700 rounded-full h-2">
                                <div id="progress-bar"
                                    class="bg-gradient-to-r from-indigo-500 to-purple-600 h-2 rounded-full transition-all duration-300"
                                    style="width: 0%"></div>
                            </div>
                        </div>

                        <!-- Synopsis -->
                        <div id="synopsis-container" class="synopsis-container">
                            <p id="synopsis-text"
                                class="text-gray-300 text-base lg:text-lg leading-relaxed line-clamp-3"></p>
                            <button id="synopsis-toggle" class="text-indigo-400 hover:text-indigo-300 mt-2 hidden">Read
                                More</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Content Details Tabs -->
        <section class="container mx-auto px-4 py-8">
            <nav class="tabs-nav flex gap-4 border-b border-gray-700 mb-8 overflow-x-auto">
                <button class="tab-btn active px-4 py-3 text-gray-300 hover:text-white transition relative"
                    data-tab="overview">Overview</button>
                <button class="tab-btn px-4 py-3 text-gray-300 hover:text-white transition relative"
                    data-tab="cast">Cast & Crew</button>
                <button class="tab-btn px-4 py-3 text-gray-300 hover:text-white transition relative"
                    data-tab="reviews">Reviews</button>
                <button class="tab-btn px-4 py-3 text-gray-300 hover:text-white transition relative"
                    data-tab="media">Media</button>
                <button class="tab-btn px-4 py-3 text-gray-300 hover:text-white transition relative"
                    data-tab="details">Details</button>
            </nav>

            <!-- Tab Content -->
            <div id="tab-content">

                <!-- Overview Tab -->
                <div id="overview-tab" class="tab-panel active">
                    <!-- Metadata Grid -->
                    <div class="metadata-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">
                        <div class="metadata-item">
                            <h3 class="text-sm text-gray-400 mb-2">Genres</h3>
                            <div id="genres-list" class="flex flex-wrap gap-2"></div>
                        </div>
                        <div class="metadata-item">
                            <h3 class="text-sm text-gray-400 mb-2">Languages</h3>
                            <div id="languages-list" class="text-white"></div>
                        </div>
                        <div class="metadata-item">
                            <h3 class="text-sm text-gray-400 mb-2">Release Date</h3>
                            <div id="release-date" class="text-white"></div>
                        </div>
                    </div>

                    <!-- Streaming Availability -->
                    <div id="streaming-section" class="mb-12 hidden">
                        <h2 class="text-2xl font-bold text-white mb-6">Where to Watch</h2>
                        <div id="streaming-providers" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4">
                        </div>
                    </div>

                    <!-- More Like This -->
                    <div id="recommendations-section" class="mb-12">
                        <h2 class="text-2xl font-bold text-white mb-6">More Like This</h2>
                        <div id="recommendations-carousel" class="carousel-container relative">
                            <div class="carousel-wrapper flex gap-4 overflow-x-auto pb-4"></div>
                        </div>
                    </div>
                </div>

                <!-- Cast & Crew Tab -->
                <div id="cast-tab" class="tab-panel hidden">
                    <div id="cast-section" class="mb-12">
                        <h2 class="text-2xl font-bold text-white mb-6">Cast</h2>
                        <div id="cast-carousel" class="cast-grid grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4">
                        </div>
                    </div>
                    <div id="crew-section" class="mb-12">
                        <h2 class="text-2xl font-bold text-white mb-6">Crew</h2>
                        <div id="crew-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
                    </div>
                </div>

                <!-- Reviews Tab -->
                <div id="reviews-tab" class="tab-panel hidden">
                    <!-- Ratings Overview -->
                    <div id="ratings-overview" class="ratings-grid grid grid-cols-1 md:grid-cols-3 gap-6 mb-12"></div>

                    <!-- User Reviews -->
                    <div id="user-reviews-section">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-2xl font-bold text-white">User Reviews</h2>
                            <button id="write-review-btn"
                                class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition">Write
                                Review</button>
                        </div>
                        <div id="reviews-list" class="space-y-6"></div>
                    </div>
                </div>

                <!-- Media Tab -->
                <div id="media-tab" class="tab-panel hidden">
                    <div id="gallery-section">
                        <div class="gallery-tabs flex gap-4 mb-6">
                            <button class="gallery-tab-btn active px-4 py-2 bg-gray-800 text-white rounded-lg"
                                data-gallery="posters">Posters</button>
                            <button class="gallery-tab-btn px-4 py-2 bg-gray-800 text-white rounded-lg"
                                data-gallery="backdrops">Backdrops</button>
                            <button class="gallery-tab-btn px-4 py-2 bg-gray-800 text-white rounded-lg"
                                data-gallery="videos">Videos</button>
                        </div>
                        <div id="gallery-grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"></div>
                    </div>
                </div>

                <!-- Details Tab -->
                <div id="details-tab" class="tab-panel hidden">
                    <div class="details-grid grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div>
                            <h3 class="text-xl font-bold text-white mb-4">Production</h3>
                            <div id="production-details" class="space-y-4"></div>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-white mb-4">Technical Specs</h3>
                            <div id="technical-details" class="space-y-4"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Video Modal -->
    <div id="video-modal" class="modal-overlay fixed inset-0 z-50 hidden">
        <div class="modal-backdrop absolute inset-0 bg-black/80 backdrop-blur-sm"></div>
        <div class="modal-content relative w-full h-full flex items-center justify-center p-4">
            <div class="video-container relative w-full max-w-6xl">
                <button id="close-video"
                    class="absolute -top-12 right-0 text-white text-4xl hover:text-gray-300">×</button>
                <div id="video-wrapper" class="relative aspect-video bg-black rounded-lg overflow-hidden"></div>
            </div>
        </div>
    </div>

    <!-- Review Modal -->
    <div id="review-modal" class="modal-overlay fixed inset-0 z-50 hidden">
        <div class="modal-backdrop absolute inset-0 bg-black/80 backdrop-blur-sm"></div>
        <div class="modal-content relative w-full h-full flex items-center justify-center p-4">
            <div class="review-form-container bg-gray-800 rounded-xl p-6 w-full max-w-2xl">
                <h3 class="text-2xl font-bold text-white mb-6">Write a Review</h3>
                <form id="review-form">
                    <div class="mb-4">
                        <label class="block text-gray-300 mb-2">Rating</label>
                        <div id="star-rating" class="flex gap-2"></div>
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-300 mb-2">Title</label>
                        <input type="text" id="review-title" class="w-full px-4 py-2 bg-gray-700 text-white rounded-lg"
                            required>
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-300 mb-2">Review</label>
                        <textarea id="review-text" rows="5" class="w-full px-4 py-2 bg-gray-700 text-white rounded-lg"
                            required></textarea>
                    </div>
                    <div class="mb-6">
                        <label class="flex items-center text-gray-300">
                            <input type="checkbox" id="has-spoilers" class="mr-2">
                            Contains spoilers
                        </label>
                    </div>
                    <div class="flex gap-4">
                        <button type="submit"
                            class="px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition">Submit
                            Review</button>
                        <button type="button" id="cancel-review"
                            class="px-6 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Image Lightbox -->
    <div id="image-lightbox" class="lightbox-overlay fixed inset-0 z-50 hidden">
        <div class="lightbox-backdrop absolute inset-0 bg-black/95"></div>
        <button id="close-lightbox" class="absolute top-4 right-4 text-white text-4xl z-10">×</button>
        <div class="lightbox-content relative w-full h-full flex items-center justify-center p-8">
            <img id="lightbox-image" class="max-w-full max-h-full object-contain">
        </div>
    </div>

    <!-- Loading States -->
    <div id="loading-overlay"
        class="fixed inset-0 bg-gray-900/50 backdrop-blur-sm z-50 flex items-center justify-center hidden">
        <div class="spinner-container">
            <div class="spinner"></div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container" class="fixed bottom-4 right-4 z-50 space-y-2"></div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <script src="/assets/js/theme-manager.js"></script>
    <script src="/assets/js/topbar.js"></script>
    <script src="/assets/js/details.js" type="module"></script>
</body>

</html>