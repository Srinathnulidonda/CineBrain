<!-- Desktop Topbar Layout -->
<nav class="navbar navbar-expand-lg navbar-dark fixed-top topbar" id="main-topbar">
    <div class="container-fluid">
        <!-- Brand -->
        <a class="navbar-brand fw-bold" href="/">
            <span class="text-gradient-animated">CineScope</span>
        </a>

        <!-- Desktop Navigation -->
        <div class="d-none d-lg-flex align-items-center flex-grow-1 ms-4">
            <!-- Search Form -->
            <form class="d-flex me-auto" id="topbar-search-form">
                <div class="input-group">
                    <input class="form-control" type="search" placeholder="Search movies, TV shows, anime..."
                        aria-label="Search" id="topbar-search-input">
                    <button class="btn btn-outline-primary" type="submit">
                        <i class="bi bi-search"></i>
                    </button>
                </div>
            </form>

            <!-- Navigation Links -->
            <ul class="navbar-nav align-items-center gap-3">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">
                        Browse
                    </a>
                    <ul class="dropdown-menu dropdown-menu-dark">
                        <li><a class="dropdown-item" href="/content/search">
                                <i class="bi bi-grid me-2"></i>All Content
                            </a></li>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <li><a class="dropdown-item" href="/content/anime">
                                <i class="bi bi-tv me-2"></i>Anime
                            </a></li>
                        <li><a class="dropdown-item" href="/content/genre">
                                <i class="bi bi-tags me-2"></i>Genres
                            </a></li>
                        <li><a class="dropdown-item" href="/content/regional">
                                <i class="bi bi-globe me-2"></i>Regional
                            </a></li>
                    </ul>
                </li>

                <!-- User Menu -->
                <li class="nav-item dropdown" id="user-menu">
                    <!-- Populated dynamically -->
                </li>
            </ul>
        </div>

        <!-- Mobile Menu Toggle -->
        <button class="navbar-toggler d-lg-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#mobile-menu"
            aria-controls="mobile-menu">
            <span class="navbar-toggler-icon"></span>
        </button>
    </div>
</nav>

<style>
    .topbar {
        background: var(--bg-secondary);
        border-bottom: 1px solid var(--border-color);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        padding-top: env(safe-area-inset-top);
        z-index: 1030;
    }

    .topbar .navbar-brand {
        font-size: 1.5rem;
        letter-spacing: -0.5px;
    }

    .topbar .form-control {
        background: var(--bg-surface);
        border-color: var(--border-color);
        min-width: 300px;
    }

    .topbar .form-control:focus {
        background: var(--bg-surface);
        border-color: var(--accent-blue);
    }

    @media (min-width: 992px) {
        body {
            padding-top: calc(64px + env(safe-area-inset-top));
        }
    }
</style>