<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>CineBrain Content Manager - 30 Day Schedule</title>

    <!-- Meta Tags -->
    <meta name="description"
        content="CineBrain Content Manager - Schedule and manage your 30-day movie, TV show, and anime recommendation posts">
    <meta name="theme-color" content="#113CCF">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Inter:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom Styles - Updated Path -->
    <link rel="stylesheet" href="/src/planner/styles.css">

    <!-- Theme Initialization -->
    <script>
        (function () {
            try {
                const savedTheme = localStorage.getItem('cinebrain-theme');
                const theme = (savedTheme === 'light' || savedTheme === 'dark') ? savedTheme : 'dark';
                document.documentElement.setAttribute('data-theme', theme);
                document.documentElement.setAttribute('data-bs-theme', theme);
            } catch (e) {
                document.documentElement.setAttribute('data-theme', 'dark');
                document.documentElement.setAttribute('data-bs-theme', 'dark');
            }
        })();
    </script>
</head>

<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header-cinebrain">
            <div class="header-content">
                <div class="header-left">
                    <button class="menu-toggle" id="menuToggle" aria-label="Toggle menu">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M3 12h18M3 6h18M3 18h18" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" />
                        </svg>
                    </button>
                    <div class="logo-wrapper">
                        <h1 class="logo">CineBrain-Post</h1>
                        <span class="logo-subtitle">Content Manager</span>
                    </div>
                </div>

                <div class="header-right">
                    <div class="header-stats">
                        <div class="stat-card">
                            <div class="stat-value" id="totalProgress">0%</div>
                            <div class="stat-label">Complete</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="completedCount">0/60</div>
                            <div class="stat-label">Posts</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="currentStreak">0</div>
                            <div class="stat-label">Streak</div>
                        </div>
                    </div>

                    <div class="header-actions">
                        <button class="icon-btn calendar-toggle" id="calendarToggle" title="Calendar View"
                            aria-label="Open calendar">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <rect x="3" y="4" width="18" height="18" rx="2" stroke="currentColor"
                                    stroke-width="2" />
                                <path d="M16 2v4M8 2v4M3 10h18" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" />
                                <path d="M8 14h.01M12 14h.01M16 14h.01M8 18h.01M12 18h.01" stroke="currentColor"
                                    stroke-width="2" stroke-linecap="round" />
                            </svg>
                        </button>

                        <button class="icon-btn theme-toggle" id="themeToggle" aria-label="Toggle theme">
                            <svg class="theme-icon-light" width="24" height="24" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor">
                                <circle cx="12" cy="12" r="5" />
                                <line x1="12" y1="1" x2="12" y2="3" />
                                <line x1="12" y1="21" x2="12" y2="23" />
                                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
                                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
                                <line x1="1" y1="12" x2="3" y2="12" />
                                <line x1="21" y1="12" x2="23" y2="12" />
                                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
                                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
                            </svg>
                            <svg class="theme-icon-dark" width="24" height="24" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor">
                                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Mobile Header Stats -->
            <div class="mobile-stats-bar">
                <div class="mobile-stat">
                    <span class="mobile-stat-value" id="mobileProgress">0%</span>
                    <span class="mobile-stat-label">Done</span>
                </div>
                <div class="mobile-stat">
                    <span class="mobile-stat-value" id="mobilePosts">0/60</span>
                    <span class="mobile-stat-label">Posts</span>
                </div>
                <div class="mobile-stat">
                    <span class="mobile-stat-value" id="mobileStreak">0d</span>
                    <span class="mobile-stat-label">Streak</span>
                </div>
            </div>
        </header>

        <!-- Sidebar -->
        <aside class="sidebar-cinebrain" id="sidebar">
            <div class="sidebar-header">
                <h2 class="sidebar-title">Schedule</h2>
                <button class="sidebar-close" id="sidebarClose" aria-label="Close sidebar">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                    </svg>
                </button>
            </div>

            <div class="search-section">
                <div class="search-wrapper">
                    <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor">
                        <circle cx="11" cy="11" r="8" />
                        <path d="m21 21-4.35-4.35" />
                    </svg>
                    <input type="text" class="search-box" placeholder="Search posts..." id="searchBox">
                    <button class="search-clear" id="searchClear" aria-label="Clear search">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" />
                        </svg>
                    </button>
                </div>
            </div>

            <div class="quick-stats-card">
                <h3 class="quick-stats-title">Today's Progress</h3>
                <div class="progress-wrapper">
                    <div class="progress-bar-modern">
                        <div class="progress-fill-modern" id="todayProgress"></div>
                        <div class="progress-glow"></div>
                    </div>
                    <span class="progress-text" id="todayProgressText">0%</span>
                </div>
            </div>

            <div class="filters-container">
                <div class="filter-group">
                    <h3 class="filter-title">Content Type</h3>
                    <div class="filter-chips">
                        <button class="filter-chip active" data-filter="all">
                            All <span class="chip-count">60</span>
                        </button>
                        <button class="filter-chip" data-filter="movie">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M18 4l2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4h-4z" />
                            </svg>
                            Movies <span class="chip-count">0</span>
                        </button>
                        <button class="filter-chip" data-filter="tv">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M21 3H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2L23 5c0-1.1-.9-2-2-2zm0 14H3V5h18v12z" />
                            </svg>
                            TV <span class="chip-count">0</span>
                        </button>
                        <button class="filter-chip" data-filter="anime">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" />
                            </svg>
                            Anime <span class="chip-count">0</span>
                        </button>
                        <button class="filter-chip" data-filter="list">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z" />
                            </svg>
                            Lists <span class="chip-count">0</span>
                        </button>
                    </div>
                </div>

                <div class="filter-group">
                    <h3 class="filter-title">Status</h3>
                    <div class="filter-chips">
                        <button class="filter-chip active" data-status="all">All</button>
                        <button class="filter-chip" data-status="pending">
                            <span class="status-dot pending"></span> Pending
                        </button>
                        <button class="filter-chip" data-status="completed">
                            <span class="status-dot completed"></span> Done
                        </button>
                    </div>
                </div>
            </div>

            <div class="days-container">
                <h3 class="filter-title">Schedule Days</h3>
                <div class="days-list" id="daysList"></div>
            </div>

            <div class="sidebar-footer">
                <button class="export-btn" id="exportBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M12 2v10m0 0l3-3m-3 3l-3-3" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" />
                        <path
                            d="M9 21H15C16.6569 21 18 19.6569 18 18V13C18 11.3431 16.6569 10 15 10H9C7.34315 10 6 11.3431 6 13V18C6 19.6569 7.34315 21 9 21Z"
                            stroke="currentColor" stroke-width="2" />
                    </svg>
                    Export Schedule
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content" id="mainContent">
            <div class="loading-state">
                <div class="cinebrain-spinner">
                    <div class="spinner-ring"></div>
                    <div class="spinner-ring"></div>
                    <div class="spinner-ring"></div>
                </div>
                <p>Loading your content schedule...</p>
            </div>
        </main>

        <!-- Mobile Bottom Navigation -->
        <nav class="mobile-bottom-nav">
            <button class="nav-item active" data-view="posts">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z" />
                </svg>
                <span>Posts</span>
            </button>
            <button class="nav-item" data-view="calendar" id="mobileCalendarBtn">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z" />
                </svg>
                <span>Calendar</span>
            </button>
            <button class="nav-item" data-view="stats">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M5 9.2h3V19H5zM10.6 5h2.8v14h-2.8zm5.6 8H19v6h-2.8z" />
                </svg>
                <span>Stats</span>
            </button>
            <button class="nav-item" id="mobileMenuBtn">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" />
                </svg>
                <span>Menu</span>
            </button>
        </nav>
    </div>

    <!-- Overlay -->
    <div class="overlay" id="overlay"></div>

    <!-- Calendar Modal -->
    <div class="modal" id="calendarModal">
        <div class="modal-content modal-calendar">
            <div class="modal-header">
                <h2>30-Day Schedule Overview</h2>
                <button class="modal-close" id="modalClose" aria-label="Close calendar">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                    </svg>
                </button>
            </div>
            <div class="calendar-grid" id="calendarGrid"></div>
        </div>
    </div>

    <!-- Post Preview Modal -->
    <div class="modal" id="previewModal">
        <div class="modal-content modal-preview">
            <div class="modal-header">
                <h2>Post Preview</h2>
                <button class="modal-close" id="previewClose" aria-label="Close preview">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                    </svg>
                </button>
            </div>
            <div class="preview-body" id="previewBody"></div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Scripts - Updated Paths -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/src/planner/data.js"></script>
    <script src="/src/planner/app.js"></script>

    <script>
        // Theme toggle
        document.getElementById('themeToggle').addEventListener('click', function () {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            document.documentElement.setAttribute('data-theme', newTheme);
            document.documentElement.setAttribute('data-bs-theme', newTheme);
            localStorage.setItem('cinebrain-theme', newTheme);
        });

        // Mobile menu
        document.getElementById('mobileMenuBtn').addEventListener('click', function () {
            document.getElementById('sidebar').classList.add('active');
            document.getElementById('overlay').classList.add('active');
            document.body.style.overflow = 'hidden';
        });

        // Sidebar close
        document.getElementById('sidebarClose').addEventListener('click', function () {
            closeSidebar();
        });

        // Mobile calendar
        document.getElementById('mobileCalendarBtn').addEventListener('click', function () {
            openCalendar();
        });

        // Update mobile stats
        function updateMobileStats() {
            const progress = document.getElementById('totalProgress').textContent;
            const posts = document.getElementById('completedCount').textContent;
            const streak = document.getElementById('currentStreak').textContent;

            document.getElementById('mobileProgress').textContent = progress;
            document.getElementById('mobilePosts').textContent = posts;
            document.getElementById('mobileStreak').textContent = streak + 'd';
        }

        // Watch for changes
        const observer = new MutationObserver(updateMobileStats);
        observer.observe(document.getElementById('totalProgress'), { childList: true });
        observer.observe(document.getElementById('completedCount'), { childList: true });
        observer.observe(document.getElementById('currentStreak'), { childList: true });
    </script>
</body>

</html>