1. index.html 

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://fonts.googleapis.com https://fonts.gstatic.com;
    style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://fonts.googleapis.com;
    font-src 'self' https://fonts.gstatic.com;
    img-src 'self' data: https: blob:;
    connect-src 'self' https://backend-app-970m.onrender.com https://api.themoviedb.org https://api.jikan.moe https://www.omdbapi.com https://www.googleapis.com https://cdn.jsdelivr.net;
    base-uri 'self';
    form-action 'self';
  ">
  <meta name="google-site-verification" content="AgYOnRPhofekNiugIMfLJ9jeeHDu3rEA2P3cNNE61_4" />
  <meta http-equiv="X-Content-Type-Options" content="nosniff">
  <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
  <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()">

  <title>CineBrain - AI-Powered Movie, TV Show & Anime Recommendations Platform</title>
  <meta name="title" content="CineBrain - AI-Powered Movie, TV Show & Anime Recommendations Platform">
  <meta name="description"
    content="CineBrain is the ultimate AI-powered entertainment platform for discovering movies, TV shows, and anime. Get personalized recommendations for Telugu, Bollywood, Hollywood, and international content. Find your next binge-watch with smart AI suggestions.">
  <meta name="keywords"
    content="CineBrain, cinebrain, movie recommendations, AI movie suggestions, TV show recommendations, anime recommendations, Telugu movies, Bollywood films, Hollywood movies, entertainment platform, what to watch, movie discovery, personalized recommendations, AI entertainment">
  <meta name="author" content="CineBrain">
  <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
  <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">

  <meta name="application-name" content="CineBrain">
  <meta name="apple-mobile-web-app-title" content="CineBrain">
  <meta name="theme-color" content="#6366f1">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="msapplication-TileColor" content="#6366f1">
  <meta name="msapplication-tooltip" content="CineBrain - AI Movie Recommendations">
  <meta name="msapplication-starturl" content="https://cinebrain.vercel.app/">

  <meta property="article:published_time" content="2025-09-10T00:00:00+00:00">
  <meta property="article:modified_time" content="2025-09-10T00:00:00+00:00">
  <meta property="og:updated_time" content="2025-09-10T00:00:00+00:00">

  <link rel="canonical" href="https://cinebrain.vercel.app/">
  <link rel="alternate" hreflang="en" href="https://cinebrain.vercel.app/">
  <link rel="alternate" hreflang="x-default" href="https://cinebrain.vercel.app/">

  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon-16x16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="48x48" href="/assets/images/favicon-48x48.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/assets/images/favicon-192x192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="/assets/images/favicon-512x512.png">
  <link rel="apple-touch-icon" sizes="57x57" href="/assets/images/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/assets/images/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/assets/images/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/assets/images/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/assets/images/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/assets/images/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/assets/images/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/assets/images/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/apple-icon-180x180.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">

  <meta name="msapplication-TileImage" content="/assets/images/ms-icon-144x144.png">
  <meta name="msapplication-square70x70logo" content="/assets/images/ms-icon-70x70.png">
  <meta name="msapplication-square150x150logo" content="/assets/images/ms-icon-150x150.png">
  <meta name="msapplication-wide310x150logo" content="/assets/images/ms-icon-310x150.png">
  <meta name="msapplication-square310x310logo" content="/assets/images/ms-icon-310x310.png">

  <meta property="og:type" content="website">
  <meta property="og:url" content="https://cinebrain.vercel.app/">
  <meta property="og:title" content="CineBrain - AI Movie, TV Show & Anime Recommendations">
  <meta property="og:description"
    content="Discover your next favorite movie, TV show, or anime with CineBrain's AI-powered recommendations. Personalized suggestions for Telugu, Bollywood, Hollywood & international entertainment.">
  <meta property="og:image" content="https://cinebrain.vercel.app/assets/images/og-image-1200x630.jpg">
  <meta property="og:image:secure_url" content="https://cinebrain.vercel.app/assets/images/og-image-1200x630.jpg">
  <meta property="og:image:type" content="image/jpeg">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image:alt" content="CineBrain AI Movie Recommendations Platform">
  <meta property="og:site_name" content="CineBrain">
  <meta property="og:locale" content="en_US">
  <meta property="fb:app_id" content="your_facebook_app_id">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://cinebrain.vercel.app/">
  <meta name="twitter:title" content="CineBrain - AI Movie & TV Recommendations">
  <meta name="twitter:description"
    content="AI-powered movie, TV show & anime recommendations. Discover what to watch next with personalized suggestions.">
  <meta name="twitter:image" content="https://cinebrain.vercel.app/assets/images/twitter-image-1200x600.jpg">
  <meta name="twitter:image:alt" content="CineBrain AI Movie Recommendations">
  <meta name="twitter:site" content="@cinebrain">
  <meta name="twitter:creator" content="@cinebrain">

  <link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml">
  <link rel="alternate" type="application/rss+xml" title="CineBrain - Latest Updates" href="/rss.xml">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="preconnect" href="https://image.tmdb.org">
  <link rel="dns-prefetch" href="https://api.themoviedb.org">

  <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Inter:wght@300;400;500;600;700&display=swap"
    rel="stylesheet">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">

  <link rel="stylesheet" href="/assets/css/topbar.css">
  <link rel="stylesheet" href="/assets/css/mobile-nav.css">
  <link rel="stylesheet" href="/assets/css/content-card.css">
  <link rel="stylesheet" href="/assets/css/hero.css">
  <link rel="stylesheet" href="/assets/css/theme.css">
  <link rel="stylesheet" href="/assets/css/footer.css">


  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "WebSite",
        "@id": "https://cinebrain.vercel.app/#website",
        "url": "https://cinebrain.vercel.app/",
        "name": "CineBrain",
        "alternateName": ["CineBrain Movie Recommendations", "CineBrain AI", "Cine Brain"],
        "description": "AI-powered movie, TV show, and anime recommendation platform with personalized suggestions",
        "inLanguage": "en-US",
        "about": {
          "@type": "Thing",
          "name": "Entertainment Recommendations",
          "description": "AI-powered entertainment discovery platform"
        },
        "audience": {
          "@type": "Audience",
          "audienceType": "Movie and TV Show Enthusiasts"
        },
        "potentialAction": {
          "@type": "SearchAction",
          "target": {
            "@type": "EntryPoint",
            "urlTemplate": "https://cinebrain.vercel.app/search?q={search_term_string}"
          },
          "query-input": {
            "@type": "PropertyValueSpecification",
            "valueRequired": true,
            "valueName": "search_term_string"
          }
        },
        "publisher": {
          "@id": "https://cinebrain.vercel.app/#organization"
        }
      },
      {
        "@type": "Organization",
        "@id": "https://cinebrain.vercel.app/#organization",
        "name": "CineBrain",
        "legalName": "CineBrain Entertainment Platform",
        "url": "https://cinebrain.vercel.app/",
        "logo": {
          "@type": "ImageObject",
          "url": "https://cinebrain.vercel.app/assets/images/logo-512x512.png",
          "width": 512,
          "height": 512,
          "caption": "CineBrain Logo"
        },
        "image": "https://cinebrain.vercel.app/assets/images/logo-512x512.png",
        "description": "CineBrain - The ultimate AI-powered entertainment recommendation platform for movies, TV shows, and anime",
        "foundingDate": "2025",
        "keywords": "AI movie recommendations, entertainment platform, personalized suggestions",
        "sameAs": [
          "https://twitter.com/cinebrain",
          "https://facebook.com/cinebrain",
          "https://instagram.com/cinebrain"
        ],
        "contactPoint": {
          "@type": "ContactPoint",
          "contactType": "customer service",
          "availableLanguage": "English"
        }
      },
      {
        "@type": "Brand",
        "@id": "https://cinebrain.vercel.app/#brand",
        "name": "CineBrain",
        "alternateName": ["Cine Brain", "CineBrain AI"],
        "logo": "https://cinebrain.vercel.app/assets/images/logo-512x512.png",
        "url": "https://cinebrain.vercel.app/",
        "description": "AI-powered entertainment recommendation platform",
        "slogan": "The Mind Behind Your Next Favorite"
      },
      {
        "@type": "WebPage",
        "@id": "https://cinebrain.vercel.app/#webpage",
        "url": "https://cinebrain.vercel.app/",
        "name": "CineBrain - AI Movie Recommendations",
        "alternateName": "CineBrain Home",
        "isPartOf": {
          "@id": "https://cinebrain.vercel.app/#website"
        },
        "about": {
          "@type": "Thing",
          "name": "Movie and TV Show Recommendations",
          "description": "AI-powered personalized entertainment suggestions"
        },
        "description": "Discover trending movies, TV shows, and anime with AI-powered recommendations tailored to your preferences",
        "breadcrumb": {
          "@id": "https://cinebrain.vercel.app/#breadcrumb"
        },
        "mainEntity": {
          "@id": "https://cinebrain.vercel.app/#organization"
        },
        "datePublished": "2025-09-10T00:00:00+00:00",
        "dateModified": "2025-09-10T00:00:00+00:00"
      },
      {
        "@type": "BreadcrumbList",
        "@id": "https://cinebrain.vercel.app/#breadcrumb",
        "itemListElement": [{
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://cinebrain.vercel.app/"
        }]
      },
      {
        "@type": "WebApplication",
        "name": "CineBrain",
        "url": "https://cinebrain.vercel.app/",
        "description": "AI-powered movie, TV show, and anime recommendation platform",
        "applicationCategory": "Entertainment",
        "operatingSystem": "Web Browser",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "USD"
        },
        "featureList": [
          "AI-powered recommendations",
          "Movie discovery",
          "TV show suggestions",
          "Anime recommendations",
          "Personalized content"
        ]
      },
      {
        "@type": "FAQPage",
        "mainEntity": [
          {
            "@type": "Question",
            "name": "What is CineBrain?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "CineBrain is an AI-powered platform that helps you discover movies, TV shows, and anime with personalized recommendations based on your preferences and viewing history."
            }
          },
          {
            "@type": "Question",
            "name": "How does CineBrain work?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "CineBrain uses advanced AI algorithms to analyze your preferences, viewing patterns, and ratings to suggest movies, TV shows, and anime that match your taste."
            }
          },
          {
            "@type": "Question",
            "name": "Is CineBrain free to use?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Yes, CineBrain is completely free to use. You can get unlimited AI-powered recommendations for movies, TV shows, and anime without any cost."
            }
          },
          {
            "@type": "Question",
            "name": "What types of content does CineBrain recommend?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "CineBrain recommends a wide variety of content including Hollywood movies, Bollywood films, Telugu cinema, international films, TV shows, web series, and anime from around the world."
            }
          }
        ]
      }
    ]
  }
  </script>

  <script>
    (function () {
      try {
        const savedTheme = localStorage.getItem('cinebrain-theme');
        const theme = (savedTheme === 'light' || savedTheme === 'dark') ? savedTheme : 'dark';
        document.documentElement.setAttribute('data-theme', theme);
        document.documentElement.setAttribute('data-bs-theme', theme);
      } catch (e) {
        document.documentElement.setAttribute('data-theme', 'dark');
        document.documentElement.setAttribute('data-bs-theme', 'dark');
      }
    })();
  </script>

</head>

<body itemscope itemtype="https://schema.org/WebPage">

  <a href="#main-content" class="visually-hidden-focusable">Skip to main content</a>

  <h1 class="visually-hidden">CineBrain - AI-Powered Movie, TV Show, and Anime Recommendations Platform</h1>

  <div class="visually-hidden">
    <h2>Discover Your Next Favorite Entertainment with CineBrain</h2>
    <p>CineBrain is the ultimate AI-powered entertainment discovery platform. Get personalized movie recommendations, TV
      show suggestions, and anime picks tailored to your unique taste. Whether you love Telugu movies, Bollywood
      blockbusters, Hollywood hits, or international cinema, our smart AI helps you find exactly what to watch next.</p>
  </div>

  <header itemscope itemtype="https://schema.org/WPHeader">
    <nav class="navbar navbar-expand-lg navbar-cinebrain fixed-top" role="navigation" aria-label="Main navigation"
      itemscope itemtype="https://schema.org/SiteNavigationElement">
      <div class="container-fluid">
        <div class="navbar-brand-wrapper">
          <a href="/" style="text-decoration: none;" aria-label="CineBrain Home - AI Movie Recommendations"
            itemprop="url">
            <div class="navbar-brand-cinebrain">CineBrain</div>
            <div class="tagline">
              <span class="tagline-full">The Mind Behind Your Next Favorite</span>
              <span class="tagline-medium" style="display: none;">Your Next Favorite</span>
              <span class="tagline-short" style="display: none;">Next Favorite</span>
            </div>
          </a>
        </div>

        <div class="search-container desktop-search" id="desktopSearchContainer">
          <div class="search-wrapper">
            <div class="search-bar-wrapper">
              <div class="search-input-wrapper">
                <i data-feather="search" class="search-icon"></i>
                <input type="text" class="form-control search-input" id="desktopSearchInput"
                  placeholder="Search movies, shows, anime..." autocomplete="off"
                  aria-label="Search CineBrain for movies, TV shows, and anime" maxlength="100">
                <button class="search-clear" id="searchClear" aria-label="Clear search" style="display: none;">
                  <i data-feather="x"></i>
                </button>
              </div>
              <div class="search-results" id="desktopSearchResults" role="region" aria-live="polite">
              </div>
            </div>
          </div>
        </div>

        <div class="nav-icons-section">
          <button class="icon-button mobile-search-trigger" id="mobileSearchTrigger" aria-label="Open search">
            <i data-feather="search"></i>
          </button>

          <button class="icon-button theme-toggle" id="themeToggle" aria-label="Toggle theme">
            <i data-feather="sun" class="theme-icon theme-icon-light"></i>
            <i data-feather="moon" class="theme-icon theme-icon-dark"></i>
          </button>

          <div class="dropdown">
            <div class="avatar-menu" data-bs-toggle="dropdown" aria-expanded="false" id="avatarMenu" role="button"
              aria-label="User menu">
              <i data-feather="user"></i>
            </div>
            <ul class="dropdown-menu dropdown-menu-end dropdown-menu-cinebrain" id="userDropdown">
            </ul>
          </div>
        </div>
      </div>
    </nav>
  </header>

  <div class="mobile-search-overlay" id="mobileSearchOverlay" aria-hidden="true">
    <div class="container">
      <div class="mobile-search-header">
        <button class="btn-back" id="closeMobileSearch" aria-label="Close search">
          <i data-feather="arrow-left"></i>
        </button>
        <div class="mobile-search-input-wrapper">
          <i data-feather="search" class="search-icon"></i>
          <input type="text" class="form-control search-input" id="mobileSearchInput"
            placeholder="Search movies, shows, anime..." autocomplete="off" autofocus
            aria-label="Search CineBrain for entertainment" maxlength="100">
        </div>
      </div>
      <div class="search-results mobile-results" id="mobileSearchResults" role="region" aria-live="polite">
      </div>
    </div>
  </div>

  <main id="main-content" role="main" itemscope itemtype="https://schema.org/WebPageElement">

    <section class="hero-section" id="heroSection" tabindex="0">
      <div class="hero-background">
        <img id="heroImage" class="hero-image" alt="Hero Content">
      </div>
      <div class="hero-overlay"></div>

      <div class="hero-loading" id="heroLoading">
        <div class="skeleton skeleton-badge">
          <div class="skeleton-shimmer"></div>
        </div>

        <div class="skeleton skeleton-title">
          <div class="skeleton-shimmer"></div>
        </div>

        <div class="skeleton-info">
          <div class="skeleton skeleton-info-item">
            <div class="skeleton-shimmer"></div>
          </div>
          <div class="skeleton skeleton-info-item">
            <div class="skeleton-shimmer"></div>
          </div>
          <div class="skeleton skeleton-info-item">
            <div class="skeleton-shimmer"></div>
          </div>
        </div>

        <div class="skeleton-description">
          <div class="skeleton skeleton-description-line">
            <div class="skeleton-shimmer"></div>
          </div>
          <div class="skeleton skeleton-description-line">
            <div class="skeleton-shimmer"></div>
          </div>
          <div class="skeleton skeleton-description-line">
            <div class="skeleton-shimmer"></div>
          </div>
        </div>

        <div class="skeleton-actions">
          <div class="skeleton skeleton-btn">
            <div class="skeleton-shimmer"></div>
          </div>
          <div class="skeleton skeleton-btn">
            <div class="skeleton-shimmer"></div>
          </div>
          <div class="skeleton skeleton-btn">
            <div class="skeleton-shimmer"></div>
          </div>
        </div>
      </div>

      <div class="hero-content">
        <div class="hero-badge">
          <span id="heroType">TRENDING</span>
        </div>

        <h1 class="hero-title" id="heroTitle">Loading...</h1>

        <div class="hero-info">
          <span class="hero-rating" id="heroRating">
            <svg viewBox="0 0 24 24">
              <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" />
            </svg>
            <span>--</span>
          </span>
          <span id="heroYear">----</span>
          <span id="heroGenres">Loading...</span>
        </div>

        <p class="hero-description" id="heroDescription">
          Loading description...
        </p>

        <div class="hero-actions">
          <button class="hero-btn hero-btn-primary" id="heroWatchBtn">
            <i data-feather="play"></i>
            <span class="btn-text">View Details</span>
          </button>
          <button class="hero-btn hero-btn-secondary" id="heroWishlistBtn">
            <i data-feather="heart"></i>
            <span class="btn-text">Add to List</span>
          </button>
          <button class="hero-btn hero-btn-tertiary" id="heroInfoBtn">
            <i data-feather="info"></i>
            <span class="btn-text">More Info</span>
          </button>
        </div>
      </div>
    </section>

    <div class="container">
      <div class="visually-hidden">
        <h2>Trending Movies and Shows on CineBrain</h2>
        <h3>Popular Movies - AI-Curated Recommendations</h3>
        <h3>Latest TV Shows - Personalized for You</h3>
        <h3>Top Anime Series - Discover New Favorites</h3>
        <h3>Telugu Movies - Regional Cinema Excellence</h3>
        <h3>Bollywood Films - Best of Indian Cinema</h3>
        <h3>Hollywood Blockbusters - Global Entertainment</h3>
      </div>

      <div id="content-container" aria-label="CineBrain AI-powered entertainment recommendations"
        itemprop="mainContentOfPage">
      </div>
    </div>
  </main>

  <nav class="mobile-bottom-nav" id="mobileBottomNav" aria-label="Mobile navigation" itemscope
    itemtype="https://schema.org/SiteNavigationElement">
    <div class="mobile-nav-container" id="mobileNavContainer">
    </div>
  </nav>

  <aside class="mobile-menu-overlay" id="mobileMenuOverlay" aria-hidden="true">
    <div class="menu-handle" role="presentation"></div>
    <div class="menu-header">
      <h3 class="menu-title">CineBrain Menu</h3>
      <button class="menu-close-btn" id="mobileMenuClose" aria-label="Close menu">
        <i data-feather="x"></i>
      </button>
    </div>

    <section class="menu-section">
      <h4 class="menu-section-title">Browse Categories</h4>
      <div class="mobile-menu-grid" id="mobileMenuGrid">
      </div>
    </section>

    <section class="menu-section">
      <h4 class="menu-section-title" id="userSectionTitle">Account</h4>
      <div class="mobile-menu-list" id="mobileMenuList">
      </div>
    </section>
  </aside>

  <footer class="footer-cinebrain" itemscope itemtype="https://schema.org/WPFooter">
    <div class="footer-container">

      <!-- Main Footer Content -->
      <div class="footer-main">

        <!-- Brand Section -->
        <div class="footer-brand">
          <div class="footer-logo">
            <h3>CineBrain</h3>
            <span class="footer-tagline">The Mind Behind Your Next Favorite</span>
          </div>
          <p class="footer-description">
            AI-powered movie, TV show, and anime recommendations tailored just for you.
            Discover your next binge-watch with personalized suggestions.
          </p>

          <!-- Social Links moved here -->
          <div class="footer-social">
            <a href="https://twitter.com/cinebrain" class="footer-social-link" aria-label="Follow CineBrain on Twitter">
              <i data-feather="twitter"></i>
            </a>
            <a href="https://facebook.com/cinebrain" class="footer-social-link"
              aria-label="Follow CineBrain on Facebook">
              <i data-feather="facebook"></i>
            </a>
            <a href="https://instagram.com/cinebrain" class="footer-social-link"
              aria-label="Follow CineBrain on Instagram">
              <i data-feather="instagram"></i>
            </a>
          </div>
        </div>

        <!-- Quick Links -->
        <div class="footer-links">
          <div class="footer-section">
            <h4 class="footer-section-title">Support</h4>
            <ul class="footer-list">
              <li><a href="/support/help-center.html" class="footer-link">Help Center</a></li>
              <li><a href="/support/contact.html" class="footer-link">Contact Us</a></li>
              <li><a href="/support/faq.html" class="footer-link">FAQ</a></li>
              <li><a href="/support/feedback.html" class="footer-link">Feedback</a></li>
              <li><a href="/support/report-issue.html" class="footer-link">Report Issue</a></li>
            </ul>
          </div>

          <div class="footer-section">
            <h4 class="footer-section-title">Discover</h4>
            <ul class="footer-list">
              <li><a href="/trending.html" class="footer-link">Trending Now</a></li>
              <li><a href="/new-releases.html" class="footer-link">New Releases</a></li>
              <li><a href="/top-rated.html" class="footer-link">Top Rated</a></li>
              <li><a href="/genres.html" class="footer-link">Browse Genres</a></li>
              <li><a href="/regional.html" class="footer-link">Regional Content</a></li>
            </ul>
          </div>

          <div class="footer-section">
            <h4 class="footer-section-title">About</h4>
            <ul class="footer-list">
              <li><a href="/about.html" class="footer-link">About CineBrain</a></li>
              <li><a href="/how-it-works.html" class="footer-link">How It Works</a></li>
              <li><a href="/blog.html" class="footer-link">Blog</a></li>
              <li><a href="/press.html" class="footer-link">Press</a></li>
              <li><a href="/careers.html" class="footer-link">Careers</a></li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Footer Bottom -->
      <div class="footer-bottom">
        <div class="footer-bottom-content">

          <!-- Copyright with mobile-specific line breaks -->
          <div class="footer-copyright">
            <p>
              <span class="copyright-line">© 2025 CineBrain.</span>
              <span class="copyright-line">All rights reserved. Made with <span class="heart">❤️</span> for movie
                lovers.</span>
            </p>
          </div>

          <!-- Legal Links -->
          <div class="footer-legal">
            <span class="legal-line">
              <a href="/legal/privacy-policy.html" class="footer-legal-link">Privacy</a>
              <a href="/legal/terms-of-service.html" class="footer-legal-link">Terms of Service</a>
              <a href="/legal/cookie-policy.html" class="footer-legal-link">Cookie</a>
            </span>
          </div>
        </div>
      </div>
    </div>
  </footer>
  <div class="mobile-backdrop" id="mobileBackdrop" aria-hidden="true"></div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/protobufjs@7.2.5/dist/protobuf.min.js"></script>

  <script>
    window.secureStorage = {
      getItem: function (key) {
        try {
          return localStorage.getItem(key);
        } catch (e) {
          console.error('Storage access error:', e);
          return null;
        }
      },
      setItem: function (key, value) {
        try {
          if (typeof value === 'string' && value.length < 5000) {
            localStorage.setItem(key, value);
          }
        } catch (e) {
          console.error('Storage write error:', e);
        }
      },
      removeItem: function (key) {
        try {
          localStorage.removeItem(key);
        } catch (e) {
          console.error('Storage remove error:', e);
        }
      }
    };

    window.sanitizeInput = function (str) {
      if (typeof str !== 'string') return '';
      const div = document.createElement('div');
      div.textContent = str;
      return div.innerHTML;
    };
  </script>

  <script src="/assets/js/footer.js"></script>
  <script src="/assets/js/theme-manager.js"></script>
  <script src="/assets/js/opening.js"></script>
  <script src="/assets/js/topbar.js"></script>
  <script src="/assets/js/mobile-nav.js"></script>
  <script src="/assets/js/hero.js"></script>
  <script src="/assets/js/content-card.js"></script>
</body>

</html>


2. content-card.css 


:root {
    --card-width: clamp(120px, 25vw, 200px);
    --card-poster-ratio: 150%;
    --card-border-radius: clamp(4px, 1vw, 8px);
    --card-gap: clamp(8px, 2vw, 16px);
    --card-transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    --carousel-scroll: smooth;

    --cinebrain-primary: #113CCF;
    --cinebrain-primary-light: #1E4FE5;

    --rating-gold: #FFD700;
    --rating-gold-light: #FFED4E;
    --rating-gold-dark: #FFA500;
}

@media (max-width: 768px) {
    :root {
        --carousel-scroll: auto;
    }

    .carousel-nav,
    .wishlist-btn,
    .rating-badge,
    .content-type-badge {
        backdrop-filter: none !important;
        -webkit-backdrop-filter: none !important;
    }

    .content-card {
        will-change: auto;
        contain: layout style paint;
        transform: translateZ(0);
        -webkit-transform: translateZ(0);
        transition: none;
    }

    .content-card:hover {
        transform: none;
    }

    .carousel-wrapper {
        -webkit-overflow-scrolling: touch;
        scroll-snap-type: none;
        overscroll-behavior-x: contain;
        scroll-behavior: auto;
    }

    .card-poster,
    .card-overlays {
        transform: translateZ(0);
        -webkit-transform: translateZ(0);
    }

    .card-overlays {
        background: none;
    }

    .card-bottom-overlay {
        background: linear-gradient(to top, rgba(0, 0, 0, 0.7) 0%, transparent 60%);
    }

    .wishlist-btn:active {
        transform: scale(0.95);
        transition: transform 0.1s ease;
    }

    .skeleton-shimmer {
        animation-duration: 2s;
    }
}

[data-theme="dark"] {
    --card-bg: #000000;
    --card-hover-bg: rgba(255, 255, 255, 0.05);
    --card-overlay-gradient: linear-gradient(to top, rgba(0, 0, 0, 0.9) 0%, transparent 60%);
    --skeleton-bg: rgba(255, 255, 255, 0.08);
    --skeleton-shine: rgba(255, 255, 255, 0.12);
    --row-title-color: #ffffff;
    --see-all-color: #888888;
    --see-all-hover-color: #ffffff;
    --nav-button-bg: rgba(0, 0, 0, 0.7);
    --nav-button-hover-bg: rgba(0, 0, 0, 0.9);
    --nav-button-border: rgba(255, 255, 255, 0.2);
    --nav-icon-color: #ffffff;
    --badge-bg: rgba(0, 0, 0, 0.8);
    --badge-text: #ffffff;
    --badge-border: rgba(255, 255, 255, 0.1);
    --wishlist-btn-bg: rgba(0, 0, 0, 0.6);
    --wishlist-btn-border: rgba(255, 255, 255, 0.2);
    --wishlist-icon-color: #ffffff;
    --wishlist-active: var(--cinebrain-primary);

    --rating-star-color: var(--rating-gold);
    --rating-text-color: var(--rating-gold-light);

    --genre-chip-bg: rgba(255, 255, 255, 0.08);
    --genre-chip-border: rgba(255, 255, 255, 0.1);
    --genre-chip-text: #888888;
    --genre-chip-hover-bg: rgba(255, 255, 255, 0.12);
    --genre-chip-hover-text: #ffffff;
    --text-primary: #ffffff;
    --text-secondary: #888888;
    --text-muted: #666666;
    --error-color: #ffffff;
    --error-text-secondary: #888888;
    --retry-btn-bg: rgba(255, 255, 255, 0.1);
    --retry-btn-text: #ffffff;
    --retry-btn-border: rgba(255, 255, 255, 0.2);
    --retry-btn-hover-bg: rgba(255, 255, 255, 0.15);
    --content-border: rgba(255, 255, 255, 0.05);
}

[data-theme="light"] {
    --card-bg: #ffffff;
    --card-hover-bg: rgba(0, 0, 0, 0.02);
    --card-overlay-gradient: linear-gradient(to top, rgba(0, 0, 0, 0.8) 0%, transparent 60%);
    --skeleton-bg: rgba(0, 0, 0, 0.06);
    --skeleton-shine: rgba(0, 0, 0, 0.08);
    --row-title-color: #000000;
    --see-all-color: #666666;
    --see-all-hover-color: #000000;
    --nav-button-bg: rgba(255, 255, 255, 0.9);
    --nav-button-hover-bg: rgba(255, 255, 255, 0.95);
    --nav-button-border: rgba(0, 0, 0, 0.15);
    --nav-icon-color: #000000;
    --badge-bg: rgba(0, 0, 0, 0.8);
    --badge-text: #ffffff;
    --badge-border: transparent;
    --wishlist-btn-bg: rgba(255, 255, 255, 0.9);
    --wishlist-btn-border: rgba(0, 0, 0, 0.1);
    --wishlist-icon-color: #000000;
    --wishlist-active: var(--cinebrain-primary);

    --rating-star-color: var(--rating-gold-dark);
    --rating-text-color: var(--rating-gold-dark);

    --genre-chip-bg: rgba(0, 0, 0, 0.05);
    --genre-chip-border: rgba(0, 0, 0, 0.08);
    --genre-chip-text: #666666;
    --genre-chip-hover-bg: rgba(0, 0, 0, 0.08);
    --genre-chip-hover-text: #000000;
    --text-primary: #000000;
    --text-secondary: #666666;
    --text-muted: #999999;
    --error-color: #000000;
    --error-text-secondary: #666666;
    --retry-btn-bg: rgba(0, 0, 0, 0.05);
    --retry-btn-text: #000000;
    --retry-btn-border: rgba(0, 0, 0, 0.1);
    --retry-btn-hover-bg: rgba(0, 0, 0, 0.08);
    --content-border: rgba(0, 0, 0, 0.05);
}

.container-cinebrain {
    max-width: 1920px;
    margin: 0 auto;
    padding: clamp(12px, 3vw, 20px);
    padding-top: calc(var(--navbar-height) + clamp(12px, 3vw, 20px));
}

.content-container-cinebrain {
    position: relative;
    width: 100%;
}

.content-row {
    margin-bottom: clamp(24px, 6vw, 40px);
    position: relative;
    opacity: 0;
    animation: fadeInUp 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.content-row:nth-child(1) {
    animation-delay: 0.1s;
}

.content-row:nth-child(2) {
    animation-delay: 0.2s;
}

.content-row:nth-child(3) {
    animation-delay: 0.3s;
}

.content-row:nth-child(4) {
    animation-delay: 0.4s;
}

.content-row:nth-child(5) {
    animation-delay: 0.5s;
}

.content-row:nth-child(6) {
    animation-delay: 0.6s;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.row-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: clamp(8px, 2vw, 16px);
    padding: 0 clamp(4px, 1vw, 8px);
}

.row-title {
    font-size: clamp(1.1rem, 4vw, 1.5rem);
    font-weight: 600;
    color: var(--row-title-color);
    letter-spacing: -0.02em;
    line-height: 1.2;
}

.see-all {
    color: var(--see-all-color);
    text-decoration: none;
    font-size: clamp(0.75rem, 2vw, 0.875rem);
    font-weight: 500;
    transition: var(--card-transition);
    padding: clamp(4px, 1vw, 8px) clamp(8px, 2vw, 12px);
    border-radius: clamp(4px, 1vw, 6px);
    display: flex;
    align-items: center;
    gap: 4px;
}

.see-all:hover {
    color: var(--see-all-hover-color);
    transform: translateX(2px);
}

.carousel-container {
    position: relative;
    overflow: hidden;
    margin: 0 calc(clamp(12px, 3vw, 20px) * -1);
    padding: 0 clamp(12px, 3vw, 20px);
}

.carousel-wrapper {
    display: grid;
    grid-auto-flow: column;
    grid-auto-columns: var(--card-width);
    gap: var(--card-gap);
    overflow-x: auto;
    scroll-behavior: var(--carousel-scroll);
    scroll-snap-type: x mandatory;
    scrollbar-width: none;
    -ms-overflow-style: none;
    padding: clamp(4px, 1vw, 8px) 0 clamp(16px, 4vw, 24px);
    -webkit-overflow-scrolling: touch;
    overscroll-behavior-x: contain;
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
}

.carousel-wrapper::-webkit-scrollbar {
    display: none;
}

.carousel-nav {
    position: absolute;
    top: 45%;
    transform: translateY(-50%);
    width: clamp(36px, 8vw, 44px);
    height: clamp(36px, 8vw, 44px);
    background: var(--nav-button-bg);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid var(--nav-button-border);
    border-radius: 50%;
    display: none;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 10;
    transition: var(--card-transition);
    opacity: 0;
}

@media (min-width: 1024px) {
    .carousel-nav {
        display: flex;
    }

    .carousel-container:hover .carousel-nav:not(.disabled) {
        opacity: 1;
    }
}

.carousel-nav:hover:not(.disabled) {
    background: var(--nav-button-hover-bg);
    transform: translateY(-50%) scale(1.05);
    border-color: var(--nav-icon-color);
}

.carousel-nav.prev {
    left: clamp(4px, 1vw, 8px);
}

.carousel-nav.next {
    right: clamp(4px, 1vw, 8px);
}

.carousel-nav svg {
    width: 50%;
    height: 50%;
    stroke: var(--nav-icon-color);
    fill: none;
    stroke-width: 2;
}

.carousel-nav.disabled {
    opacity: 0.2 !important;
    cursor: not-allowed;
}

.content-card {
    scroll-snap-align: start;
    position: relative;
    cursor: pointer;
    transition: var(--card-transition), opacity 0.3s ease, transform 0.3s ease;
    will-change: transform;
    border-radius: var(--card-border-radius);
    overflow: hidden;
    -webkit-tap-highlight-color: transparent;
}

.content-card:hover {
    transform: scale(1.04);
    z-index: 5;
}

.card-poster-container {
    position: relative;
    width: 100%;
    padding-bottom: var(--card-poster-ratio);
    background: var(--skeleton-bg);
    border-radius: var(--card-border-radius);
    overflow: hidden;
    border: 1px solid var(--content-border);
}

.content-card:hover .card-poster-container {
    border-color: var(--nav-button-border);
}

.card-poster {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.card-poster.loaded {
    opacity: 1;
}

.content-type-badge {
    position: absolute;
    top: clamp(6px, 1.5vw, 8px);
    left: clamp(6px, 1.5vw, 8px);
    background: var(--badge-bg);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid var(--badge-border);
    padding: clamp(2px, 0.5vw, 3px) clamp(6px, 1.5vw, 8px);
    border-radius: clamp(2px, 0.5vw, 4px);
    font-size: clamp(0.5rem, 1.3vw, 0.65rem);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    z-index: 3;
    color: var(--badge-text);
}

.content-type-badge.movie,
.content-type-badge.tv,
.content-type-badge.anime {
    background: var(--badge-bg);
    color: var(--badge-text);
}

.card-overlays {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    padding: clamp(6px, 1.5vw, 8px);
    pointer-events: none;
    z-index: 2;
}

.card-top-overlay {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    pointer-events: all;
}

.card-bottom-overlay {
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    pointer-events: all;
    background: var(--card-overlay-gradient);
    margin: 0 calc(clamp(6px, 1.5vw, 8px) * -1) calc(clamp(6px, 1.5vw, 8px) * -1);
    padding: clamp(16px, 4vw, 20px) clamp(6px, 1.5vw, 8px) clamp(6px, 1.5vw, 8px);
}

.wishlist-btn {
    width: clamp(28px, 7vw, 32px);
    height: clamp(28px, 7vw, 32px);
    background: var(--wishlist-btn-bg);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid var(--wishlist-btn-border);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: var(--card-transition);
    -webkit-tap-highlight-color: transparent;
}

.wishlist-btn:hover {
    transform: scale(1.1);
    background: var(--nav-button-hover-bg);
}

.wishlist-btn svg {
    width: 55%;
    height: 55%;
    fill: none;
    stroke: var(--wishlist-icon-color);
    stroke-width: 2;
    transition: all 0.3s;
}

.wishlist-btn.active svg {
    fill: var(--wishlist-active);
    stroke: var(--wishlist-active);
    animation: heartBeat 0.3s ease;
}

@keyframes heartBeat {

    0%,
    100% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.2);
    }
}

.rating-badge {
    background: var(--badge-bg);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid var(--badge-border);
    padding: clamp(2px, 0.5vw, 3px) clamp(6px, 1.5vw, 8px);
    border-radius: clamp(2px, 0.5vw, 4px);
    font-size: clamp(0.6rem, 1.5vw, 0.7rem);
    font-weight: 600;
    color: var(--rating-text-color);
    display: flex;
    align-items: center;
    gap: clamp(2px, 0.5vw, 3px);
    transition: var(--card-transition);
}

.rating-badge svg {
    width: clamp(10px, 2.5vw, 11px);
    height: clamp(10px, 2.5vw, 11px);
    fill: var(--rating-star-color);
}

.card-info {
    padding: clamp(8px, 2vw, 10px) clamp(6px, 1.5vw, 8px);
    background: var(--card-bg);
}

.card-title {
    font-size: clamp(0.7rem, 1.8vw, 0.85rem);
    font-weight: 500;
    line-height: 1.3;
    margin-bottom: clamp(2px, 0.5vw, 3px);
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
    color: var(--text-primary);
    min-height: 2.6em;
}

.card-meta {
    display: flex;
    align-items: center;
    gap: clamp(4px, 1vw, 6px);
    margin-bottom: clamp(4px, 1vw, 6px);
    font-size: clamp(0.6rem, 1.5vw, 0.7rem);
}

.card-year {
    color: var(--text-secondary);
}

.card-runtime {
    color: var(--text-muted);
}

.card-genres {
    display: flex;
    flex-wrap: wrap;
    gap: clamp(2px, 0.5vw, 3px);
}

.genre-chip {
    background: var(--genre-chip-bg);
    border: 1px solid var(--genre-chip-border);
    padding: clamp(1px, 0.25vw, 2px) clamp(4px, 1vw, 6px);
    border-radius: clamp(2px, 0.5vw, 3px);
    font-size: clamp(0.55rem, 1.4vw, 0.65rem);
    color: var(--genre-chip-text);
    white-space: nowrap;
    transition: all 0.2s;
}

.genre-chip:hover {
    background: var(--genre-chip-hover-bg);
    color: var(--genre-chip-hover-text);
}

.skeleton {
    background: linear-gradient(90deg,
            var(--skeleton-bg) 0%,
            var(--skeleton-shine) 50%,
            var(--skeleton-bg) 100%);
    background-size: 200% 100%;
    animation: skeleton-loading 1.5s infinite;
}

@keyframes skeleton-loading {
    0% {
        background-position: 200% 0;
    }

    100% {
        background-position: -200% 0;
    }
}

.skeleton-card {
    scroll-snap-align: start;
    width: var(--card-width);
    opacity: 0;
    animation: skeletonFadeIn 0.5s ease forwards;
}

@keyframes skeletonFadeIn {
    to {
        opacity: 1;
    }
}

.skeleton-poster {
    position: relative;
    width: 100%;
    padding-bottom: var(--card-poster-ratio);
    border-radius: var(--card-border-radius);
    overflow: hidden;
    background: var(--skeleton-bg);
}

.skeleton-info {
    padding: clamp(8px, 2vw, 10px) clamp(6px, 1.5vw, 8px);
}

.skeleton-title {
    height: clamp(12px, 3vw, 14px);
    margin-bottom: clamp(4px, 1vw, 6px);
    border-radius: 2px;
    width: 80%;
    background: var(--skeleton-bg);
    position: relative;
    overflow: hidden;
}

.skeleton-meta {
    height: clamp(10px, 2.5vw, 12px);
    border-radius: 2px;
    width: 60%;
    background: var(--skeleton-bg);
    position: relative;
    overflow: hidden;
}

.skeleton-shimmer {
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg,
            transparent 0%,
            var(--skeleton-shine) 50%,
            transparent 100%);
    animation: shimmer 1.5s infinite;
}

@keyframes shimmer {
    0% {
        left: -100%;
    }

    100% {
        left: 100%;
    }
}

.loading-spinner {
    display: inline-block;
    width: clamp(16px, 4vw, 20px);
    height: clamp(16px, 4vw, 20px);
    border: 2px solid var(--skeleton-bg);
    border-top-color: var(--row-title-color);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

.error-message {
    grid-column: span 12;
    text-align: center;
    padding: clamp(24px, 6vw, 40px) clamp(16px, 4vw, 24px);
}

.error-message h3 {
    font-size: clamp(1rem, 2.5vw, 1.2rem);
    margin-bottom: clamp(6px, 1.5vw, 8px);
    color: var(--error-color);
    font-weight: 500;
}

.error-message p {
    font-size: clamp(0.8rem, 2vw, 0.9rem);
    color: var(--error-text-secondary);
}

.retry-btn {
    margin-top: clamp(12px, 3vw, 16px);
    padding: clamp(8px, 2vw, 10px) clamp(16px, 4vw, 20px);
    background: var(--retry-btn-bg);
    color: var(--retry-btn-text);
    border: 1px solid var(--retry-btn-border);
    border-radius: clamp(4px, 1vw, 6px);
    cursor: pointer;
    font-size: clamp(0.8rem, 2vw, 0.9rem);
    font-weight: 500;
    transition: var(--card-transition);
    -webkit-tap-highlight-color: transparent;
}

.retry-btn:hover {
    background: var(--retry-btn-hover-bg);
    transform: translateY(-1px);
}

.retry-btn:active {
    transform: translateY(0);
}

@media (hover: none) {
    .content-card:active {
        transform: scale(0.98);
    }

    .wishlist-btn:active {
        transform: scale(0.9);
    }
}

@media (min-width: 480px) {
    :root {
        --card-width: clamp(140px, 20vw, 200px);
    }
}

@media (min-width: 640px) {
    :root {
        --card-width: clamp(160px, 18vw, 200px);
    }
}

@media (min-width: 768px) {
    :root {
        --card-width: clamp(170px, 16vw, 200px);
    }
}

@media (min-width: 1024px) {
    :root {
        --card-width: clamp(180px, 14vw, 200px);
    }
}

@media (min-width: 1280px) {
    :root {
        --card-width: clamp(190px, 12vw, 200px);
    }
}

@media (min-width: 1536px) {
    :root {
        --card-width: 200px;
    }
}

.content-card:focus-visible,
.wishlist-btn:focus-visible,
.carousel-nav:focus-visible,
.see-all:focus-visible,
.retry-btn:focus-visible {
    outline: 2px solid var(--cinebrain-primary);
    outline-offset: 2px;
}

@media (prefers-reduced-motion: reduce) {

    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }

    :root {
        --carousel-scroll: auto;
    }

    .skeleton-shimmer {
        animation: none;
    }

    .skeleton-card {
        animation: none;
        opacity: 1;
    }

    .content-card {
        transition: none;
    }
}

@media print {

    .carousel-nav,
    .wishlist-btn,
    .see-all {
        display: none !important;
    }

    .carousel-wrapper {
        display: grid !important;
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)) !important;
        overflow: visible !important;
    }
}

.dots-loader {
    display: flex;
    gap: 12px;
    justify-content: center;
    align-items: center;
    padding: 40px 20px;
}

.dot {
    width: 14px;
    height: 14px;
    background: var(--cinebrain-primary);
    border-radius: 50%;
    animation: dot-wave 1.4s ease-in-out infinite;
}

.dot:nth-child(1) {
    animation-delay: 0s;
}

.dot:nth-child(2) {
    animation-delay: 0.2s;
}

.dot:nth-child(3) {
    animation-delay: 0.4s;
}

.dot:nth-child(4) {
    animation-delay: 0.6s;
}

@keyframes dot-wave {

    0%,
    80%,
    100% {
        transform: scale(0.8);
        opacity: 0.5;
    }

    40% {
        transform: scale(1.2);
        opacity: 1;
    }
}

.carousel-wrapper.loading {
    min-height: 250px;
    display: flex;
    justify-content: center;
    align-items: center;
}

.content-row.loading .carousel-nav {
    opacity: 0 !important;
}

.content-row.loaded .carousel-nav {
    transition: opacity 0.3s ease;
}

.loading-image {
    position: relative;
}

.loading-image::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 20px;
    height: 20px;
    margin: -10px 0 0 -10px;
    border: 2px solid var(--skeleton-bg);
    border-top-color: var(--row-title-color);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}

.content-row.loading .row-title::after {
    content: '';
    display: inline-block;
    width: 12px;
    height: 12px;
    margin-left: 8px;
    border: 2px solid var(--skeleton-bg);
    border-top-color: var(--row-title-color);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}

.content-row.error .row-title {
    opacity: 0.6;
}


3. content-card.js 


// Enhanced Content Card Component - Instant Loading with Better Skeletons
class ContentCardManager {
    constructor() {
        this.apiBase = 'https://backend-app-970m.onrender.com/api';
        this.posterBase = 'https://image.tmdb.org/t/p/w500';

        // Auth state
        this.authToken = localStorage.getItem('cinebrain-token');
        this.isAuthenticated = !!this.authToken;
        this.currentUser = this.getCurrentUser();

        // Enhanced caching system
        this.userWishlist = new Set();
        this.contentCache = new Map();
        this.interactionStates = new Map();
        this.loadingStates = new Map(); // Track loading states
        this.preloadedContent = new Map(); // Preloaded content for instant display

        // Loading management
        this.loadingControllers = new Map(); // AbortControllers for cancelling requests
        this.isInitialLoad = true;
        this.backgroundLoader = null;

        // Content row configurations with priority levels
        this.contentRows = [
            {
                id: 'trending',
                title: 'Trending Now',
                endpoint: '/recommendations/trending',
                params: { category: 'all', limit: 20 },
                priority: 1, // High priority - load first
                cached: true // Cache this content
            },
            {
                id: 'new-releases',
                title: 'New Releases',
                endpoint: '/recommendations/new-releases',
                params: { type: 'movie', limit: 20 },
                priority: 2,
                cached: true
            },
            {
                id: 'critics-choice',
                title: 'Critics Choice',
                endpoint: '/recommendations/critics-choice',
                params: { type: 'movie', limit: 20 },
                priority: 3,
                cached: true
            },
            {
                id: 'popular-movies',
                title: 'Popular Movies',
                endpoint: '/recommendations/trending',
                params: { category: 'movies', limit: 20 },
                priority: 2,
                cached: true
            },
            {
                id: 'top-tv-shows',
                title: 'Top TV Shows',
                endpoint: '/recommendations/trending',
                params: { category: 'tv_shows', limit: 20 },
                priority: 3,
                cached: true
            },
            {
                id: 'anime-picks',
                title: 'Anime Collection',
                endpoint: '/recommendations/anime',
                params: { limit: 20 },
                priority: 4,
                cached: false // Don't cache anime for now
            }
        ];

        if (window.themeManager) {
            window.themeManager.register((theme) => this.onThemeChange(theme));
        }

        this.init();
    }

    onThemeChange(theme) {
        console.log('Content cards theme updated to:', theme);
        if (typeof feather !== 'undefined') {
            feather.replace();
        }
    }

    async init() {
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => this.setup());
        } else {
            this.setup();
        }
    }

    async setup() {
        const container = document.getElementById('content-container');
        if (!container) {
            console.log('Content container not found - skipping initialization');
            return;
        }

        // Start background preloading immediately
        this.startBackgroundPreloading();

        // Create all carousel rows immediately with skeletons
        this.contentRows.forEach(rowConfig => {
            const row = this.createCarouselRow(rowConfig);
            container.appendChild(row);
            // Set initial loading state
            this.setRowLoadingState(rowConfig.id, 'loading');
        });

        // Load user data and content in parallel
        const promises = [];

        // Load user wishlist if authenticated (don't wait for it)
        if (this.isAuthenticated) {
            promises.push(this.loadUserWishlist().catch(err => console.error('Wishlist load error:', err)));
        }

        // Load content with smart priority and parallel loading
        promises.push(this.loadAllContentIntelligently());

        // Don't wait for wishlist to complete before showing content
        await Promise.allSettled(promises);

        this.setupEventListeners();

        if (typeof feather !== 'undefined') {
            feather.replace();
        }

        this.isInitialLoad = false;
    }

    async startBackgroundPreloading() {
        // Preload critical content in the background
        try {
            const highPriorityRows = this.contentRows
                .filter(row => row.priority <= 2 && row.cached)
                .slice(0, 2); // Only preload top 2 most important

            const preloadPromises = highPriorityRows.map(async rowConfig => {
                try {
                    const content = await this.fetchContent(rowConfig.endpoint, rowConfig.params, true);
                    if (content && content.length > 0) {
                        this.preloadedContent.set(rowConfig.id, content);
                        console.log(`Preloaded ${rowConfig.id} with ${content.length} items`);
                    }
                } catch (err) {
                    console.warn(`Preload failed for ${rowConfig.id}:`, err);
                }
            });

            await Promise.allSettled(preloadPromises);
        } catch (error) {
            console.warn('Background preloading error:', error);
        }
    }

    async loadAllContentIntelligently() {
        // Sort rows by priority
        const sortedRows = [...this.contentRows].sort((a, b) => a.priority - b.priority);

        // Load high priority content first (parallel)
        const highPriorityRows = sortedRows.filter(row => row.priority <= 2);
        const lowPriorityRows = sortedRows.filter(row => row.priority > 2);

        // Load high priority content in parallel
        const highPriorityPromises = highPriorityRows.map(async (rowConfig, index) => {
            // Small delay to stagger the loading for better UX
            await new Promise(resolve => setTimeout(resolve, index * 50));
            return this.loadContentRowWithInstantDisplay(rowConfig);
        });

        // Wait for high priority content
        await Promise.allSettled(highPriorityPromises);

        // Load low priority content with longer delays
        lowPriorityRows.forEach((rowConfig, index) => {
            setTimeout(() => {
                this.loadContentRowWithInstantDisplay(rowConfig);
            }, index * 200 + 300); // Start after high priority is done
        });
    }

    async loadContentRowWithInstantDisplay(rowConfig) {
        const rowId = rowConfig.id;

        try {
            // Check if we have preloaded content for instant display
            if (this.preloadedContent.has(rowId)) {
                const preloadedContent = this.preloadedContent.get(rowId);
                this.displayContent(rowId, preloadedContent);
                this.setRowLoadingState(rowId, 'loaded');

                // Still fetch fresh content in background
                this.loadContentRowInBackground(rowConfig);
                return;
            }

            // Check cache for instant display
            const cacheKey = this.getCacheKey(rowConfig);
            if (this.contentCache.has(cacheKey)) {
                const cachedContent = this.contentCache.get(cacheKey);
                this.displayContent(rowId, cachedContent);
                this.setRowLoadingState(rowId, 'loaded');

                // Refresh in background if cache is old
                if (this.isCacheStale(cacheKey)) {
                    this.loadContentRowInBackground(rowConfig);
                }
                return;
            }

            // No cached content, load normally
            await this.loadContentRow(rowConfig);

        } catch (error) {
            console.error(`Error loading row ${rowId}:`, error);
            this.setRowLoadingState(rowId, 'error');
        }
    }

    async loadContentRowInBackground(rowConfig) {
        try {
            const content = await this.fetchContent(rowConfig.endpoint, rowConfig.params, false);
            if (content && content.length > 0) {
                const cacheKey = this.getCacheKey(rowConfig);
                this.contentCache.set(cacheKey, {
                    content,
                    timestamp: Date.now()
                });

                // Update display if content is different
                this.displayContent(rowConfig.id, content);
            }
        } catch (error) {
            console.warn(`Background refresh failed for ${rowConfig.id}:`, error);
        }
    }

    setRowLoadingState(rowId, state) {
        this.loadingStates.set(rowId, state);
        const row = document.getElementById(rowId);
        if (row) {
            row.classList.remove('loading', 'loaded', 'error');
            row.classList.add(state);
        }
    }

    displayContent(rowId, content) {
        const row = document.getElementById(rowId);
        if (!row) return;

        const wrapper = row.querySelector('.carousel-wrapper');
        if (!wrapper) return;

        // Clear current content
        wrapper.innerHTML = '';

        // Add content cards with smooth animation
        content.forEach((item, index) => {
            const card = this.createContentCard(item);

            // Add staggered animation
            card.style.opacity = '0';
            card.style.transform = 'translateY(20px)';
            wrapper.appendChild(card);

            // Animate in with delay
            setTimeout(() => {
                card.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
                card.style.opacity = '1';
                card.style.transform = 'translateY(0)';
            }, index * 20); // Stagger animation
        });

        this.setupCarouselNavigation(row);
    }

    getCacheKey(rowConfig) {
        return `${rowConfig.endpoint}-${JSON.stringify(rowConfig.params)}-${this.isAuthenticated ? 'auth' : 'anon'}`;
    }

    isCacheStale(cacheKey) {
        const cached = this.contentCache.get(cacheKey);
        if (!cached || !cached.timestamp) return true;

        const fiveMinutes = 5 * 60 * 1000;
        return Date.now() - cached.timestamp > fiveMinutes;
    }

    getCurrentUser() {
        const userStr = localStorage.getItem('cinebrain-user');
        if (userStr) {
            try {
                return JSON.parse(userStr);
            } catch (e) {
                console.error('Error parsing user data:', e);
                return null;
            }
        }
        return null;
    }

    async loadUserWishlist() {
        if (!this.isAuthenticated) {
            this.userWishlist.clear();
            this.interactionStates.clear();
            this.updateWishlistButtons();
            return;
        }

        try {
            const response = await fetch(`${this.apiBase}/users/profile`, {
                headers: {
                    'Authorization': `Bearer ${this.authToken}`
                },
                signal: AbortSignal.timeout(5000) // 5 second timeout
            });

            if (response.ok) {
                const data = await response.json();
                this.userWishlist.clear();
                this.interactionStates.clear();

                if (data.watchlist && Array.isArray(data.watchlist)) {
                    data.watchlist.forEach(item => {
                        this.userWishlist.add(item.content_id);
                        this.interactionStates.set(item.content_id, 'watchlist');
                    });
                }
                console.log('Loaded wishlist with', this.userWishlist.size, 'items');

                // Update wishlist buttons immediately
                this.updateWishlistButtons();
            } else if (response.status === 401) {
                console.error('Authentication failed, clearing token');
                this.handleAuthFailure();
            }
        } catch (error) {
            console.error('Error loading wishlist:', error);
        }
    }

    handleAuthFailure() {
        localStorage.removeItem('cinebrain-token');
        localStorage.removeItem('cinebrain-user');
        this.authToken = null;
        this.isAuthenticated = false;
        this.userWishlist.clear();
        this.interactionStates.clear();
        this.updateWishlistButtons();

        // Clear authenticated content cache
        this.contentCache.clear();
    }

    createCarouselRow(rowConfig) {
        const row = document.createElement('div');
        row.className = 'content-row loading'; // Start with loading state
        row.id = rowConfig.id;

        row.innerHTML = `
            <div class="row-header">
                <h2 class="row-title">${rowConfig.title}</h2>
                <a href="/content/${rowConfig.id}.html" class="see-all">See All →</a>
            </div>
            <div class="carousel-container">
                <button class="carousel-nav prev" aria-label="Previous" style="opacity: 0;">
                    <svg viewBox="0 0 24 24">
                        <path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M15 18l-6-6 6-6"/>
                    </svg>
                </button>
                <div class="carousel-wrapper">
                    ${this.createEnhancedSkeletons(8)}
                </div>
                <button class="carousel-nav next" aria-label="Next" style="opacity: 0;">
                    <svg viewBox="0 0 24 24">
                        <path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M9 18l6-6-6-6"/>
                    </svg>
                </button>
            </div>
        `;

        return row;
    }

    createEnhancedSkeletons(count) {
        return Array(count).fill('').map((_, index) => `
            <div class="skeleton-card" style="animation-delay: ${index * 0.1}s;">
                <div class="skeleton skeleton-poster">
                    <div class="skeleton-shimmer"></div>
                </div>
                <div class="skeleton-info">
                    <div class="skeleton skeleton-title">
                        <div class="skeleton-shimmer"></div>
                    </div>
                    <div class="skeleton skeleton-meta">
                        <div class="skeleton-shimmer"></div>
                    </div>
                </div>
            </div>
        `).join('');
    }

    createContentCard(content) {
        const card = document.createElement('div');
        card.className = 'content-card';
        card.dataset.contentId = content.id;

        if (content.slug) {
            card.dataset.contentSlug = content.slug;
        }

        const posterUrl = this.formatPosterUrl(content.poster_path || content.poster_url);
        const rating = this.formatRating(content.rating);
        const ratingValue = parseFloat(content.rating) || 0;
        const year = this.extractYear(content.release_date);
        const genres = content.genres?.slice(0, 2) || [];
        const contentType = content.content_type || 'movie';
        const runtime = this.formatRuntime(content.runtime);
        const isInWishlist = this.userWishlist.has(content.id);

        card.innerHTML = `
            <div class="card-poster-container">
                <img 
                    class="card-poster" 
                    data-src="${posterUrl}" 
                    alt="${this.escapeHtml(content.title || 'Content')}"
                    loading="lazy"
                >
                <div class="content-type-badge ${contentType}">
                    ${contentType.toUpperCase()}
                </div>
                <div class="card-overlays">
                    <div class="card-top-overlay">
                        <div></div>
                        <button class="wishlist-btn ${isInWishlist ? 'active' : ''}" 
                                data-content-id="${content.id}" 
                                title="${isInWishlist ? 'Remove from Wishlist' : 'Add to Wishlist'}"
                                aria-label="${isInWishlist ? 'Remove from Wishlist' : 'Add to Wishlist'}">
                            <svg viewBox="0 0 24 24">
                                <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                            </svg>
                        </button>
                    </div>
                    <div class="card-bottom-overlay">
                        <div class="rating-badge" ${ratingValue >= 8.0 ? 'data-high-rating="true"' : ''}>
                            <svg viewBox="0 0 24 24">
                                <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                            </svg>
                            <span>${rating}</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card-info">
                <div class="card-title">${this.escapeHtml(content.title || 'Unknown')}</div>
                <div class="card-meta">
                    ${year ? `<span class="card-year">${year}</span>` : ''}
                    ${runtime ? `<span class="card-runtime">• ${runtime}</span>` : ''}
                </div>
                ${genres.length > 0 ? `
                    <div class="card-genres">
                        ${genres.map(genre => `<span class="genre-chip">${this.escapeHtml(genre)}</span>`).join('')}
                    </div>
                ` : ''}
            </div>
        `;

        this.setupCardHandlers(card, content);
        this.setupLazyLoading(card);

        return card;
    }

    setupCardHandlers(card, content) {
        card.addEventListener('click', (e) => {
            if (!e.target.closest('.wishlist-btn')) {
                let slug = content.slug;

                if (!slug && content.title) {
                    slug = this.generateSlug(content.title, content.release_date);
                }

                if (slug) {
                    window.location.href = `/content/details.html?${encodeURIComponent(slug)}`;
                } else {
                    console.error('No slug available for content:', content);
                    this.showNotification('Unable to view details', 'error');
                }
            }
        });

        const wishlistBtn = card.querySelector('.wishlist-btn');
        wishlistBtn?.addEventListener('click', async (e) => {
            e.stopPropagation();
            await this.handleWishlistClick(content.id, wishlistBtn);
        });
    }

    generateSlug(title, releaseDate) {
        if (!title) return '';

        let slug = title.toLowerCase()
            .replace(/[^\w\s-]/g, '')
            .replace(/\s+/g, '-')
            .replace(/-+/g, '-')
            .replace(/^-+|-+$/g, '')
            .trim();

        if (releaseDate) {
            const year = this.extractYear(releaseDate);
            if (year) {
                slug += `-${year}`;
            }
        }

        if (slug.length > 100) {
            slug = slug.substring(0, 100).replace(/-[^-]*$/, '');
        }

        return slug;
    }

    setupLazyLoading(card) {
        const img = card.querySelector('.card-poster');

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const imgSrc = img.dataset.src;
                    if (imgSrc) {
                        // Create a temporary image to preload
                        const tempImg = new Image();

                        // Add loading state
                        img.parentElement.classList.add('loading-image');

                        tempImg.onload = () => {
                            img.src = imgSrc;
                            img.classList.add('loaded');
                            img.parentElement.classList.remove('loading-image');
                        };
                        tempImg.onerror = () => {
                            img.src = this.getPlaceholderImage();
                            img.classList.add('loaded');
                            img.parentElement.classList.remove('loading-image');
                        };
                        tempImg.src = imgSrc;
                    }
                    observer.unobserve(img);
                }
            });
        }, {
            rootMargin: window.innerWidth <= 768 ? '50px' : '100px',
            threshold: 0.01
        });

        observer.observe(img);
    }

    async handleWishlistClick(contentId, button) {
        if (!this.isAuthenticated) {
            this.showNotification('Please login to add to wishlist', 'warning');
            setTimeout(() => {
                window.location.href = '/auth/login.html?redirect=' + encodeURIComponent(window.location.pathname);
            }, 1000);
            return;
        }

        try {
            if (button.disabled) return;
            button.disabled = true;

            const isCurrentlyInWishlist = button.classList.contains('active');

            // Optimistic UI update
            if (isCurrentlyInWishlist) {
                button.classList.remove('active');
                this.userWishlist.delete(contentId);
                this.interactionStates.delete(contentId);
                button.setAttribute('title', 'Add to Wishlist');
                button.setAttribute('aria-label', 'Add to Wishlist');
            } else {
                button.classList.add('active');
                this.userWishlist.add(contentId);
                this.interactionStates.set(contentId, 'watchlist');
                button.setAttribute('title', 'Remove from Wishlist');
                button.setAttribute('aria-label', 'Remove from Wishlist');
            }

            // Send request to backend
            const response = await fetch(`${this.apiBase}/users/watchlist`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${this.authToken}`
                },
                body: JSON.stringify({
                    content_id: contentId,
                    action: isCurrentlyInWishlist ? 'remove' : 'add'
                }),
                signal: AbortSignal.timeout(5000)
            });

            if (response.ok) {
                this.showNotification(
                    isCurrentlyInWishlist ? 'Removed from wishlist' : 'Added to wishlist',
                    'success'
                );
            } else {
                // Revert optimistic update on failure
                if (isCurrentlyInWishlist) {
                    button.classList.add('active');
                    this.userWishlist.add(contentId);
                    this.interactionStates.set(contentId, 'watchlist');
                    button.setAttribute('title', 'Remove from Wishlist');
                    button.setAttribute('aria-label', 'Remove from Wishlist');
                } else {
                    button.classList.remove('active');
                    this.userWishlist.delete(contentId);
                    this.interactionStates.delete(contentId);
                    button.setAttribute('title', 'Add to Wishlist');
                    button.setAttribute('aria-label', 'Add to Wishlist');
                }
                throw new Error('Failed to update wishlist');
            }

        } catch (error) {
            this.showNotification('Failed to update wishlist', 'error');
            console.error('Error updating wishlist:', error);
        } finally {
            setTimeout(() => {
                button.disabled = false;
            }, 300);
        }
    }

    async loadContentRow(rowConfig) {
        const row = document.getElementById(rowConfig.id);
        if (!row) return;

        const wrapper = row.querySelector('.carousel-wrapper');
        if (!wrapper) return;

        try {
            this.setRowLoadingState(rowConfig.id, 'loading');

            const cacheKey = this.getCacheKey(rowConfig);
            let content;

            // Check cache first
            const cached = this.contentCache.get(cacheKey);
            if (cached && !this.isCacheStale(cacheKey)) {
                content = cached.content;
            } else {
                // Cancel any existing request for this row
                if (this.loadingControllers.has(rowConfig.id)) {
                    this.loadingControllers.get(rowConfig.id).abort();
                }

                const controller = new AbortController();
                this.loadingControllers.set(rowConfig.id, controller);

                content = await this.fetchContent(rowConfig.endpoint, rowConfig.params, false, controller.signal);

                if (content && content.length > 0 && rowConfig.cached) {
                    this.contentCache.set(cacheKey, {
                        content,
                        timestamp: Date.now()
                    });
                }
            }

            this.displayContent(rowConfig.id, content || []);
            this.setRowLoadingState(rowConfig.id, 'loaded');

        } catch (error) {
            if (error.name === 'AbortError') {
                console.log(`Request aborted for ${rowConfig.id}`);
                return;
            }

            console.error(`Error loading ${rowConfig.title}:`, error);
            this.setRowLoadingState(rowConfig.id, 'error');

            const wrapper = row.querySelector('.carousel-wrapper');
            wrapper.innerHTML = `
                <div class="error-message">
                    <h3>Unable to load content</h3>
                    <p>Please check your connection and try again</p>
                    <button class="retry-btn" data-row-id="${rowConfig.id}">Retry</button>
                </div>
            `;

            const retryBtn = wrapper.querySelector('.retry-btn');
            retryBtn?.addEventListener('click', () => {
                wrapper.innerHTML = this.createEnhancedSkeletons(8);
                this.loadContentRow(rowConfig);
            });
        }
    }

    async fetchContent(endpoint, params = {}, isPreload = false, signal = null) {
        const queryString = new URLSearchParams(params).toString();
        const url = `${this.apiBase}${endpoint}${queryString ? '?' + queryString : ''}`;

        const headers = {};
        if (this.authToken) {
            headers['Authorization'] = `Bearer ${this.authToken}`;
        }

        const requestOptions = {
            headers,
            signal: signal || AbortSignal.timeout(isPreload ? 15000 : 8000)
        };

        try {
            const response = await fetch(url, requestOptions);

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const data = await response.json();

            // Handle different response structures from backend
            if (data.recommendations && Array.isArray(data.recommendations)) {
                return data.recommendations;
            } else if (data.categories) {
                // For trending endpoint with categories
                const allContent = [];
                Object.values(data.categories).forEach(categoryItems => {
                    if (Array.isArray(categoryItems)) {
                        allContent.push(...categoryItems);
                    }
                });

                // Remove duplicates and limit results
                const uniqueContent = [];
                const seenIds = new Set();
                allContent.forEach(item => {
                    if (item && item.id && !seenIds.has(item.id)) {
                        seenIds.add(item.id);
                        uniqueContent.push(item);
                    }
                });

                return uniqueContent.slice(0, params.limit || 20);
            } else if (data.results && Array.isArray(data.results)) {
                return data.results;
            } else if (Array.isArray(data)) {
                return data;
            } else {
                console.warn('Unexpected response structure:', data);
                return [];
            }
        } catch (error) {
            if (error.name === 'AbortError') {
                throw error;
            }
            console.error('Fetch error:', error);
            throw error;
        }
    }

    setupCarouselNavigation(carouselRow) {
        const wrapper = carouselRow.querySelector('.carousel-wrapper');
        const prevBtn = carouselRow.querySelector('.carousel-nav.prev');
        const nextBtn = carouselRow.querySelector('.carousel-nav.next');

        if (!wrapper) return;

        const getScrollAmount = () => {
            const containerWidth = wrapper.clientWidth;
            const cardWidth = wrapper.querySelector('.content-card')?.offsetWidth || 180;
            const gap = parseInt(getComputedStyle(wrapper).gap) || 12;
            const visibleCards = Math.floor(containerWidth / (cardWidth + gap));
            return (cardWidth + gap) * Math.max(1, visibleCards - 1);
        };

        let ticking = false;
        const updateNavButtons = () => {
            if (!ticking) {
                requestAnimationFrame(() => {
                    if (!prevBtn || !nextBtn) return;

                    const scrollLeft = wrapper.scrollLeft;
                    const maxScroll = wrapper.scrollWidth - wrapper.clientWidth;

                    const shouldShowPrev = scrollLeft > 0;
                    const shouldShowNext = scrollLeft < maxScroll - 1;

                    prevBtn.style.opacity = shouldShowPrev ? '1' : '0';
                    nextBtn.style.opacity = shouldShowNext ? '1' : '0';

                    prevBtn.classList.toggle('disabled', !shouldShowPrev);
                    nextBtn.classList.toggle('disabled', !shouldShowNext);

                    ticking = false;
                });
                ticking = true;
            }
        };

        if (prevBtn && nextBtn && window.innerWidth > 768) {
            prevBtn.addEventListener('click', () => {
                wrapper.scrollBy({
                    left: -getScrollAmount(),
                    behavior: 'smooth'
                });
            });

            nextBtn.addEventListener('click', () => {
                wrapper.scrollBy({
                    left: getScrollAmount(),
                    behavior: 'smooth'
                });
            });

            wrapper.addEventListener('scroll', updateNavButtons, { passive: true });
            updateNavButtons();
        }

        this.setupTouchScroll(wrapper);
    }

    setupTouchScroll(wrapper) {
        if (window.innerWidth > 768) {
            let isDown = false;
            let startX = 0;
            let scrollLeft = 0;

            wrapper.addEventListener('mousedown', (e) => {
                isDown = true;
                startX = e.pageX;
                scrollLeft = wrapper.scrollLeft;
                wrapper.style.cursor = 'grabbing';
                e.preventDefault();
            });

            wrapper.addEventListener('mousemove', (e) => {
                if (!isDown) return;
                e.preventDefault();
                const x = e.pageX;
                const walk = (startX - x) * 2;
                wrapper.scrollLeft = scrollLeft + walk;
            });

            wrapper.addEventListener('mouseup', () => {
                isDown = false;
                wrapper.style.cursor = 'grab';
            });

            wrapper.addEventListener('mouseleave', () => {
                isDown = false;
                wrapper.style.cursor = 'grab';
            });
        } else {
            wrapper.style.cursor = 'default';
            wrapper.style.webkitOverflowScrolling = 'touch';
            wrapper.style.overscrollBehaviorX = 'contain';
        }
    }

    setupEventListeners() {
        let resizeTimer;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(() => {
                document.querySelectorAll('.content-row').forEach(row => {
                    this.setupCarouselNavigation(row);
                });
            }, 250);
        });

        // Enhanced auth state change handling
        window.addEventListener('storage', (e) => {
            if (e.key === 'cinebrain-token') {
                const oldAuth = this.isAuthenticated;
                this.authToken = e.newValue;
                this.isAuthenticated = !!this.authToken;

                if (oldAuth !== this.isAuthenticated) {
                    // Auth state changed - refresh content
                    this.handleAuthStateChange();
                }
            }
        });

        // Listen for login success events
        window.addEventListener('userLoggedIn', () => {
            this.handleAuthStateChange();
        });

        // Listen for logout events
        window.addEventListener('userLoggedOut', () => {
            this.handleAuthStateChange();
        });

        document.addEventListener('visibilitychange', () => {
            if (!document.hidden && this.isAuthenticated) {
                this.loadUserWishlist();
            }
        });

        window.addEventListener('focus', () => {
            if (this.isAuthenticated) {
                this.loadUserWishlist();
            }
        });
    }

    async handleAuthStateChange() {
        console.log('Auth state changed - refreshing content');

        // Show loading state immediately
        this.contentRows.forEach(rowConfig => {
            this.setRowLoadingState(rowConfig.id, 'loading');
            const wrapper = document.getElementById(rowConfig.id)?.querySelector('.carousel-wrapper');
            if (wrapper) {
                wrapper.innerHTML = this.createEnhancedSkeletons(8);
            }
        });

        // Clear caches
        this.contentCache.clear();
        this.preloadedContent.clear();

        // Reload user data and content
        if (this.isAuthenticated) {
            await this.loadUserWishlist();
        } else {
            this.userWishlist.clear();
            this.interactionStates.clear();
        }

        // Reload all content
        await this.loadAllContentIntelligently();
        this.updateWishlistButtons();
    }

    updateWishlistButtons() {
        document.querySelectorAll('.wishlist-btn').forEach(btn => {
            const contentId = parseInt(btn.dataset.contentId);
            const isInWishlist = this.userWishlist.has(contentId);

            if (isInWishlist) {
                btn.classList.add('active');
                btn.setAttribute('title', 'Remove from Wishlist');
                btn.setAttribute('aria-label', 'Remove from Wishlist');
            } else {
                btn.classList.remove('active');
                btn.setAttribute('title', 'Add to Wishlist');
                btn.setAttribute('aria-label', 'Add to Wishlist');
            }
        });
    }

    showNotification(message, type = 'info') {
        if (window.topbar?.notificationSystem) {
            window.topbar.notificationSystem.show(message, type);
        } else {
            console.log(`${type.toUpperCase()}: ${message}`);
        }
    }

    // Utility methods
    formatPosterUrl(posterPath) {
        if (!posterPath) {
            return this.getPlaceholderImage();
        }
        if (posterPath.startsWith('http')) return posterPath;
        return `${this.posterBase}${posterPath}`;
    }

    getPlaceholderImage() {
        return 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjQ1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjQ1MCIgZmlsbD0iIzFhMWYzYSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmaWxsPSIjNjY3IiBmb250LXNpemU9IjE4IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+Tm8gSW1hZ2U8L3RleHQ+PC9zdmc+';
    }

    formatRating(rating) {
        if (!rating) return 'N/A';
        return Number(rating).toFixed(1);
    }

    extractYear(dateString) {
        if (!dateString) return '';
        try {
            return new Date(dateString).getFullYear();
        } catch {
            return '';
        }
    }

    formatRuntime(minutes) {
        if (!minutes) return '';
        const hours = Math.floor(minutes / 60);
        const mins = minutes % 60;
        return hours > 0 ? `${hours}h ${mins}m` : `${mins}m`;
    }

    escapeHtml(text) {
        if (!text || typeof text !== 'string') return '';
        const map = {
            '&': '&amp;',
            '<': '&lt;',
            '>': '&gt;',
            '"': '&quot;',
            "'": '&#039;'
        };
        return text.replace(/[&<>"']/g, m => map[m]);
    }
}

// Initialize only on homepage
if (document.getElementById('content-container')) {
    const contentCardManager = new ContentCardManager();
    window.contentCardManager = contentCardManager;
} else {
    console.log('ContentCardManager: Skipped initialization - not on homepage');
}