1. details.html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <!-- Security Headers -->
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self';
        script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://fonts.googleapis.com https://fonts.gstatic.com;
        style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://fonts.googleapis.com;
        font-src 'self' https://fonts.gstatic.com;
        img-src 'self' data: https: blob:;
        connect-src 'self' https://backend-app-970m.onrender.com https://api.themoviedb.org https://image.tmdb.org https://api.jikan.moe https://www.omdbapi.com https://www.googleapis.com https://cdn.jsdelivr.net;
        base-uri 'self';
        form-action 'self';
        frame-src 'self' https://www.youtube.com https://www.youtube-nocookie.com;
    ">

    <!-- Primary Meta Tags -->
    <title>Details - CineBrain | AI-Powered Entertainment Discovery</title>
    <meta name="title" content="Details - CineBrain | AI-Powered Entertainment Discovery">
    <meta name="description"
        content="Watch detailed information, trailers, cast & crew, reviews, and get AI-powered personalized recommendations for movies, TV shows, and anime on CineBrain.">
    <meta name="keywords"
        content="movie details, TV show information, anime details, cast and crew, movie trailers, reviews, recommendations, CineBrain, streaming guide, watch online">
    <meta name="author" content="CineBrain">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">

    <!-- Theme Color -->
    <meta name="theme-color" content="#113CCF">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://cinebrain.vercel.app/content/details.html">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/apple-icon-180x180.png">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="video.movie">
    <meta property="og:url" content="https://cinebrain.vercel.app/content/details.html">
    <meta property="og:title" content="Watch Details on CineBrain - AI Movie Recommendations">
    <meta property="og:description"
        content="Get complete information including cast, crew, trailers, reviews and AI-powered recommendations.">
    <meta property="og:image" content="https://cinebrain.vercel.app/assets/images/og-image-1200x630.jpg">
    <meta property="og:site_name" content="CineBrain">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://cinebrain.vercel.app/content/details.html">
    <meta name="twitter:title" content="Watch on CineBrain - Complete Movie & TV Details">
    <meta name="twitter:description" content="Cast, crew, trailers, reviews & AI recommendations.">
    <meta name="twitter:image" content="https://cinebrain.vercel.app/assets/images/twitter-image-1200x600.jpg">

    <!-- Preconnect for Performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="preconnect" href="https://image.tmdb.org">
    <link rel="dns-prefetch" href="https://backend-app-970m.onrender.com">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/assets/css/topbar.css">
    <link rel="stylesheet" href="/assets/css/mobile-nav.css">
    <link rel="stylesheet" href="/assets/css/content-card.css">
    <link rel="stylesheet" href="/assets/css/theme.css">
    <link rel="stylesheet" href="/assets/css/details.css">

    <!-- Theme Script (Must be in head) -->
    <script>
        (function () {
            try {
                const savedTheme = localStorage.getItem('cinebrain-theme');
                const theme = (savedTheme === 'light' || savedTheme === 'dark') ? savedTheme : 'dark';
                document.documentElement.setAttribute('data-theme', theme);
                document.documentElement.setAttribute('data-bs-theme', theme);
            } catch (e) {
                document.documentElement.setAttribute('data-theme', 'dark');
                document.documentElement.setAttribute('data-bs-theme', 'dark');
            }
        })();
    </script>
</head>

<body itemscope itemtype="https://schema.org/WebPage">

    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="visually-hidden-focusable">Skip to main content</a>

    <!-- Loading State -->
    <div class="page-loader" id="pageLoader">
        <div class="loader-content">
            <div class="cinebrain-loader">
                <div class="loader-dot"></div>
                <div class="loader-dot"></div>
                <div class="loader-dot"></div>
                <div class="loader-dot"></div>
            </div>
            <div class="loader-text">Loading Details...</div>
        </div>
    </div>

    <!-- Main TopBar Navigation -->
    <header itemscope itemtype="https://schema.org/WPHeader">
        <nav class="navbar navbar-expand-lg navbar-cinebrain fixed-top" role="navigation" aria-label="Main navigation">
            <div class="container-fluid">
                <!-- Brand Section -->
                <div class="navbar-brand-wrapper">
                    <a href="/" style="text-decoration: none;" aria-label="CineBrain Home">
                        <h1 class="navbar-brand-cinebrain">CineBrain</h1>
                        <div class="tagline">
                            <span class="tagline-full">The Mind Behind Your Next Favorite</span>
                            <span class="tagline-medium" style="display: none;">Your Next Favorite</span>
                            <span class="tagline-short" style="display: none;">Next Favorite</span>
                        </div>
                    </a>
                </div>

                <!-- Desktop Search -->
                <div class="search-container desktop-search" id="desktopSearchContainer">
                    <div class="search-wrapper">
                        <div class="search-bar-wrapper">
                            <div class="search-input-wrapper">
                                <i data-feather="search" class="search-icon"></i>
                                <input type="text" class="form-control search-input" id="desktopSearchInput"
                                    placeholder="Search movies, shows, anime..." autocomplete="off" maxlength="100">
                                <button class="search-clear" id="searchClear" aria-label="Clear search"
                                    style="display: none;">
                                    <i data-feather="x"></i>
                                </button>
                            </div>
                            <div class="search-results" id="desktopSearchResults"></div>
                        </div>
                    </div>
                </div>

                <!-- Right Section: Icons -->
                <div class="nav-icons-section">
                    <!-- Mobile Search Trigger -->
                    <button class="icon-button mobile-search-trigger" id="mobileSearchTrigger" aria-label="Open search">
                        <i data-feather="search"></i>
                    </button>

                    <!-- Theme Toggle -->
                    <button class="icon-button theme-toggle" id="themeToggle" aria-label="Toggle theme">
                        <i data-feather="sun" class="theme-icon theme-icon-light"></i>
                        <i data-feather="moon" class="theme-icon theme-icon-dark"></i>
                    </button>

                    <!-- Avatar/User Menu -->
                    <div class="dropdown">
                        <div class="avatar-menu" data-bs-toggle="dropdown" aria-expanded="false" id="avatarMenu">
                            <i data-feather="user"></i>
                        </div>
                        <ul class="dropdown-menu dropdown-menu-end dropdown-menu-cinebrain" id="userDropdown"></ul>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <!-- Mobile Search Overlay -->
    <div class="mobile-search-overlay" id="mobileSearchOverlay" aria-hidden="true">
        <div class="container">
            <div class="mobile-search-header">
                <button class="btn-back" id="closeMobileSearch" aria-label="Close search">
                    <i data-feather="arrow-left"></i>
                </button>
                <div class="mobile-search-input-wrapper">
                    <i data-feather="search" class="search-icon"></i>
                    <input type="text" class="form-control search-input" id="mobileSearchInput"
                        placeholder="Search movies, shows, anime..." autocomplete="off" autofocus maxlength="100">
                </div>
            </div>
            <div class="search-results mobile-results" id="mobileSearchResults"></div>
        </div>
    </div>

    <!-- Main Content Area -->
    <main id="main-content" role="main">

        <!-- Hero Section with Enhanced Design -->
        <section class="hero-section" id="heroSection">
            <div class="hero-backdrop" id="heroBackdrop">
                <div class="backdrop-overlay"></div>
                <div class="backdrop-gradient"></div>
            </div>

            <div class="hero-content">
                <div class="container-fluid px-3 px-md-5">
                    <div class="row g-3 g-md-4">
                        <!-- Poster Column -->
                        <div class="col-12 col-sm-5 col-md-4 col-lg-3 col-xl-2">
                            <div class="poster-wrapper">
                                <div class="poster-container">
                                    <div class="poster-image-wrapper">
                                        <img id="posterImage" class="poster-image" alt="Movie Poster">
                                        <div class="poster-shimmer"></div>
                                    </div>
                                    <div class="poster-quality-badge" id="qualityBadge" style="display: none;">
                                        <span>HD</span>
                                    </div>
                                </div>
                                <!-- Mobile-only quick stats -->
                                <div class="mobile-quick-stats d-sm-none">
                                    <div class="stat-item">
                                        <i data-feather="star" class="stat-icon"></i>
                                        <span class="stat-value" id="mobileRating">0.0</span>
                                    </div>
                                    <div class="stat-item">
                                        <i data-feather="clock" class="stat-icon"></i>
                                        <span class="stat-value" id="mobileRuntime">0m</span>
                                    </div>
                                    <div class="stat-item">
                                        <i data-feather="calendar" class="stat-icon"></i>
                                        <span class="stat-value" id="mobileYear">0000</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Content Info Column -->
                        <div class="col-12 col-sm-7 col-md-8 col-lg-9 col-xl-10">
                            <div class="content-details">
                                <!-- Title Section -->
                                <div class="title-section">
                                    <h1 class="content-title" id="contentTitle">
                                        <span class="title-shimmer"></span>
                                    </h1>
                                    <div class="content-subtitle" id="originalTitle"></div>
                                </div>

                                <!-- Meta Information -->
                                <div class="content-meta">
                                    <div class="meta-item d-none d-sm-flex">
                                        <span class="year" id="releaseYear"></span>
                                    </div>
                                    <div class="meta-separator d-none d-sm-block">•</div>
                                    <div class="meta-item d-none d-sm-flex">
                                        <span class="runtime" id="runtime"></span>
                                    </div>
                                    <div class="meta-separator d-none d-sm-block">•</div>
                                    <div class="meta-item">
                                        <span class="content-type-badge" id="contentType"></span>
                                    </div>
                                    <div class="meta-separator">•</div>
                                    <div class="meta-item">
                                        <div class="language-badges" id="languageBadges"></div>
                                    </div>
                                </div>

                                <!-- Genre Chips -->
                                <div class="genre-section">
                                    <div class="genre-chips" id="genreChips"></div>
                                    <div class="anime-genres" id="animeGenres" style="display: none;"></div>
                                </div>

                                <!-- Rating and Stats Section -->
                                <div class="stats-section d-none d-sm-flex">
                                    <div class="rating-card">
                                        <div class="rating-icon">
                                            <svg viewBox="0 0 24 24" class="star-icon">
                                                <path
                                                    d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" />
                                            </svg>
                                        </div>
                                        <div class="rating-details">
                                            <div class="rating-value" id="ratingValue">0.0</div>
                                            <div class="rating-count" id="voteCount">
                                                <span>0</span> votes
                                            </div>
                                        </div>
                                    </div>

                                    <div class="popularity-card" id="popularityCard">
                                        <div class="popularity-icon">
                                            <i data-feather="trending-up"></i>
                                        </div>
                                        <div class="popularity-details">
                                            <div class="popularity-value" id="popularityValue">0</div>
                                            <div class="popularity-label">Popularity</div>
                                        </div>
                                    </div>

                                    <div class="critic-badges" id="criticBadges"></div>
                                </div>

                                <!-- Action Buttons -->
                                <div class="action-section">
                                    <div class="primary-actions">
                                        <button class="btn-action btn-play" id="watchTrailerBtn">
                                            <i data-feather="play"></i>
                                            <span class="btn-text">Play Trailer</span>
                                        </button>
                                        <button class="btn-action btn-watchlist" id="watchlistBtn">
                                            <i data-feather="bookmark"></i>
                                            <span class="btn-text d-none d-sm-inline">Watchlist</span>
                                        </button>
                                        <button class="btn-action btn-favorite" id="favoriteBtn">
                                            <i data-feather="heart"></i>
                                            <span class="btn-text d-none d-sm-inline">Favorite</span>
                                        </button>
                                        <button class="btn-action btn-share" id="shareBtn">
                                            <i data-feather="share-2"></i>
                                            <span class="btn-text d-none d-sm-inline">Share</span>
                                        </button>
                                    </div>
                                </div>

                                <!-- Overview Preview (Desktop) -->
                                <div class="overview-preview d-none d-lg-block">
                                    <p class="overview-text" id="overviewPreview"></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Enhanced Overview Section -->
        <section class="overview-section">
            <div class="container-fluid px-3 px-md-5">
                <div class="row">
                    <div class="col-12 col-lg-8">
                        <div class="section-card">
                            <h2 class="section-title">
                                <i data-feather="file-text"></i>
                                Storyline
                            </h2>
                            <div class="overview-content" id="overviewContent">
                                <p class="overview-text" id="overviewText"></p>
                                <button class="show-more-btn" id="showMoreBtn" style="display: none;">
                                    <span class="btn-text">Show More</span>
                                    <i data-feather="chevron-down"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Side Information -->
                    <div class="col-12 col-lg-4">
                        <div class="section-card">
                            <h3 class="section-subtitle">Information</h3>
                            <div class="info-list">
                                <div class="info-item">
                                    <span class="info-label">Status</span>
                                    <span class="info-value" id="status">-</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Release Date</span>
                                    <span class="info-value" id="releaseDate">-</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Original Language</span>
                                    <span class="info-value" id="originalLanguage">-</span>
                                </div>
                                <div class="info-item" id="seasonsInfo" style="display: none;">
                                    <span class="info-label">Seasons</span>
                                    <span class="info-value" id="seasonsCount">-</span>
                                </div>
                                <div class="info-item" id="episodesInfo" style="display: none;">
                                    <span class="info-label">Episodes</span>
                                    <span class="info-value" id="episodesCount">-</span>
                                </div>
                                <div class="info-item" id="studioInfo" style="display: none;">
                                    <span class="info-label">Studio</span>
                                    <span class="info-value" id="studio">-</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Cast & Crew Section -->
        <section class="cast-crew-section" id="castCrewSection" style="display: none;">
            <div class="container-fluid px-3 px-md-5">
                <div class="section-header">
                    <h2 class="section-title">
                        <i data-feather="users"></i>
                        Cast & Crew
                    </h2>
                    <div class="section-nav">
                        <button class="nav-btn active" data-target="cast">Cast</button>
                        <button class="nav-btn" data-target="crew">Crew</button>
                    </div>
                </div>

                <div class="cast-crew-container">
                    <div class="carousel-container">
                        <button class="carousel-nav prev" id="castPrevBtn">
                            <svg viewBox="0 0 24 24">
                                <path stroke="currentColor" d="M15 18l-6-6 6-6" />
                            </svg>
                        </button>
                        <div class="cast-crew-wrapper" id="castWrapper"></div>
                        <button class="carousel-nav next" id="castNextBtn">
                            <svg viewBox="0 0 24 24">
                                <path stroke="currentColor" d="M9 18l6-6-6-6" />
                            </svg>
                        </button>
                    </div>

                    <div class="carousel-container" style="display: none;">
                        <button class="carousel-nav prev" id="crewPrevBtn">
                            <svg viewBox="0 0 24 24">
                                <path stroke="currentColor" d="M15 18l-6-6 6-6" />
                            </svg>
                        </button>
                        <div class="cast-crew-wrapper" id="crewWrapper"></div>
                        <button class="carousel-nav next" id="crewNextBtn">
                            <svg viewBox="0 0 24 24">
                                <path stroke="currentColor" d="M9 18l6-6-6-6" />
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Recommendations Sections with Carousel Structure -->
        <!-- Similar Content -->
        <section class="recommendations-section">
            <div class="container-fluid px-3 px-md-5">
                <div class="content-row">
                    <div class="row-header">
                        <h2 class="row-title">Similar Titles</h2>
                    </div>
                    <div class="carousel-container">
                        <button class="carousel-nav prev" aria-label="Previous">
                            <svg viewBox="0 0 24 24">
                                <path stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" d="M15 18l-6-6 6-6" />
                            </svg>
                        </button>
                        <div class="carousel-wrapper" id="similarContent">
                            <!-- Loading skeletons -->
                            <div class="skeleton-card">
                                <div class="skeleton skeleton-poster"></div>
                                <div class="skeleton skeleton-title"></div>
                                <div class="skeleton skeleton-meta"></div>
                            </div>
                            <div class="skeleton-card">
                                <div class="skeleton skeleton-poster"></div>
                                <div class="skeleton skeleton-title"></div>
                                <div class="skeleton skeleton-meta"></div>
                            </div>
                            <div class="skeleton-card">
                                <div class="skeleton skeleton-poster"></div>
                                <div class="skeleton skeleton-title"></div>
                                <div class="skeleton skeleton-meta"></div>
                            </div>
                            <div class="skeleton-card">
                                <div class="skeleton skeleton-poster"></div>
                                <div class="skeleton skeleton-title"></div>
                                <div class="skeleton skeleton-meta"></div>
                            </div>
                            <div class="skeleton-card">
                                <div class="skeleton skeleton-poster"></div>
                                <div class="skeleton skeleton-title"></div>
                                <div class="skeleton skeleton-meta"></div>
                            </div>
                            <div class="skeleton-card">
                                <div class="skeleton skeleton-poster"></div>
                                <div class="skeleton skeleton-title"></div>
                                <div class="skeleton skeleton-meta"></div>
                            </div>
                        </div>
                        <button class="carousel-nav next" aria-label="Next">
                            <svg viewBox="0 0 24 24">
                                <path stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" d="M9 18l6-6-6-6" />
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- More from Genre -->
        <section class="recommendations-section">
            <div class="container-fluid px-3 px-md-5">
                <div class="content-row">
                    <div class="row-header">
                        <h2 class="row-title" id="genreTitle">More from Genre</h2>
                    </div>
                    <div class="carousel-container">
                        <button class="carousel-nav prev" aria-label="Previous">
                            <svg viewBox="0 0 24 24">
                                <path stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" d="M15 18l-6-6 6-6" />
                            </svg>
                        </button>
                        <div class="carousel-wrapper" id="genreContent">
                            <!-- Loading skeletons -->
                            <div class="skeleton-card">
                                <div class="skeleton skeleton-poster"></div>
                                <div class="skeleton skeleton-title"></div>
                                <div class="skeleton skeleton-meta"></div>
                            </div>
                            <div class="skeleton-card">
                                <div class="skeleton skeleton-poster"></div>
                                <div class="skeleton skeleton-title"></div>
                                <div class="skeleton skeleton-meta"></div>
                            </div>
                            <div class="skeleton-card">
                                <div class="skeleton skeleton-poster"></div>
                                <div class="skeleton skeleton-title"></div>
                                <div class="skeleton skeleton-meta"></div>
                            </div>
                            <div class="skeleton-card">
                                <div class="skeleton skeleton-poster"></div>
                                <div class="skeleton skeleton-title"></div>
                                <div class="skeleton skeleton-meta"></div>
                            </div>
                            <div class="skeleton-card">
                                <div class="skeleton skeleton-poster"></div>
                                <div class="skeleton skeleton-title"></div>
                                <div class="skeleton skeleton-meta"></div>
                            </div>
                            <div class="skeleton-card">
                                <div class="skeleton skeleton-poster"></div>
                                <div class="skeleton skeleton-title"></div>
                                <div class="skeleton skeleton-meta"></div>
                            </div>
                        </div>
                        <button class="carousel-nav next" aria-label="Next">
                            <svg viewBox="0 0 24 24">
                                <path stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" d="M9 18l6-6-6-6" />
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Mobile Bottom Navigation -->
    <nav class="mobile-bottom-nav" id="mobileBottomNav" aria-label="Mobile navigation">
        <div class="mobile-nav-container" id="mobileNavContainer"></div>
    </nav>

    <!-- More Menu Overlay -->
    <aside class="mobile-menu-overlay" id="mobileMenuOverlay" aria-hidden="true">
        <div class="menu-handle"></div>
        <div class="menu-header">
            <h3 class="menu-title">CineBrain Menu</h3>
            <button class="menu-close-btn" id="mobileMenuClose">
                <i data-feather="x"></i>
            </button>
        </div>

        <section class="menu-section">
            <h4 class="menu-section-title">Browse Categories</h4>
            <div class="mobile-menu-grid" id="mobileMenuGrid"></div>
        </section>

        <section class="menu-section">
            <h4 class="menu-section-title" id="userSectionTitle">Account</h4>
            <div class="mobile-menu-list" id="mobileMenuList"></div>
        </section>

        <footer class="menu-footer">
            <div class="menu-footer-info">
                <span class="app-version">CineBrain v1.0.0</span>
                <span class="menu-footer-separator">•</span>
                <a href="/pages/privacy.html" class="menu-footer-link">Privacy</a>
                <span class="menu-footer-separator">•</span>
                <a href="/pages/terms.html" class="menu-footer-link">Terms</a>
            </div>
        </footer>
    </aside>

    <!-- Backdrop -->
    <div class="mobile-backdrop" id="mobileBackdrop" aria-hidden="true"></div>

    <!-- Modals -->
    <!-- Trailer Modal -->
    <div class="modal fade" id="trailerModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="trailerTitle">Trailer</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="ratio ratio-16x9">
                        <iframe id="trailerFrame" src="" frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                            allowfullscreen></iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Share Modal -->
    <div class="modal fade" id="shareModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Share</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="share-options">
                        <button class="share-option" id="shareWhatsApp">
                            <i data-feather="message-circle"></i>
                            WhatsApp
                        </button>
                        <button class="share-option" id="shareTwitter">
                            <i data-feather="twitter"></i>
                            Twitter
                        </button>
                        <button class="share-option" id="shareFacebook">
                            <i data-feather="facebook"></i>
                            Facebook
                        </button>
                        <button class="share-option" id="copyLink">
                            <i data-feather="link"></i>
                            Copy Link
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3">
        <div id="notificationToast" class="toast" role="alert">
            <div class="toast-header">
                <strong class="me-auto">CineBrain</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast"></button>
            </div>
            <div class="toast-body" id="toastMessage"></div>
        </div>
    </div>

    <!-- Bootstrap Bundle JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Feather Icons -->
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>

    <!-- Custom JavaScript -->
    <script src="/assets/js/theme-manager.js"></script>
    <script src="/assets/js/topbar.js"></script>
    <script src="/assets/js/mobile-nav.js"></script>
    <script src="/assets/js/content-card.js"></script>
    <script src="/assets/js/details.js"></script>
</body>

</html>

2. details.js 

// details.js - Production-Ready with Carousel Recommendations
class DetailsPage {
    constructor() {
        // API Configuration
        this.apiBase = 'https://backend-app-970m.onrender.com/api';
        this.posterBase = 'https://image.tmdb.org/t/p/w500';
        this.backdropBase = 'https://image.tmdb.org/t/p/w1280';

        // Content Data
        this.contentId = this.getContentIdFromUrl();
        this.contentData = null;

        // Authentication
        this.authToken = localStorage.getItem('cinebrain-token');
        this.isAuthenticated = !!this.authToken;
        this.currentUser = this.getCurrentUser();

        // User Lists
        this.userWatchlist = new Set();
        this.userFavorites = new Set();

        // Cache for performance
        this.recommendationsCache = {
            similar: null,
            genre: null
        };

        // Loading states
        this.loadingStates = {
            details: false,
            similar: false,
            genre: false
        };

        // Device detection
        this.isMobile = window.innerWidth < 768;
        this.isTablet = window.innerWidth >= 768 && window.innerWidth < 1024;

        // Initialize
        this.init();
    }

    getContentIdFromUrl() {
        try {
            const params = new URLSearchParams(window.location.search);
            const id = params.get('id');
            console.log('Extracted content ID:', id);
            return id;
        } catch (error) {
            console.error('Error extracting content ID:', error);
            return null;
        }
    }

    getCurrentUser() {
        try {
            const userStr = localStorage.getItem('cinebrain-user');
            if (userStr) {
                return JSON.parse(userStr);
            }
        } catch (e) {
            console.error('Error parsing user data:', e);
        }
        return null;
    }

    async init() {
        try {
            if (!this.contentId) {
                console.error('No content ID found in URL');
                this.showError('No content ID provided. Please select a movie or show to view.');
                this.hideLoader();
                return;
            }

            if (isNaN(this.contentId)) {
                console.error('Invalid content ID format:', this.contentId);
                this.showError('Invalid content ID format. Please select a valid movie or show.');
                this.hideLoader();
                return;
            }

            console.log('Initializing details page for content ID:', this.contentId);
            this.setLoadingState('details', true);

            if (this.isAuthenticated) {
                try {
                    await this.loadUserLists();
                } catch (error) {
                    console.warn('Failed to load user lists:', error);
                }
            }

            await this.loadContentDetails();
            this.setupEventListeners();

            if (typeof feather !== 'undefined') {
                feather.replace();
            }

            this.hideLoader();

            // Load recommendations after main content
            setTimeout(() => {
                this.loadAllRecommendations();
            }, 100);

            if (this.isAuthenticated) {
                this.recordViewInteraction();
            }

            if (window.mobileNav) {
                window.mobileNav.detectCurrentPage();
            }

            this.setupResponsiveHandlers();

        } catch (error) {
            console.error('Initialization error:', error);
            this.showError(`Failed to load content: ${error.message || 'Unknown error'}`);
            this.hideLoader();
        } finally {
            this.setLoadingState('details', false);
        }
    }

    setupResponsiveHandlers() {
        try {
            let resizeTimer;
            window.addEventListener('resize', () => {
                clearTimeout(resizeTimer);
                resizeTimer = setTimeout(() => {
                    const wasMobile = this.isMobile;
                    this.isMobile = window.innerWidth < 768;
                    this.isTablet = window.innerWidth >= 768 && window.innerWidth < 1024;

                    if (wasMobile !== this.isMobile) {
                        this.setupAllCarousels();
                    }
                }, 250);
            });

            window.addEventListener('orientationchange', () => {
                setTimeout(() => {
                    this.setupAllCarousels();
                }, 300);
            });
        } catch (error) {
            console.error('Error setting up responsive handlers:', error);
        }
    }

    setLoadingState(section, isLoading) {
        this.loadingStates[section] = isLoading;
        console.log(`Loading state for ${section}:`, isLoading);
    }

    hideLoader() {
        try {
            const loader = document.getElementById('pageLoader');
            if (loader) {
                loader.classList.add('hidden');
                setTimeout(() => {
                    if (loader && loader.parentNode) {
                        loader.parentNode.removeChild(loader);
                    }
                }, 300);
            }
        } catch (error) {
            console.error('Error hiding loader:', error);
        }
    }

    async loadUserLists() {
        if (window.contentCardManager && typeof window.contentCardManager.loadUserWishlist === 'function') {
            try {
                await window.contentCardManager.loadUserWishlist();
                this.userWatchlist = window.contentCardManager.userWatchlist || new Set();
                this.userFavorites = window.contentCardManager.userFavorites || new Set();
                return;
            } catch (error) {
                console.warn('Failed to load from ContentCardManager:', error);
            }
        }

        try {
            const response = await fetch(`${this.apiBase}/user/watchlist`, {
                headers: {
                    'Authorization': `Bearer ${this.authToken}`,
                    'Content-Type': 'application/json'
                }
            });

            if (response.ok) {
                const data = await response.json();
                this.userWatchlist.clear();
                if (data.watchlist && Array.isArray(data.watchlist)) {
                    data.watchlist.forEach(item => {
                        if (item && item.id) {
                            this.userWatchlist.add(parseInt(item.id));
                        }
                    });
                }
                this.userFavorites.clear();
                if (data.favorites && Array.isArray(data.favorites)) {
                    data.favorites.forEach(item => {
                        if (item && item.id) {
                            this.userFavorites.add(parseInt(item.id));
                        }
                    });
                }
            }
        } catch (error) {
            console.error('Error loading user lists:', error);
        }
    }

    async loadContentDetails() {
        const url = `${this.apiBase}/content/${this.contentId}`;
        console.log('Fetching content from:', url);

        try {
            const controller = new AbortController();
            const timeoutId = setTimeout(() => controller.abort(), 15000);

            const response = await fetch(url, {
                method: 'GET',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                signal: controller.signal
            });

            clearTimeout(timeoutId);

            if (!response.ok) {
                let errorMessage = `Failed to load content (Error ${response.status})`;

                if (response.status === 404) {
                    errorMessage = 'Content not found. This movie or show may have been removed.';
                } else if (response.status === 500) {
                    errorMessage = 'Server error. Please try again later.';
                }

                try {
                    const errorData = await response.json();
                    if (errorData && (errorData.error || errorData.message)) {
                        errorMessage = errorData.error || errorData.message;
                    }
                } catch (e) { }

                throw new Error(errorMessage);
            }

            const data = await response.json();
            console.log('Content data received:', data);

            if (!data) {
                throw new Error('No data received from server');
            }

            if (!data.title && !data.name) {
                data.title = 'Unknown Title';
            }

            this.contentData = data;
            await this.renderContent();

        } catch (error) {
            console.error('Error loading content details:', error);

            if (error.name === 'AbortError') {
                throw new Error('Request timed out. Please check your connection and try again.');
            }

            throw error;
        }
    }

    async renderContent() {
        try {
            const data = this.contentData;
            if (!data) {
                console.error('No content data to render');
                return;
            }

            console.log('Rendering content:', data.title || data.name);

            document.title = `${data.title || data.name || 'Content'} - CineBrain`;
            this.updateMetaTags(data);

            // Hero Section - Backdrop
            if (data.backdrop_path) {
                const backdrop = document.getElementById('heroBackdrop');
                if (backdrop) {
                    const backdropUrl = data.backdrop_path.startsWith('http') ?
                        data.backdrop_path :
                        `${this.backdropBase}${data.backdrop_path}`;
                    backdrop.style.backgroundImage = `url(${backdropUrl})`;
                }
            }

            // Poster
            const poster = document.getElementById('posterImage');
            if (poster) {
                const posterUrl = this.formatPosterUrl(data.poster_path);

                const img = new Image();
                img.onload = () => {
                    poster.src = img.src;
                    poster.classList.add('loaded');
                };
                img.onerror = () => {
                    poster.src = this.getPlaceholderImage();
                    poster.classList.add('loaded');
                };
                img.src = posterUrl;
                poster.alt = data.title || data.name || 'Poster';
            }

            // Quality Badge
            if (data.rating && data.rating >= 8.0) {
                const qualityBadge = document.getElementById('qualityBadge');
                if (qualityBadge) {
                    qualityBadge.style.display = 'block';
                }
            }

            // Title
            const titleElement = document.getElementById('contentTitle');
            if (titleElement) {
                titleElement.textContent = data.title || data.name || 'Unknown Title';
                const titleShimmer = titleElement.querySelector('.title-shimmer');
                if (titleShimmer) {
                    titleShimmer.remove();
                }
            }

            // Rest of the render content method remains the same...
            // [Include all the other rendering code from your original renderContent method]

            // Mobile Quick Stats
            this.updateElement('mobileRating', data.rating ? data.rating.toFixed(1) : 'N/A');
            this.updateElement('mobileRuntime', this.formatRuntime(data.runtime, true));
            this.updateElement('mobileYear', data.release_date ? new Date(data.release_date).getFullYear() : 'N/A');

            // Continue with all other rendering...

            // Re-initialize feather icons
            if (typeof feather !== 'undefined') {
                feather.replace();
            }

            // Load similar content from response if available
            if (data.similar_content && data.similar_content.length > 0) {
                console.log('Rendering similar content from response');
                this.renderCarousel('similarContent', data.similar_content);
            }

        } catch (error) {
            console.error('Error rendering content:', error);
            throw new Error('Failed to render content details');
        }
    }

    async loadAllRecommendations() {
        try {
            console.log('Starting to load recommendations...');
            const promises = [
                this.loadSimilarContent(),
                this.loadGenreContent()
            ];

            const results = await Promise.allSettled(promises);
            results.forEach((result, index) => {
                if (result.status === 'rejected') {
                    console.warn(`Recommendation loading failed at index ${index}:`, result.reason);
                }
            });
        } catch (error) {
            console.error('Error loading recommendations:', error);
        }
    }

    async loadSimilarContent() {
        if (this.loadingStates.similar) return;

        try {
            this.setLoadingState('similar', true);
            console.log('Loading similar content...');

            const controller = new AbortController();
            const timeoutId = setTimeout(() => controller.abort(), 10000);

            const response = await fetch(
                `${this.apiBase}/recommendations/similar/${this.contentId}?limit=20&strict_mode=true&min_similarity=0.5`,
                { signal: controller.signal }
            );

            clearTimeout(timeoutId);

            if (response.ok) {
                const data = await response.json();
                console.log('Similar content response:', data);

                if (data && data.similar_content && data.similar_content.length > 0) {
                    this.recommendationsCache.similar = data.similar_content;
                    this.renderCarousel('similarContent', data.similar_content);
                } else {
                    console.log('No similar content in response');
                    this.showNoContent('similarContent', 'No similar titles found');
                }
            } else {
                console.warn('Failed to load similar content:', response.status);
                this.showNoContent('similarContent', 'Failed to load similar titles');
            }
        } catch (error) {
            if (error.name !== 'AbortError') {
                console.error('Error loading similar content:', error);
                this.showNoContent('similarContent', 'Error loading similar titles');
            }
        } finally {
            this.setLoadingState('similar', false);
        }
    }

    async loadGenreContent() {
        if (!this.contentData || !this.contentData.genres || this.contentData.genres.length === 0) {
            console.log('No genres available for genre recommendations');
            this.showNoContent('genreContent', 'No genre data available');
            return;
        }

        if (this.loadingStates.genre) return;

        const primaryGenre = this.contentData.genres[0].toLowerCase();

        const genreTitle = document.getElementById('genreTitle');
        if (genreTitle) {
            genreTitle.textContent = `More ${primaryGenre.charAt(0).toUpperCase() + primaryGenre.slice(1)} ${this.contentData.content_type === 'movie' ? 'Movies' : 'Shows'}`;
        }

        try {
            this.setLoadingState('genre', true);
            console.log('Loading genre content for:', primaryGenre);

            const controller = new AbortController();
            const timeoutId = setTimeout(() => controller.abort(), 10000);

            const response = await fetch(
                `${this.apiBase}/recommendations/genre/${primaryGenre}?type=${this.contentData.content_type}&limit=20`,
                { signal: controller.signal }
            );

            clearTimeout(timeoutId);

            if (response.ok) {
                const data = await response.json();
                console.log('Genre content response:', data);

                if (data && data.recommendations && data.recommendations.length > 0) {
                    this.recommendationsCache.genre = data.recommendations;
                    this.renderCarousel('genreContent', data.recommendations);
                } else {
                    console.log('No genre content in response');
                    this.showNoContent('genreContent', 'No genre recommendations found');
                }
            } else {
                console.warn('Failed to load genre content:', response.status);
                this.showNoContent('genreContent', 'Failed to load genre recommendations');
            }
        } catch (error) {
            if (error.name !== 'AbortError') {
                console.error('Error loading genre content:', error);
                this.showNoContent('genreContent', 'Error loading genre recommendations');
            }
        } finally {
            this.setLoadingState('genre', false);
        }
    }

    renderCarousel(containerId, items) {
        try {
            console.log(`Rendering carousel for ${containerId} with ${items.length} items`);

            const container = document.getElementById(containerId);
            if (!container) {
                console.warn(`Container ${containerId} not found`);
                return;
            }

            if (!items || !Array.isArray(items) || items.length === 0) {
                console.warn(`No items to render for ${containerId}`);
                this.showNoContent(containerId, 'No content available');
                return;
            }

            // Clear existing content
            container.innerHTML = '';

            // Create carousel wrapper structure matching content-card.css
            container.className = 'carousel-wrapper';

            // Add each content card
            items.forEach(item => {
                const card = this.createContentCard(item);
                if (card) {
                    container.appendChild(card);
                }
            });

            // Setup navigation for the parent carousel container
            const carouselContainer = container.closest('.carousel-container');
            if (carouselContainer) {
                this.setupCarouselNavigation(carouselContainer);
            }

            console.log(`Successfully rendered ${items.length} items in ${containerId}`);

        } catch (error) {
            console.error(`Error rendering carousel in ${containerId}:`, error);
            this.showNoContent(containerId, 'Error displaying content');
        }
    }

    createContentCard(content) {
        try {
            if (!content) return null;

            const card = document.createElement('div');
            card.className = 'content-card';
            card.dataset.contentId = content.id;

            const posterUrl = this.formatPosterUrl(content.poster_path);
            const rating = content.rating ? content.rating.toFixed(1) : 'N/A';
            const year = content.release_date ? new Date(content.release_date).getFullYear() : '';
            const isInWatchlist = this.userWatchlist.has(parseInt(content.id));
            const genres = content.genres?.slice(0, 2) || [];
            const runtime = this.formatRuntime(content.runtime, true);
            const contentType = content.content_type || 'movie';

            const similarityBadge = content.similarity_score ?
                `<div class="similarity-badge" style="position: absolute; bottom: 60px; left: 8px; background: var(--cinebrain-primary); color: white; padding: 4px 8px; border-radius: 4px; font-size: 10px; font-weight: 600; z-index: 3;">${Math.round(content.similarity_score * 100)}% Match</div>` : '';

            card.innerHTML = `
                <div class="card-poster-container">
                    <img class="card-poster" 
                         data-src="${posterUrl}" 
                         alt="${this.escapeHtml(content.title || content.name || 'Content')}" 
                         loading="lazy">
                    <div class="content-type-badge ${contentType}">
                        ${contentType.toUpperCase()}
                    </div>
                    ${similarityBadge}
                    <div class="card-overlays">
                        <div class="card-top-overlay">
                            <div></div>
                            <button class="wishlist-btn ${isInWatchlist ? 'active' : ''}" 
                                    data-content-id="${content.id}" 
                                    title="${isInWatchlist ? 'Remove from Wishlist' : 'Add to Wishlist'}"
                                    aria-label="${isInWatchlist ? 'Remove from Wishlist' : 'Add to Wishlist'}">
                                <svg viewBox="0 0 24 24">
                                    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                                </svg>
                            </button>
                        </div>
                        <div class="card-bottom-overlay">
                            <div class="rating-badge">
                                <svg viewBox="0 0 24 24">
                                    <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                                </svg>
                                <span>${rating}</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-info">
                    <div class="card-title">${this.escapeHtml(content.title || content.name || 'Unknown')}</div>
                    <div class="card-meta">
                        ${year ? `<span class="card-year">${year}</span>` : ''}
                        ${runtime ? `<span class="card-runtime">• ${runtime}</span>` : ''}
                        ${content.match_type ? `<span class="match-type" style="color: var(--text-muted); font-size: 0.75rem; font-style: italic;">• ${content.match_type}</span>` : ''}
                    </div>
                    ${genres.length > 0 ? `
                        <div class="card-genres">
                            ${genres.map(genre => `<span class="genre-chip">${this.escapeHtml(genre)}</span>`).join('')}
                        </div>
                    ` : ''}
                </div>
            `;

            // Setup lazy loading for the image
            this.setupLazyLoading(card);

            // Add click handler
            card.addEventListener('click', (e) => {
                if (!e.target.closest('.wishlist-btn')) {
                    window.location.href = `/content/details.html?id=${content.id}`;
                }
            });

            // Add wishlist handler
            const wishlistBtn = card.querySelector('.wishlist-btn');
            if (wishlistBtn) {
                wishlistBtn.addEventListener('click', async (e) => {
                    e.stopPropagation();
                    await this.toggleWishlistItem(content.id, wishlistBtn);
                });
            }

            return card;
        } catch (error) {
            console.error('Error creating content card:', error);
            return null;
        }
    }

    setupLazyLoading(card) {
        const img = card.querySelector('.card-poster');
        if (!img) return;

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const imgSrc = img.dataset.src;
                    if (imgSrc) {
                        const tempImg = new Image();
                        tempImg.onload = () => {
                            img.src = imgSrc;
                            img.classList.add('loaded');
                        };
                        tempImg.onerror = () => {
                            img.src = this.getPlaceholderImage();
                            img.classList.add('loaded');
                        };
                        tempImg.src = imgSrc;
                    }
                    observer.unobserve(img);
                }
            });
        }, {
            rootMargin: '50px',
            threshold: 0.01
        });
        observer.observe(img);
    }

    setupCarouselNavigation(carouselContainer) {
        const wrapper = carouselContainer.querySelector('.carousel-wrapper');
        const prevBtn = carouselContainer.querySelector('.carousel-nav.prev');
        const nextBtn = carouselContainer.querySelector('.carousel-nav.next');

        if (!wrapper) return;

        // Calculate scroll amount
        const getScrollAmount = () => {
            const containerWidth = wrapper.clientWidth;
            const cardWidth = wrapper.querySelector('.content-card')?.offsetWidth || 180;
            const gap = parseInt(getComputedStyle(wrapper).gap) || 12;
            const visibleCards = Math.floor(containerWidth / (cardWidth + gap));
            return (cardWidth + gap) * Math.max(1, visibleCards - 1);
        };

        // Update navigation buttons state
        const updateNavButtons = () => {
            if (!prevBtn || !nextBtn) return;

            const scrollLeft = wrapper.scrollLeft;
            const maxScroll = wrapper.scrollWidth - wrapper.clientWidth;

            prevBtn.classList.toggle('disabled', scrollLeft <= 0);
            nextBtn.classList.toggle('disabled', scrollLeft >= maxScroll - 1);
        };

        // Navigation handlers
        if (prevBtn && nextBtn) {
            prevBtn.addEventListener('click', () => {
                wrapper.scrollBy({
                    left: -getScrollAmount(),
                    behavior: 'smooth'
                });
            });

            nextBtn.addEventListener('click', () => {
                wrapper.scrollBy({
                    left: getScrollAmount(),
                    behavior: 'smooth'
                });
            });

            wrapper.addEventListener('scroll', updateNavButtons);
            updateNavButtons();
        }

        // Touch/swipe support
        this.setupTouchScroll(wrapper);
    }

    setupTouchScroll(wrapper) {
        if (!wrapper) return;

        let isDown = false;
        let startX = 0;
        let scrollLeft = 0;

        wrapper.addEventListener('touchstart', (e) => {
            isDown = true;
            startX = e.touches[0].pageX;
            scrollLeft = wrapper.scrollLeft;
        }, { passive: true });

        wrapper.addEventListener('touchmove', (e) => {
            if (!isDown) return;
            const x = e.touches[0].pageX;
            const walk = (startX - x) * 1.5;
            wrapper.scrollLeft = scrollLeft + walk;
        }, { passive: true });

        wrapper.addEventListener('touchend', () => {
            isDown = false;
        });
    }

    setupAllCarousels() {
        // Setup for similar content
        const similarContainer = document.getElementById('similarContent')?.closest('.carousel-container');
        if (similarContainer) {
            this.setupCarouselNavigation(similarContainer);
        }

        // Setup for genre content
        const genreContainer = document.getElementById('genreContent')?.closest('.carousel-container');
        if (genreContainer) {
            this.setupCarouselNavigation(genreContainer);
        }

        // Setup for cast/crew
        this.setupCarouselNav('cast');
        const crewWrapper = document.getElementById('crewWrapper');
        if (crewWrapper && crewWrapper.children.length > 0) {
            this.setupCarouselNav('crew');
        }
    }

    showNoContent(containerId, message) {
        const container = document.getElementById(containerId);
        if (container) {
            container.innerHTML = `
                <div class="error-message" style="text-align: center; padding: 20px; color: var(--text-secondary);">
                    <p>${message}</p>
                </div>
            `;
        }
    }

    // ... Rest of your helper methods remain the same ...

    async toggleWishlistItem(contentId, button) {
        if (!this.isAuthenticated) {
            this.showToast('Please login to add to wishlist', 'warning');
            setTimeout(() => {
                window.location.href = '/auth/login.html?redirect=' + encodeURIComponent(window.location.href);
            }, 1000);
            return;
        }

        try {
            const isActive = button.classList.contains('active');
            if (button.disabled) return;
            button.disabled = true;

            const response = await fetch(`${this.apiBase}/interactions`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${this.authToken}`
                },
                body: JSON.stringify({
                    content_id: parseInt(contentId),
                    interaction_type: isActive ? 'remove_watchlist' : 'watchlist'
                })
            });

            if (response.ok) {
                button.classList.toggle('active');
                const contentIdNum = parseInt(contentId);

                if (button.classList.contains('active')) {
                    this.userWatchlist.add(contentIdNum);
                    button.setAttribute('title', 'Remove from Wishlist');
                    button.setAttribute('aria-label', 'Remove from Wishlist');
                } else {
                    this.userWatchlist.delete(contentIdNum);
                    button.setAttribute('title', 'Add to Wishlist');
                    button.setAttribute('aria-label', 'Add to Wishlist');
                }

                if (window.contentCardManager) {
                    if (button.classList.contains('active')) {
                        window.contentCardManager.userWatchlist.add(contentIdNum);
                    } else {
                        window.contentCardManager.userWatchlist.delete(contentIdNum);
                    }
                }
            }
        } catch (error) {
            console.error('Error updating wishlist:', error);
        } finally {
            setTimeout(() => {
                button.disabled = false;
            }, 500);
        }
    }

    updateElement(elementId, value) {
        try {
            const element = document.getElementById(elementId);
            if (element) {
                element.textContent = value;
            }
        } catch (error) {
            console.error(`Error updating element ${elementId}:`, error);
        }
    }

    setupEventListeners() {
        // Your existing event listeners setup
    }

    showToast(message, type = 'success') {
        try {
            if (window.topbar?.notificationSystem) {
                window.topbar.notificationSystem.show(message, type);
            } else if (window.mobileNav) {
                window.mobileNav.showToast(message, type);
            } else {
                const toastEl = document.getElementById('notificationToast');
                const toastMessage = document.getElementById('toastMessage');

                if (toastEl && toastMessage) {
                    toastMessage.textContent = message;
                    toastEl.className = `toast ${type}`;

                    const toast = new bootstrap.Toast(toastEl);
                    toast.show();
                }
            }
        } catch (error) {
            console.error('Error showing toast:', error);
        }
    }

    formatPosterUrl(posterPath) {
        if (!posterPath) {
            return this.getPlaceholderImage();
        }
        if (posterPath.startsWith('http')) {
            return posterPath;
        }
        return `${this.posterBase}${posterPath}`;
    }

    formatRuntime(minutes, short = false) {
        if (!minutes) return '';
        const hours = Math.floor(minutes / 60);
        const mins = minutes % 60;
        if (short) {
            return hours > 0 ? `${hours}h${mins}m` : `${mins}m`;
        }
        return hours > 0 ? `${hours}h ${mins}m` : `${mins} min`;
    }

    escapeHtml(text) {
        if (!text || typeof text !== 'string') return '';
        const map = {
            '&': '&amp;',
            '<': '&lt;',
            '>': '&gt;',
            '"': '&quot;',
            "'": '&#039;'
        };
        return text.replace(/[&<>"']/g, m => map[m]);
    }

    getPlaceholderImage() {
        return 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjQ1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjQ1MCIgZmlsbD0iIzFhMWYzYSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmaWxsPSIjNjY3IiBmb250LXNpemU9IjE4IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+Tm8gSW1hZ2U8L3RleHQ+PC9zdmc+';
    }

    showError(message = 'Content not found') {
        const container = document.querySelector('.hero-content') || document.querySelector('#main-content');

        if (container) {
            container.innerHTML = `
                <div class="error-container" style="
                    text-align: center; 
                    padding: 50px 20px;
                    max-width: 600px;
                    margin: 0 auto;
                ">
                    <div style="
                        width: 80px;
                        height: 80px;
                        margin: 0 auto 20px;
                        background: var(--card-hover-bg);
                        border-radius: 50%;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                    ">
                        <i data-feather="alert-circle" style="
                            width: 40px;
                            height: 40px;
                            color: var(--text-secondary);
                        "></i>
                    </div>
                    
                    <h2 style="
                        color: var(--text-primary); 
                        margin-bottom: 15px;
                        font-size: clamp(1.5rem, 4vw, 2rem);
                    ">Content Not Found</h2>
                    
                    <p style="
                        color: var(--text-secondary); 
                        margin-bottom: 30px;
                        font-size: clamp(0.9rem, 2vw, 1.1rem);
                        line-height: 1.6;
                    ">${this.escapeHtml(message)}</p>
                    
                    <div style="
                        display: flex;
                        gap: 15px;
                        justify-content: center;
                        flex-wrap: wrap;
                    ">
                        <a href="/" class="btn-action btn-play" style="
                            display: inline-flex;
                            align-items: center;
                            text-decoration: none;
                        ">
                            <i data-feather="home"></i>
                            <span class="btn-text">Go Home</span>
                        </a>
                        
                        <button onclick="window.history.back()" class="btn-action btn-watchlist" style="
                            display: inline-flex;
                            align-items: center;
                        ">
                            <i data-feather="arrow-left"></i>
                            <span class="btn-text">Go Back</span>
                        </button>
                    </div>
                </div>
            `;

            if (typeof feather !== 'undefined') {
                feather.replace();
            }
        }
    }
}

// Initialize the details page
document.addEventListener('DOMContentLoaded', () => {
    try {
        console.log('DOM loaded, initializing details page...');
        const detailsPage = new DetailsPage();
        window.detailsPage = detailsPage;
    } catch (error) {
        console.error('Failed to initialize details page:', error);

        const container = document.querySelector('#main-content');
        if (container) {
            container.innerHTML = `
                <div style="text-align: center; padding: 50px 20px;">
                    <h2 style="color: var(--text-primary, #000);">Error Loading Page</h2>
                    <p style="color: var(--text-secondary, #666);">Something went wrong. Please try again.</p>
                    <a href="/" style="color: var(--cinebrain-primary, #113CCF);">Go Home</a>
                </div>
            `;
        }
    }
});

window.addEventListener('load', () => {
    console.log('Page fully loaded');
});

window.addEventListener('error', (event) => {
    console.error('Uncaught error:', event.error);
});

window.addEventListener('unhandledrejection', (event) => {
    console.error('Unhandled promise rejection:', event.reason);
});

3. details.css 

/* details.css - Production-Ready with Full Mobile Responsive Design */
:root {
    /* Inherit from content-card.css design system */
    --hero-min-height: 400px;
    --hero-max-height: 600px;

    /* Responsive poster sizes */
    --poster-width: clamp(120px, 35vw, 300px);
    --poster-aspect-ratio: 3 / 4.5;

    /* Responsive text sizes */
    --title-size: clamp(1.25rem, 5vw, 2.5rem);
    --subtitle-size: clamp(0.875rem, 2.5vw, 1.125rem);
    --text-size: clamp(0.875rem, 2vw, 1rem);
    --small-text: clamp(0.75rem, 1.5vw, 0.875rem);

    /* Section paddings */
    --section-padding: clamp(15px, 4vw, 40px);
    --content-gap: clamp(8px, 2vw, 20px);

    /* Cast/Crew card sizes */
    --cast-card-width: clamp(100px, 25vw, 140px);
    --cast-photo-size: clamp(80px, 20vw, 120px);

    --content-max-width: 1920px;
}

/* Page Loader - Matching topbar design */
.page-loader {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: var(--card-bg);
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: opacity 0.3s, visibility 0.3s;
}

.page-loader.hidden {
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
}

.loader-content {
    text-align: center;
}

.cinebrain-loader {
    display: flex;
    gap: 8px;
    justify-content: center;
    margin-bottom: 20px;
}

.loader-dot {
    width: 12px;
    height: 12px;
    background: var(--cinebrain-primary);
    border-radius: 50%;
    animation: loader-bounce 1.4s ease-in-out infinite;
}

.loader-dot:nth-child(1) {
    animation-delay: 0s;
}

.loader-dot:nth-child(2) {
    animation-delay: 0.2s;
}

.loader-dot:nth-child(3) {
    animation-delay: 0.4s;
}

.loader-dot:nth-child(4) {
    animation-delay: 0.6s;
}

@keyframes loader-bounce {

    0%,
    80%,
    100% {
        transform: scale(0.8);
        opacity: 0.5;
    }

    40% {
        transform: scale(1.2);
        opacity: 1;
    }
}

.loader-text {
    color: var(--text-secondary);
    font-size: var(--small-text);
    font-weight: 500;
}

/* Hero Section - Clean monochrome design */
.hero-section {
    position: relative;
    min-height: var(--hero-min-height);
    max-height: var(--hero-max-height);
    margin-top: var(--navbar-height);
    overflow: hidden;
    background: var(--card-bg);
}

.hero-backdrop {
    position: absolute;
    top: -20px;
    left: -20px;
    right: -20px;
    bottom: -20px;
    background-size: cover;
    background-position: center 20%;
    filter: blur(20px);
    transform: scale(1.1);
    opacity: 0.4;
    z-index: 0;
}

.backdrop-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.4);
}

.backdrop-gradient {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(to bottom,
            transparent 0%,
            var(--card-bg) 100%);
}

.hero-content {
    position: relative;
    z-index: 2;
    padding: var(--section-padding);
    padding-top: clamp(20px, 5vw, 30px);
}

/* Poster Styling - Fully Responsive */
.poster-wrapper {
    position: relative;
    margin-bottom: clamp(15px, 3vw, 20px);
    width: 100%;
}

.poster-container {
    position: relative;
    width: 100%;
    max-width: var(--poster-width);
    margin: 0 auto;
}

.poster-image-wrapper {
    position: relative;
    width: 100%;
    aspect-ratio: var(--poster-aspect-ratio);
    border-radius: var(--card-border-radius);
    overflow: hidden;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    border: 1px solid var(--content-border);
    background: var(--skeleton-bg);
}

.poster-image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0;
    transition: opacity 0.3s;
}

.poster-image.loaded {
    opacity: 1;
}

.poster-shimmer {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: var(--skeleton-bg);
    animation: skeleton-loading 1.5s infinite;
}

.poster-image.loaded+.poster-shimmer {
    display: none;
}

.poster-quality-badge {
    position: absolute;
    top: 10px;
    right: 10px;
    background: var(--cinebrain-primary);
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: clamp(10px, 2vw, 11px);
    font-weight: 700;
    letter-spacing: 0.5px;
    z-index: 2;
}

/* Mobile Quick Stats - Clean monochrome */
.mobile-quick-stats {
    display: flex;
    justify-content: space-around;
    background: var(--card-hover-bg);
    border-radius: var(--card-border-radius);
    padding: clamp(10px, 2vw, 12px);
    margin-top: clamp(12px, 3vw, 15px);
    gap: clamp(8px, 2vw, 12px);
}

.stat-item {
    display: flex;
    align-items: center;
    gap: clamp(4px, 1vw, 6px);
    flex: 1;
    justify-content: center;
}

.stat-icon {
    width: clamp(14px, 3vw, 16px);
    height: clamp(14px, 3vw, 16px);
    color: var(--rating-gold);
}

.stat-value {
    font-weight: 600;
    color: var(--text-primary);
    font-size: var(--small-text);
}

/* Content Details */
.content-details {
    color: var(--text-primary);
    padding: 0 clamp(0px, 2vw, 20px);
}

.title-section {
    margin-bottom: clamp(12px, 3vw, 15px);
}

.content-title {
    font-size: var(--title-size);
    font-weight: 700;
    line-height: 1.2;
    margin-bottom: clamp(4px, 1vw, 8px);
    color: var(--text-primary);
    letter-spacing: -0.02em;
}

.title-shimmer {
    display: inline-block;
    width: clamp(150px, 40vw, 200px);
    height: clamp(25px, 5vw, 30px);
    background: var(--skeleton-bg);
    border-radius: 4px;
    animation: skeleton-loading 1.5s infinite;
}

.content-subtitle {
    font-size: var(--subtitle-size);
    color: var(--text-secondary);
    font-style: italic;
}

/* Meta Information - Clean monochrome */
.content-meta {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: clamp(6px, 1.5vw, 10px);
    margin-bottom: clamp(12px, 3vw, 15px);
    font-size: var(--small-text);
}

.meta-item {
    display: flex;
    align-items: center;
    gap: clamp(3px, 1vw, 5px);
}

.meta-separator {
    color: var(--text-secondary);
    opacity: 0.5;
}

.content-type-badge {
    padding: clamp(3px, 0.8vw, 4px) clamp(8px, 2vw, 10px);
    background: var(--badge-bg);
    color: var(--badge-text);
    border: 1px solid var(--badge-border);
    border-radius: 4px;
    font-size: clamp(10px, 2vw, 11px);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.language-badges {
    display: flex;
    gap: clamp(4px, 1vw, 5px);
    flex-wrap: wrap;
}

.language-badge {
    padding: clamp(2px, 0.5vw, 3px) clamp(6px, 1.5vw, 8px);
    background: var(--genre-chip-bg);
    border: 1px solid var(--genre-chip-border);
    border-radius: 4px;
    font-size: clamp(10px, 2vw, 11px);
    text-transform: uppercase;
    color: var(--text-secondary);
}

/* Genre Section - Matching content-card design */
.genre-section {
    margin-bottom: clamp(15px, 4vw, 20px);
}

.genre-chips {
    display: flex;
    flex-wrap: wrap;
    gap: clamp(6px, 1.5vw, 8px);
    margin-bottom: clamp(8px, 2vw, 10px);
}

.genre-chip {
    padding: clamp(5px, 1.2vw, 6px) clamp(10px, 2.5vw, 14px);
    background: var(--genre-chip-bg);
    border: 1px solid var(--genre-chip-border);
    border-radius: 20px;
    font-size: var(--small-text);
    color: var(--genre-chip-text);
    transition: var(--card-transition);
    cursor: pointer;
    white-space: nowrap;
}

.genre-chip:hover {
    background: var(--genre-chip-hover-bg);
    color: var(--genre-chip-hover-text);
    transform: translateY(-2px);
}

/* Stats Section - Gold ratings only */
.stats-section {
    display: flex;
    flex-wrap: wrap;
    gap: clamp(10px, 2.5vw, 15px);
    margin-bottom: clamp(20px, 5vw, 25px);
    align-items: center;
}

.rating-card,
.popularity-card {
    display: flex;
    align-items: center;
    gap: clamp(8px, 2vw, 12px);
    padding: clamp(10px, 2.5vw, 12px) clamp(15px, 3.5vw, 20px);
    background: var(--card-hover-bg);
    border-radius: 12px;
    border: 1px solid var(--nav-button-border);
}

.rating-icon {
    width: clamp(24px, 6vw, 32px);
    height: clamp(24px, 6vw, 32px);
}

.star-icon {
    width: 100%;
    height: 100%;
    fill: var(--rating-star-color);
}

.rating-value {
    font-size: clamp(1rem, 2.5vw, 1.2rem);
    font-weight: 700;
    color: var(--rating-text-color);
}

.rating-count {
    font-size: clamp(0.65rem, 1.5vw, 0.75rem);
    color: var(--text-secondary);
}

.popularity-value {
    font-size: clamp(1rem, 2.5vw, 1.2rem);
    font-weight: 700;
    color: var(--text-primary);
}

.popularity-label {
    font-size: clamp(0.65rem, 1.5vw, 0.75rem);
    color: var(--text-secondary);
}

.popularity-icon {
    color: var(--cinebrain-primary);
}

.critic-badges {
    display: flex;
    gap: clamp(6px, 1.5vw, 8px);
    flex-wrap: wrap;
}

.critic-badge {
    padding: clamp(5px, 1.2vw, 6px) clamp(10px, 2.5vw, 12px);
    background: var(--cinebrain-primary);
    border-radius: 20px;
    font-size: clamp(10px, 2vw, 11px);
    font-weight: 600;
    color: white;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Action Buttons - Clean monochrome with blue accent */
.action-section {
    margin-bottom: clamp(20px, 5vw, 25px);
}

.primary-actions {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(50px, 1fr));
    gap: clamp(8px, 2vw, 10px);
}

.btn-action {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: clamp(6px, 1.5vw, 8px);
    padding: clamp(10px, 2.5vw, 12px) clamp(12px, 3vw, 20px);
    border: none;
    border-radius: 10px;
    font-weight: 600;
    font-size: var(--small-text);
    cursor: pointer;
    transition: var(--card-transition);
    position: relative;
    overflow: hidden;
    -webkit-tap-highlight-color: transparent;
    white-space: nowrap;
}

.btn-action:before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s;
}

.btn-action:hover:before {
    left: 100%;
}

.btn-action svg {
    width: clamp(16px, 4vw, 18px);
    height: clamp(16px, 4vw, 18px);
    flex-shrink: 0;
}

.btn-play {
    background: var(--cinebrain-primary);
    color: white;
    grid-column: span 2;
}

.btn-play:hover {
    background: var(--cinebrain-primary-light);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(17, 60, 207, 0.3);
}

.btn-play:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.btn-watchlist,
.btn-favorite,
.btn-share {
    background: var(--card-hover-bg);
    color: var(--text-primary);
    border: 1px solid var(--nav-button-border);
}

.btn-watchlist:hover,
.btn-favorite:hover,
.btn-share:hover {
    background: var(--genre-chip-hover-bg);
    transform: translateY(-2px);
}

.btn-watchlist.active,
.btn-favorite.active {
    background: var(--cinebrain-primary);
    color: white;
    border-color: var(--cinebrain-primary);
}

.btn-watchlist.active svg,
.btn-favorite.active svg {
    fill: currentColor;
}

/* Overview Preview */
.overview-preview {
    margin-top: clamp(15px, 4vw, 20px);
    padding-top: clamp(15px, 4vw, 20px);
    border-top: 1px solid var(--nav-button-border);
}

.overview-preview .overview-text {
    font-size: var(--text-size);
    line-height: 1.6;
    color: var(--text-secondary);
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

/* Section Cards - Clean monochrome */
.section-card {
    background: var(--card-bg);
    border: 1px solid var(--nav-button-border);
    border-radius: 12px;
    padding: clamp(15px, 4vw, 20px);
    margin-bottom: clamp(15px, 4vw, 20px);
    animation: fadeInUp 0.6s ease-out;
}

.section-title {
    font-size: clamp(1.1rem, 3vw, 1.5rem);
    font-weight: 600;
    margin-bottom: clamp(15px, 4vw, 20px);
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: clamp(8px, 2vw, 10px);
}

.section-title svg {
    width: clamp(20px, 5vw, 24px);
    height: clamp(20px, 5vw, 24px);
    color: var(--cinebrain-primary);
}

.section-subtitle {
    font-size: clamp(1rem, 2.5vw, 1.1rem);
    font-weight: 600;
    margin-bottom: clamp(12px, 3vw, 15px);
    color: var(--text-primary);
}

/* Overview Section */
.overview-section {
    padding: var(--section-padding) 0;
}

.overview-content {
    position: relative;
}

.overview-text {
    font-size: var(--text-size);
    line-height: 1.7;
    color: var(--text-secondary);
    max-height: 200px;
    overflow: hidden;
    transition: max-height 0.5s ease;
    position: relative;
}

.overview-text.expanded {
    max-height: none;
}

.overview-text:not(.expanded):after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 50px;
    background: linear-gradient(to bottom, transparent, var(--card-bg));
}

.show-more-btn {
    background: none;
    border: none;
    color: var(--cinebrain-primary);
    font-weight: 600;
    cursor: pointer;
    margin-top: clamp(8px, 2vw, 10px);
    padding: 5px 0;
    display: flex;
    align-items: center;
    gap: 5px;
    transition: var(--card-transition);
    font-size: var(--small-text);
}

.show-more-btn:hover {
    gap: 10px;
}

.show-more-btn svg {
    width: clamp(14px, 3.5vw, 16px);
    height: clamp(14px, 3.5vw, 16px);
    transition: transform 0.3s;
}

.show-more-btn.expanded svg {
    transform: rotate(180deg);
}

/* Info List */
.info-list {
    display: flex;
    flex-direction: column;
    gap: clamp(10px, 2.5vw, 12px);
}

.info-item {
    display: flex;
    justify-content: space-between;
    padding: clamp(8px, 2vw, 10px) 0;
    border-bottom: 1px solid var(--nav-button-border);
    font-size: var(--text-size);
}

.info-item:last-child {
    border-bottom: none;
}

.info-label {
    color: var(--text-secondary);
}

.info-value {
    color: var(--text-primary);
    font-weight: 500;
    text-align: right;
}

/* Cast & Crew Section - Circular Photos */
.cast-crew-section {
    padding: var(--section-padding) 0;
    background: var(--card-hover-bg);
}

.section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: clamp(15px, 4vw, 20px);
    flex-wrap: wrap;
    gap: clamp(12px, 3vw, 15px);
}

.section-nav {
    display: flex;
    gap: 5px;
    background: var(--card-bg);
    border-radius: 8px;
    padding: 4px;
}

.nav-btn {
    padding: clamp(6px, 1.5vw, 8px) clamp(12px, 3vw, 16px);
    background: transparent;
    border: none;
    border-radius: 6px;
    color: var(--text-secondary);
    font-size: var(--small-text);
    font-weight: 500;
    cursor: pointer;
    transition: var(--card-transition);
}

.nav-btn.active {
    background: var(--cinebrain-primary);
    color: white;
}

.cast-crew-container {
    position: relative;
}

.cast-crew-wrapper {
    display: flex;
    gap: clamp(12px, 3vw, 15px);
    overflow-x: auto;
    scroll-behavior: smooth;
    padding: clamp(8px, 2vw, 10px) 0 clamp(15px, 4vw, 20px);
    scrollbar-width: none;
    -webkit-overflow-scrolling: touch;
}

.cast-crew-wrapper::-webkit-scrollbar {
    display: none;
}

.cast-member,
.crew-member {
    flex-shrink: 0;
    width: var(--cast-card-width);
    text-align: center;
    cursor: pointer;
    transition: transform 0.3s;
}

.cast-member:hover,
.crew-member:hover {
    transform: translateY(-5px);
}

/* Circular Photo Styling */
.cast-photo,
.crew-photo {
    width: var(--cast-photo-size);
    height: var(--cast-photo-size);
    object-fit: cover;
    border-radius: 50%;
    margin: 0 auto clamp(8px, 2vw, 10px);
    background: var(--skeleton-bg);
    border: 3px solid var(--card-bg);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    transition: var(--card-transition);
}

.cast-member:hover .cast-photo,
.crew-member:hover .crew-photo {
    border-color: var(--cinebrain-primary);
    transform: scale(1.05);
}

.cast-name,
.crew-name {
    font-weight: 600;
    font-size: var(--small-text);
    color: var(--text-primary);
    margin-bottom: clamp(2px, 0.5vw, 3px);
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    line-height: 1.3;
}

.cast-role,
.crew-role {
    font-size: clamp(0.65rem, 1.5vw, 0.75rem);
    color: var(--text-secondary);
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    line-height: 1.3;
}

/* Recommendations Sections - Mobile Grid */
.recommendations-section {
    padding: var(--section-padding) 0;
}

.recommendations-section:nth-child(even) {
    background: var(--card-hover-bg);
}

/* Responsive Grid Container */
.recommendations-grid-container {
    position: relative;
    overflow: hidden;
}

.recommendations-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(clamp(100px, 25vw, 180px), 1fr));
    gap: clamp(10px, 2.5vw, 15px);
    padding: clamp(5px, 1vw, 10px);
}

/* Mobile: Horizontal scroll */
@media (max-width: 767px) {
    .recommendations-grid {
        display: flex;
        overflow-x: auto;
        scroll-behavior: smooth;
        padding-bottom: clamp(10px, 3vw, 15px);
        scrollbar-width: none;
        -webkit-overflow-scrolling: touch;
        gap: clamp(8px, 2vw, 12px);
    }

    .recommendations-grid::-webkit-scrollbar {
        display: none;
    }

    .recommendations-grid .content-card,
    .recommendations-grid .skeleton-card {
        flex: 0 0 clamp(120px, 30vw, 150px);
        width: clamp(120px, 30vw, 150px);
    }
}

/* Desktop: Grid layout */
@media (min-width: 768px) {
    .recommendations-grid {
        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    }
}

/* Similarity Badge */
.similarity-badge {
    position: absolute;
    bottom: 60px;
    left: clamp(6px, 1.5vw, 8px);
    background: var(--cinebrain-primary);
    color: white;
    padding: clamp(3px, 0.8vw, 4px) clamp(6px, 1.5vw, 8px);
    border-radius: 4px;
    font-size: clamp(9px, 2vw, 10px);
    font-weight: 600;
    z-index: 3;
}

.match-type {
    color: var(--text-muted);
    font-size: clamp(0.65rem, 1.5vw, 0.75rem);
    font-style: italic;
}

/* Share Modal - Clean monochrome */
.share-options {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: clamp(12px, 3vw, 15px);
}

.share-option {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: clamp(8px, 2vw, 10px);
    padding: clamp(12px, 3vw, 15px);
    background: var(--card-hover-bg);
    border: 1px solid var(--nav-button-border);
    border-radius: 8px;
    color: var(--text-primary);
    font-weight: 500;
    font-size: var(--small-text);
    cursor: pointer;
    transition: var(--card-transition);
}

.share-option:hover {
    background: var(--cinebrain-primary);
    color: white;
    border-color: var(--cinebrain-primary);
    transform: translateY(-2px);
}

.share-option svg {
    width: clamp(18px, 4.5vw, 20px);
    height: clamp(18px, 4.5vw, 20px);
}

/* Modal Overrides */
.modal-content {
    background: var(--card-bg);
    border: 1px solid var(--nav-button-border);
}

.modal-header {
    border-bottom: 1px solid var(--nav-button-border);
}

.modal-title {
    color: var(--text-primary);
    font-size: clamp(1rem, 2.5vw, 1.2rem);
}

.btn-close {
    filter: var(--text-primary)==#ffffff ? invert(1): none;
}

/* Toast Notifications */
.toast {
    background: var(--card-bg);
    border: 1px solid var(--nav-button-border);
}

.toast-header {
    background: var(--card-hover-bg);
    color: var(--text-primary);
    border-bottom: 1px solid var(--nav-button-border);
}

.toast-body {
    color: var(--text-secondary);
    font-size: var(--small-text);
}

/* Responsive Design Breakpoints */
@media (min-width: 360px) {
    :root {
        --poster-width: clamp(140px, 35vw, 300px);
        --cast-card-width: clamp(110px, 25vw, 140px);
        --cast-photo-size: clamp(90px, 20vw, 120px);
    }
}

@media (min-width: 576px) {
    :root {
        --poster-width: clamp(160px, 30vw, 300px);
        --cast-card-width: clamp(120px, 22vw, 140px);
        --cast-photo-size: clamp(100px, 18vw, 120px);
    }

    .hero-content {
        padding: clamp(20px, 4vw, 40px);
    }

    .primary-actions {
        display: flex;
        flex-wrap: wrap;
    }

    .btn-play {
        flex: 1;
        min-width: 140px;
    }
}

@media (min-width: 768px) {
    :root {
        --poster-width: clamp(180px, 25vw, 250px);
        --cast-card-width: 140px;
        --cast-photo-size: 120px;
    }

    .hero-section {
        min-height: 450px;
    }

    .content-details {
        padding-left: clamp(15px, 3vw, 20px);
    }

    .btn-watchlist .btn-text,
    .btn-favorite .btn-text,
    .btn-share .btn-text {
        display: inline !important;
    }

    /* Hide mobile nav on desktop */
    .mobile-bottom-nav,
    .mobile-menu-overlay,
    .mobile-backdrop {
        display: none !important;
    }

    body {
        padding-bottom: 0 !important;
    }
}

@media (min-width: 992px) {
    :root {
        --poster-width: 250px;
        --cast-card-width: 140px;
        --cast-photo-size: 120px;
    }

    .hero-section {
        min-height: 500px;
    }

    .recommendations-grid {
        grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    }
}

@media (min-width: 1200px) {
    :root {
        --poster-width: 280px;
    }

    .container-fluid {
        max-width: var(--content-max-width);
        margin: 0 auto;
    }
}

@media (min-width: 1440px) {
    :root {
        --poster-width: 300px;
    }
}

/* Animations */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes skeleton-loading {
    0% {
        background-position: 200% 0;
    }

    100% {
        background-position: -200% 0;
    }
}

/* Accessibility */
.btn-action:focus-visible,
.nav-btn:focus-visible,
.share-option:focus-visible,
.genre-chip:focus-visible {
    outline: 2px solid var(--cinebrain-primary);
    outline-offset: 2px;
}

/* Print Styles */
@media print {

    .navbar-cinebrain,
    .mobile-bottom-nav,
    .btn-action,
    .carousel-nav,
    .show-more-btn {
        display: none !important;
    }

    .overview-text {
        max-height: none !important;
    }

    .recommendations-grid {
        display: grid !important;
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)) !important;
        overflow: visible !important;
    }

    body {
        padding-top: 0 !important;
        padding-bottom: 0 !important;
    }
}

/* Reduced Motion */
@media (prefers-reduced-motion: reduce) {

    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}